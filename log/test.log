  [1m[36mActiveRecord::SchemaMigration Load (1.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (2.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to SetUserEmailToUnique (20181217083550)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.5ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_name' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_name' AND type='index'
[0m
  [1m[35m (0.2ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'

  [1m[36m (3.0ms)[0m  [1mDROP INDEX "index_users_on_email"[0m
  [1m[35m (0.6ms)[0m  select sqlite_version(*)
  [1m[36m (0.2ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_name' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_name' AND type='index'
[0m
  [1m[35m (1.0ms)[0m  CREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20181217083550"]]
  [1m[35m (3.0ms)[0m  commit transaction
Migrating to AddColumnPriorityToChatsUsers (20181217105510)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (2.6ms)[0m  ALTER TABLE "chats_users" ADD "priority" integer
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20181217105510"]]
  [1m[35m (2.7ms)[0m  commit transaction
Migrating to SetDefaultValueForChatsUsersPriority (20181217124306)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.7ms)[0m  CREATE TEMPORARY TABLE "achats_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "chat_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "priority" integer) 
  [1m[36m (0.2ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_chats_users_on_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_chats_users_on_user_id' AND type='index'
[0m
  [1m[35m (0.2ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_chats_users_on_chat_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_chats_users_on_chat_id' AND type='index'

  [1m[36m (1.2ms)[0m  [1mCREATE  INDEX "tindex_achats_users_on_user_id" ON "achats_users" ("user_id")[0m
  [1m[35m (0.2ms)[0m  CREATE  INDEX "tindex_achats_users_on_chat_id" ON "achats_users" ("chat_id")
  [1m[36m (2.4ms)[0m  [1mSELECT * FROM "chats_users"[0m
  [1m[35m (1.8ms)[0m  DROP TABLE "chats_users"
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "chats_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "chat_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "priority" integer DEFAULT 0) [0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='tindex_achats_users_on_chat_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='tindex_achats_users_on_chat_id' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='tindex_achats_users_on_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='tindex_achats_users_on_user_id' AND type='index'
[0m
  [1m[35m (0.3ms)[0m  CREATE  INDEX "index_chats_users_on_chat_id" ON "chats_users" ("chat_id")
  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_chats_users_on_chat_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_chats_users_on_chat_id' AND type='index'
[0m
  [1m[35m (0.3ms)[0m  CREATE  INDEX "index_chats_users_on_user_id" ON "chats_users" ("user_id")
  [1m[36m (0.1ms)[0m  [1mSELECT * FROM "achats_users"[0m
  [1m[35m (0.4ms)[0m  DROP TABLE "achats_users"
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20181217124306"]]
  [1m[35m (7.8ms)[0m  commit transaction
Migrating to ChangeDefaultValueForChatsUsersPriority (20181217125635)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.4ms)[0m  CREATE TEMPORARY TABLE "achats_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "chat_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "priority" integer DEFAULT 0) 
  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_chats_users_on_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_chats_users_on_user_id' AND type='index'
[0m
  [1m[35m (0.2ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_chats_users_on_chat_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_chats_users_on_chat_id' AND type='index'

  [1m[36m (0.3ms)[0m  [1mCREATE  INDEX "tindex_achats_users_on_user_id" ON "achats_users" ("user_id")[0m
  [1m[35m (0.2ms)[0m  CREATE  INDEX "tindex_achats_users_on_chat_id" ON "achats_users" ("chat_id")
  [1m[36m (0.1ms)[0m  [1mSELECT * FROM "chats_users"[0m
  [1m[35m (0.7ms)[0m  DROP TABLE "chats_users"
  [1m[36m (0.3ms)[0m  [1mCREATE TABLE "chats_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "chat_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "priority" integer DEFAULT 1) [0m
  [1m[35m (0.2ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='tindex_achats_users_on_chat_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='tindex_achats_users_on_chat_id' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='tindex_achats_users_on_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='tindex_achats_users_on_user_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  CREATE  INDEX "index_chats_users_on_chat_id" ON "chats_users" ("chat_id")
  [1m[36m (0.2ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_chats_users_on_chat_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_chats_users_on_chat_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  CREATE  INDEX "index_chats_users_on_user_id" ON "chats_users" ("user_id")
  [1m[36m (0.1ms)[0m  [1mSELECT * FROM "achats_users"[0m
  [1m[35m (0.3ms)[0m  DROP TABLE "achats_users"
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20181217125635"]]
  [1m[35m (2.8ms)[0m  commit transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_admins_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_admins_on_reset_password_token' AND type='index'

  [1m[36m (0.3ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_admins_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_admins_on_email' AND type='index'
[0m
  [1m[35m (0.3ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_chats_users_on_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_chats_users_on_user_id' AND type='index'

  [1m[36m (0.2ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_chats_users_on_chat_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_chats_users_on_chat_id' AND type='index'
[0m
  [1m[35m (0.2ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_friendships_on_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_friendships_on_user_id' AND type='index'

  [1m[36m (0.4ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_friendships_on_friend_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_friendships_on_friend_id' AND type='index'
[0m
  [1m[35m (0.2ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_messages_on_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_messages_on_user_id' AND type='index'

  [1m[36m (0.2ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_messages_on_chat_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_messages_on_chat_id' AND type='index'
[0m
  [1m[35m (0.2ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'

  [1m[36m (0.2ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_name' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_name' AND type='index'
[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------
MessagesControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
MessagesControllerTest: test_should_get_new
-------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------
MessagesControllerTest: test_should_update_message
--------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------
MessagesControllerTest: test_should_get_index
---------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------
MessagesControllerTest: test_should_create_message
--------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
MessagesControllerTest: test_should_show_message
------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
MessagesControllerTest: test_should_destroy_message
---------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
FriendshipsControllerTest: test_should_get_edit
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------------------
FriendshipsControllerTest: test_should_create_friendship
--------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------
FriendshipsControllerTest: test_should_update_friendship
--------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------
FriendshipsControllerTest: test_should_destroy_friendship
---------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
FriendshipsControllerTest: test_should_get_new
----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------------------
FriendshipsControllerTest: test_should_show_friendship
------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
FriendshipsControllerTest: test_should_get_index
------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (1.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.6ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (2.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (11.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (6.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (3.8ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (1.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (2.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (1.3ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  begin transaction
----------------------------------------------
UserTest: test_password_should_not_be_too_long
----------------------------------------------
  [1m[36mUser Exists (1.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (1.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.5ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UserTest: test_password_should_not_be_too_long
----------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (2.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (1.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (3.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (1.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (5.0ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35m (0.3ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (1.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.4ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (1.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.5ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mUser Exists (1.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (8.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (8.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (3.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (2.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (1.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (1.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (1.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (3.8ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (5.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.5ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (2.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (1.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (1.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (4.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (1.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (36.2ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$RnqMKzPmUrDImGuJG6iRx.mKL9hiCgUoKZp/KCkKwWKiMA4ENJWji"], ["created_at", "2018-12-19 10:38:54.569289"], ["updated_at", "2018-12-19 10:38:54.569289"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (5.5ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.8ms)[0m  begin transaction
  [1m[36mFixture Delete (1.9ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35m (9.9ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$eDysqx4Atr/YFGOomcmJb.gx3m7ol1riBlrRj/OFLfCME1z3KBObW"], ["created_at", "2018-12-19 10:47:52.304812"], ["updated_at", "2018-12-19 10:47:52.304812"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (1.3ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35m (1.1ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (1.9ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$L56o7d0Dmkjyplz9/Tyz6.gcHRkHYjnWzdyLX3ILgndnK6EIR4OXK"], ["created_at", "2018-12-19 10:49:07.736587"], ["updated_at", "2018-12-19 10:49:07.736587"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (7.7ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$yUts9lgCEj58iHbFsCiUYe3bGXk1VUmS1.LFOIx.ycWTpiT/C6u5q"], ["created_at", "2018-12-19 10:49:07.801394"], ["updated_at", "2018-12-19 10:49:07.801394"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (7.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (8.4ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35m (19.1ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserTest: test_invalid_signup_information
-----------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$3..8k1Vbg8Lx4oyGgCOQ.eJ0LKG.S0mqlyJJY.oQCI0RSPwI4CcZS"], ["created_at", "2018-12-19 10:56:20.758252"], ["updated_at", "2018-12-19 10:56:20.758252"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (1.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$Vs16laN4zw7kwXfMLH9Jxe8jrTPhJK3/LhkM8PKRyIOprQ9NGEkD6"], ["created_at", "2018-12-19 10:56:20.857919"], ["updated_at", "2018-12-19 10:56:20.857919"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (11.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  begin transaction
  [1m[36mFixture Delete (1.9ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35m (2.2ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[35m (3.1ms)[0m  rollback transaction
  [1m[36m (1.6ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (2.0ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (1.6ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$5GTVRfQPyFlJZaHNQKp/GuKHjyw/ePwYzgt3hzD4NEfUAWRgt/BC."], ["created_at", "2018-12-19 11:04:04.907645"], ["updated_at", "2018-12-19 11:04:04.907645"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (2.2ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.5ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.5ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (1.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$sdDKaQJykFpjqVvjZ5daU.BKf99YGVMY49V6dUVMyrFsT2LfgTtZO"], ["created_at", "2018-12-19 11:04:05.154226"], ["updated_at", "2018-12-19 11:04:05.154226"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (2.9ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (2.6ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (3.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  begin transaction
  [1m[36mFixture Delete (8.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35m (2.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$BcHX/FxtKXIYs1cbAYNybeqoUTuDeEsAKoVlAfNAaLyLfgeVngm26"], ["created_at", "2018-12-19 11:22:22.233909"], ["updated_at", "2018-12-19 11:22:22.233909"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (4.2ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$DG0LCcUk.ooyK1MjToLk4u881s12aPGMEEAMNz28XMhPUtdQNYYjK"], ["created_at", "2018-12-19 11:22:22.264386"], ["updated_at", "2018-12-19 11:22:22.264386"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (6.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (1.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (25.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (1.7ms)[0m  begin transaction
  [1m[36mFixture Delete (9.6ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (2.1ms)[0m  INSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-19 13:09:00', '2018-12-19 13:09:00', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-19 13:09:00', '2018-12-19 13:09:00', 298486374)[0m
  [1m[35mFixture Delete (2.2ms)[0m  DELETE FROM "users"
  [1m[36m (24.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35m (17.9ms)[0m  begin transaction
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (10.3ms)[0m  INSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-19 13:09:01', '2018-12-19 13:09:01', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-19 13:09:01', '2018-12-19 13:09:01', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "users"
  [1m[36m (6532.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (57.2ms)[0m  rollback transaction
  [1m[36m (3.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (10.3ms)[0m  DELETE FROM "chats"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-19 13:09:08', '2018-12-19 13:09:08', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-19 13:09:08', '2018-12-19 13:09:08', 298486374)
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "users"[0m
  [1m[36mUser Exists (5.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35m (3050.8ms)[0m  commit transaction
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$XjBdm4MoEwN88CM0yXRnC.mcP/LzrO0B/Ci8fIyiarJQSdWZ4qaw2"], ["created_at", "2018-12-19 13:09:12.158846"], ["updated_at", "2018-12-19 13:09:12.158846"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (11.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (26.2ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$Jf5GOMz5aLNyU.5h5eYZM.dFxZXJjhjljD4SJOi87UNnOnIXkovme"], ["created_at", "2018-12-19 13:09:12.314644"], ["updated_at", "2018-12-19 13:09:12.314644"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (71.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
Started GET "/users" for 127.0.0.1 at 2018-12-19 21:09:12 +0800
  [1m[36mUser Exists (0.9ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$Qu.oO/67bKhJuEv00HhXKeOEyPbz4yACTJL582cBZAt75jF9/FJNO"], ["created_at", "2018-12-19 13:09:12.818246"], ["updated_at", "2018-12-19 13:09:12.818246"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (4.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
Processing by UsersController#index as HTML
Completed 500 Internal Server Error in 283ms (ActiveRecord: 0.0ms)
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$tPBZauytlV6YsGyyedzVQeSQhFswZUmgBKbwd2llinrt5oEAkdmlu"], ["created_at", "2018-12-19 13:09:22.290367"], ["updated_at", "2018-12-19 13:09:22.290367"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (3.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
Started GET "/users" for 127.0.0.1 at 2018-12-19 21:09:22 +0800
Processing by UsersController#index as HTML
Completed 500 Internal Server Error in 77ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (229.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (1.8ms)[0m  INSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-19 13:20:11', '2018-12-19 13:20:11', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-19 13:20:11', '2018-12-19 13:20:11', 298486374)[0m
  [1m[35mFixture Delete (4.3ms)[0m  DELETE FROM "users"
  [1m[36m (28.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (4.8ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$k9a6q3TBS9pK0UCOn2ePnexpleRLO/eHNZbvKS5.9jH//0IzxQro2"], ["created_at", "2018-12-19 13:20:28.735152"], ["updated_at", "2018-12-19 13:20:28.735152"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (0.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$E2Jven37x6OnBa8cPMni4e7GxgFd7fvTeBia36yRPoGFQohOWLOR."], ["created_at", "2018-12-19 13:20:28.776796"], ["updated_at", "2018-12-19 13:20:28.776796"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-19 21:20:29 +0800
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}}
Completed 400 Bad Request in 32ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  begin transaction
  [1m[36mFixture Delete (1.9ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (1.1ms)[0m  INSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-19 13:23:02', '2018-12-19 13:23:02', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-19 13:23:02', '2018-12-19 13:23:02', 298486374)[0m
  [1m[35mFixture Delete (3.6ms)[0m  DELETE FROM "users"
  [1m[36m (2.4ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-19 21:23:02 +0800
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}}
Completed 400 Bad Request in 29ms (ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$fxnrtG9X/u9lZKrKKS1wjOMnXdiJ0XKYJ52UpLaJM/4tgT93lh1Mu"], ["created_at", "2018-12-19 13:23:04.677473"], ["updated_at", "2018-12-19 13:23:04.677473"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (1.7ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$wrp4faTocjSgA7N8L8.imeyZF3VMpmCmuwGqE9F14gQYTsCF03YOG"], ["created_at", "2018-12-19 13:23:04.716523"], ["updated_at", "2018-12-19 13:23:04.716523"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.9ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-19 13:24:17', '2018-12-19 13:24:17', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-19 13:24:17', '2018-12-19 13:24:17', 298486374)[0m
  [1m[35mFixture Delete (1.1ms)[0m  DELETE FROM "users"
  [1m[36m (1.4ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-19 21:24:17 +0800
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"name"=>"user", "email"=>"user@invalid", "password"=>"[FILTERED]"}}}
Completed 400 Bad Request in 50ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$I09yG9tYqKahObWbvtFPHuyvHBrcPNtDBAc/65g2HFBLY5PxIqMwa"], ["created_at", "2018-12-19 13:24:18.562405"], ["updated_at", "2018-12-19 13:24:18.562405"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$XHye7xt.WZfeeEqMPYy1KeEVuHzL70H0Bed8QWSkzHNaqqnNP6Hiu"], ["created_at", "2018-12-19 13:24:20.668920"], ["updated_at", "2018-12-19 13:24:20.668920"]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (2.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (1.8ms)[0m  INSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-19 13:26:13', '2018-12-19 13:26:13', 980190962)
  [1m[36mFixture Insert (1.7ms)[0m  [1mINSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-19 13:26:13', '2018-12-19 13:26:13', 298486374)[0m
  [1m[35mFixture Delete (1.0ms)[0m  DELETE FROM "users"
  [1m[36m (1.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
Started GET "/users" for 127.0.0.1 at 2018-12-19 21:26:13 +0800
Processing by UsersController#index as HTML
Completed 500 Internal Server Error in 2406ms (ActiveRecord: 0.0ms)
  [1m[36m (1.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.4ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$mbCNZ9wqps0iNrcu0siae.lcsjp.XliI7MriaRoMLX2iqTBBtp.FS"], ["created_at", "2018-12-19 13:26:19.856734"], ["updated_at", "2018-12-19 13:26:19.856734"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$BiHX6u0aXECODm4/mdXasuBGC.0fDIT5Ms1k5ojPA.akq7Gy.y2Cq"], ["created_at", "2018-12-19 13:26:19.875569"], ["updated_at", "2018-12-19 13:26:19.875569"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (6.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (1.9ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.7ms)[0m  INSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-19 13:27:39', '2018-12-19 13:27:39', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-19 13:27:39', '2018-12-19 13:27:39', 298486374)[0m
  [1m[35mFixture Delete (1.4ms)[0m  DELETE FROM "users"
  [1m[36m (6.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$fNKOIH5u1Is6OxfDloR4gu4VUqnDVJM/tkaHewtatM2jSjTZKkFU2"], ["created_at", "2018-12-19 13:27:42.543213"], ["updated_at", "2018-12-19 13:27:42.543213"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$.VNj.btHC2IkMExodmDVreuHhfTE8dnSqsPt.OWlKx0f.DzH.S50y"], ["created_at", "2018-12-19 13:27:42.629469"], ["updated_at", "2018-12-19 13:27:42.629469"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (1.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.9ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (1.2ms)[0m  INSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-19 13:28:21', '2018-12-19 13:28:21', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-19 13:28:21', '2018-12-19 13:28:21', 298486374)[0m
  [1m[35mFixture Delete (1.4ms)[0m  DELETE FROM "users"
  [1m[36m (1.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (2.0ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$jgbCEXqPlTFkDrSoQ8VEreFFon6QVtiJjn75WpxXMsZAf6H0.O4V6"], ["created_at", "2018-12-19 13:28:22.656163"], ["updated_at", "2018-12-19 13:28:22.656163"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$5aZdbQIfa/HQi5bB.DR6ReNFM65gOeUrJS1kkI.urhjVmPI1xWx8a"], ["created_at", "2018-12-19 13:28:22.708704"], ["updated_at", "2018-12-19 13:28:22.708704"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  begin transaction
  [1m[36mFixture Delete (2.6ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (3.6ms)[0m  INSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-19 13:34:52', '2018-12-19 13:34:52', 980190962)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-19 13:34:52', '2018-12-19 13:34:52', 298486374)[0m
  [1m[35mFixture Delete (10.5ms)[0m  DELETE FROM "users"
  [1m[36m (4.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-19 21:34:52 +0800
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"name"=>"user", "email"=>"user@invalid", "password"=>"[FILTERED]"}}}
Completed 400 Bad Request in 38ms (ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (2.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (2.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (1.7ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.5ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (3.9ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$rDEdgpiwuX1IUjeWJLuqf.yfdWSHQsXl73fh4cjfY6ctc.8CPX/X2"], ["created_at", "2018-12-19 13:35:02.078437"], ["updated_at", "2018-12-19 13:35:02.078437"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (4.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$dNpa58euLQItFUqNptoc4.QgBz8WM6FmULOyN0T0N2T5z2.Ur3xUW"], ["created_at", "2018-12-19 13:35:02.112131"], ["updated_at", "2018-12-19 13:35:02.112131"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (66.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (3.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (3.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.8ms)[0m  begin transaction
  [1m[35m (1.0ms)[0m  begin transaction
  [1m[36mFixture Delete (1.7ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36mFixture Delete (53.5ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Insert (5.0ms)[0m  INSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-19 13:37:09', '2018-12-19 13:37:09', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-19 13:37:09', '2018-12-19 13:37:09', 298486374)[0m
  [1m[35mFixture Delete (0.7ms)[0m  DELETE FROM "chats"
  [1m[35mFixture Delete (1.2ms)[0m  DELETE FROM "users"
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[36m (4.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (1.7ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[36m (1.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-19 13:37:09', '2018-12-19 13:37:09', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-19 13:37:09', '2018-12-19 13:37:09', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-19 21:37:09 +0800
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"name"=>"user", "email"=>"user@invalid", "password"=>"[FILTERED]"}}}
Completed 400 Bad Request in 39ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36m (540.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (1.7ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[35mUser Exists (1.7ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$7gKS/gS0HEF3LcbR4PuhVO4m2Yz2XnHBTZea7xFmtNkddO4YlKreW"], ["created_at", "2018-12-19 13:37:13.099312"], ["updated_at", "2018-12-19 13:37:13.099312"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (0.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (3.7ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (5.6ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$jpJ3zEXZJkQVLdRLeMdE9.7UMdA5Tl9ZILK2inEMZ.Pj3.391Mfzu"], ["created_at", "2018-12-19 13:37:13.253460"], ["updated_at", "2018-12-19 13:37:13.253460"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.7ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (3.1ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$UJ./Sh.5JIOPsgqsbaSHSeBcLF5AagpLoA8N592xXaWOGIWN4KGkC"], ["created_at", "2018-12-19 13:37:13.275620"], ["updated_at", "2018-12-19 13:37:13.275620"]]
  [1m[35m (0.8ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[35mUser Load (1.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (6.9ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (1.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.7ms)[0m  INSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-19 13:38:05', '2018-12-19 13:38:05', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-19 13:38:05', '2018-12-19 13:38:05', 298486374)[0m
  [1m[35mFixture Delete (3.5ms)[0m  DELETE FROM "users"
  [1m[36m (8.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$dELPFgkCAZK/o4ukYiyStuhO.ewtOOjcT.pgidJBgsdcA2Eauhwlm"], ["created_at", "2018-12-19 13:38:11.516753"], ["updated_at", "2018-12-19 13:38:11.516753"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$DTKVwLCPERy2bpqUYFbctOD.YjLmN7t86JCmkR1SQtotgRhOf3fZy"], ["created_at", "2018-12-19 13:38:11.588463"], ["updated_at", "2018-12-19 13:38:11.588463"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  begin transaction
  [1m[36mFixture Delete (5.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (2.3ms)[0m  INSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-19 13:39:07', '2018-12-19 13:39:07', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-19 13:39:07', '2018-12-19 13:39:07', 298486374)[0m
  [1m[35mFixture Delete (7.1ms)[0m  DELETE FROM "users"
  [1m[36m (4.4ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$YOo4IHprUTjhYsO0RuXUUeQ7SceXVxaoGivpvcqoOq0wieQRiBN7O"], ["created_at", "2018-12-19 13:39:10.853273"], ["updated_at", "2018-12-19 13:39:10.853273"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (4.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (1.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.4ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (1.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$waRIGBTuuPwshwvXgMTltuquovwte8txgrgbyXrJGuQWjHpY690.S"], ["created_at", "2018-12-19 13:39:11.117468"], ["updated_at", "2018-12-19 13:39:11.117468"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (1.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-19 21:39:11 +0800
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"name"=>"user", "email"=>"user@invalid", "password"=>"[FILTERED]"}}}
Completed 400 Bad Request in 31ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  begin transaction
  [1m[36mFixture Delete (4.6ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (2.3ms)[0m  INSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-19 13:44:21', '2018-12-19 13:44:21', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-19 13:44:21', '2018-12-19 13:44:21', 298486374)[0m
  [1m[35mFixture Delete (4.0ms)[0m  DELETE FROM "users"
  [1m[36m (3.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$NJIpogUvCKCobNGW80kGTOjqFmPS6weYVO1HRyRGJbE9.C/wv4bfC"], ["created_at", "2018-12-19 13:44:21.907454"], ["updated_at", "2018-12-19 13:44:21.907454"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (8.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$wGTEJ9BnOMiCyGjRMxe2LuZrI7nbxj8nrF1WlKT0TyUJC.RWrQgsO"], ["created_at", "2018-12-19 13:44:24.649482"], ["updated_at", "2018-12-19 13:44:24.649482"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-19 21:44:24 +0800
Processing by UsersController#create as HTML
  Parameters: {"user_params"=>{"user"=>{"name"=>"user", "email"=>"user@invalid", "sex"=>"male", "department_id"=>"1", "phonenumber"=>"1234", "status"=>"123", "password"=>"[FILTERED]"}}}
Completed 400 Bad Request in 27ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (1.6ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (2.7ms)[0m  INSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-19 13:44:47', '2018-12-19 13:44:47', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-19 13:44:47', '2018-12-19 13:44:47', 298486374)[0m
  [1m[35mFixture Delete (1.0ms)[0m  DELETE FROM "users"
  [1m[36m (1.4ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-19 21:44:47 +0800
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"name"=>"user", "email"=>"user@invalid", "sex"=>"male", "department_id"=>"1", "phonenumber"=>"1234", "status"=>"123", "password"=>"[FILTERED]"}}}
Completed 400 Bad Request in 43ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$Ykn5lUY6AxKwCH.LboMIGeM0ASytzgM2tZ1RYvE4KGgaxo5I1kiEW"], ["created_at", "2018-12-19 13:44:50.275003"], ["updated_at", "2018-12-19 13:44:50.275003"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (0.9ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (1.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$IQRAnBUgD2kwt0.bgStJweC6caIcULKNpat4YjboMWWtqtZdmMd.O"], ["created_at", "2018-12-19 13:44:50.389549"], ["updated_at", "2018-12-19 13:44:50.389549"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.5ms)[0m  begin transaction
  [1m[36mFixture Delete (4.1ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (1.9ms)[0m  INSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-19 13:58:56', '2018-12-19 13:58:56', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-19 13:58:56', '2018-12-19 13:58:56', 298486374)[0m
  [1m[35mFixture Delete (2.2ms)[0m  DELETE FROM "users"
  [1m[36m (6.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (5.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (9.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$YgmbcIGO7jgYIAX7LM7VneigQQOPgdmmb2KcTXIWPmnNHYBZRFtHS"], ["created_at", "2018-12-19 13:59:01.891993"], ["updated_at", "2018-12-19 13:59:01.891993"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (0.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$bGX5XxLkK66GgXS1GuXir.I50oEPEWv30cx/RHXngZ.ERVD9wec3O"], ["created_at", "2018-12-19 13:59:01.915654"], ["updated_at", "2018-12-19 13:59:01.915654"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (1.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (1.2ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (1.2ms)[0m  INSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-20 03:15:17', '2018-12-20 03:15:17', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-20 03:15:17', '2018-12-20 03:15:17', 298486374)[0m
  [1m[35mFixture Delete (1.4ms)[0m  DELETE FROM "users"
  [1m[36m (5.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-20 11:15:17 +0800
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"name"=>"user", "email"=>"user@invalid", "password"=>"[FILTERED]"}}}
Completed 400 Bad Request in 25ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$2Nk/iti5OAhImo4LcHrKE.XZFLnZqx3.q2hkTBxngdGddzvOtjYb2"], ["created_at", "2018-12-20 03:15:18.414807"], ["updated_at", "2018-12-20 03:15:18.414807"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (3.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.9ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$1eZGA8EaEFcqySYJ/EBs5eQkxIXc5GVgMDvWNeM36VgFTv19Bcnl."], ["created_at", "2018-12-20 03:15:19.896160"], ["updated_at", "2018-12-20 03:15:19.896160"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (3.9ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (4.2ms)[0m  begin transaction
  [1m[36mFixture Delete (4.2ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.8ms)[0m  INSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-20 03:25:47', '2018-12-20 03:25:47', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-20 03:25:47', '2018-12-20 03:25:47', 298486374)[0m
  [1m[35mFixture Delete (4.2ms)[0m  DELETE FROM "users"
  [1m[36m (9.4ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$I3BKfzmTzQOZ38B.wNNNdeUeBtWWcSSv7./.bnlBp3si3GRWciGK2"], ["created_at", "2018-12-20 03:25:47.674483"], ["updated_at", "2018-12-20 03:25:47.674483"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (0.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (3.0ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$IhCNWfBgQgbNnliyOPejx.H6hQ9qqMvtNlKVlqpAtGRlQp5hhrsZ."], ["created_at", "2018-12-20 03:25:49.725630"], ["updated_at", "2018-12-20 03:25:49.725630"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.9ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (1.6ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.8ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (6.4ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-20 11:25:50 +0800
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"name"=>"user", "email"=>"user@invalid", "password"=>"[FILTERED]"}}}
Completed 400 Bad Request in 57ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (3.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (1.1ms)[0m  INSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-20 03:40:12', '2018-12-20 03:40:12', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-20 03:40:12', '2018-12-20 03:40:12', 298486374)[0m
  [1m[35mFixture Delete (1.0ms)[0m  DELETE FROM "users"
  [1m[36m (1.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users/new" for 127.0.0.1 at 2018-12-20 11:40:12 +0800
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$YtO6kXjVdYgDWT.uuFxHEuGOpSqlLPu1Ndl.mAILCDk5m6SDpe3Pa"], ["created_at", "2018-12-20 03:40:14.196759"], ["updated_at", "2018-12-20 03:40:14.196759"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.8ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (1.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$a/puRconbYy7/0hGzJOnUOlRbMW8RHUeumxkzQsRwwjS4v9r0woh6"], ["created_at", "2018-12-20 03:40:14.343088"], ["updated_at", "2018-12-20 03:40:14.343088"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (15.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (2.9ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (1.1ms)[0m  INSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-20 03:40:27', '2018-12-20 03:40:27', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-20 03:40:27', '2018-12-20 03:40:27', 298486374)[0m
  [1m[35mFixture Delete (1.5ms)[0m  DELETE FROM "users"
  [1m[36m (4.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-20 11:40:27 +0800
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"name"=>"user", "email"=>"user@invalid", "password"=>"[FILTERED]"}}}
Completed 400 Bad Request in 33ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.9ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$sB4tw/ZHh8xptmCGJD7xXO50S3bzXNco1W/uvCTctOyXj/mLX0u2u"], ["created_at", "2018-12-20 03:40:28.858727"], ["updated_at", "2018-12-20 03:40:28.858727"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (4.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$Regq7EUMoCFJ7MwXEd60GODoAgmx0kKvLXtBiKhWk0wQ28BzB2rsa"], ["created_at", "2018-12-20 03:40:28.885841"], ["updated_at", "2018-12-20 03:40:28.885841"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (1.7ms)[0m  INSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-20 03:40:38', '2018-12-20 03:40:38', 980190962)
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-20 03:40:38', '2018-12-20 03:40:38', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "users"
  [1m[36m (3.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$UmVY/.FC.KMVkl0N8BrqSeYJ.M0nhogXe41XP.tQi7D6AFcfUyubC"], ["created_at", "2018-12-20 03:40:39.806633"], ["updated_at", "2018-12-20 03:40:39.806633"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$G4derTyZyjRpQ/TRKnaU5.PhuaeyP0vA9kHATSLoH26lHrqnkOmmO"], ["created_at", "2018-12-20 03:40:39.891911"], ["updated_at", "2018-12-20 03:40:39.891911"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (1.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (1.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-20 11:40:39 +0800
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"users"=>{"name"=>"user", "email"=>"user@invalid", "password"=>"[FILTERED]"}}}
Completed 400 Bad Request in 244ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.9ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-20 03:41:01', '2018-12-20 03:41:01', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-20 03:41:01', '2018-12-20 03:41:01', 298486374)[0m
  [1m[35mFixture Delete (1.1ms)[0m  DELETE FROM "users"
  [1m[36m (2.4ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-20 11:41:01 +0800
Processing by UsersController#create as HTML
  Parameters: {"param"=>{"user"=>{"name"=>"user", "email"=>"user@invalid", "password"=>"[FILTERED]"}}}
Completed 400 Bad Request in 26ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$COe7yBe7CIhEfJq6NRJuXuX/N6G62fQpq8oOweRIxvWa.1Xd0QHCa"], ["created_at", "2018-12-20 03:41:03.410377"], ["updated_at", "2018-12-20 03:41:03.410377"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (13.6ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$RR3qwgfiG/GwgiGVE4U2NOVt0BLkbJITw1h62AgeImV7BqHrv9AdC"], ["created_at", "2018-12-20 03:41:03.441343"], ["updated_at", "2018-12-20 03:41:03.441343"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (3.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-20 03:41:24', '2018-12-20 03:41:24', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-20 03:41:24', '2018-12-20 03:41:24', 298486374)[0m
  [1m[35mFixture Delete (3.1ms)[0m  DELETE FROM "users"
  [1m[36m (8.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$1/OerB9OK7fgALqgysz2RuNul/RL7P8AMHL7yTWgp1GSGu/c76vr."], ["created_at", "2018-12-20 03:41:24.811490"], ["updated_at", "2018-12-20 03:41:24.811490"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (1.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$kQswICkkonoOzDj7xtV5GeyIy5VW63S4TY1WCvxBibji434z7beay"], ["created_at", "2018-12-20 03:41:26.070642"], ["updated_at", "2018-12-20 03:41:26.070642"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (2.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (2.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.4ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (1.5ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-20 11:41:26 +0800
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"name"=>"user", "email"=>"user@invalid", "password"=>"[FILTERED]"}}}
Completed 400 Bad Request in 24ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (2.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (1.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.8ms)[0m  INSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-20 03:42:00', '2018-12-20 03:42:00', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-20 03:42:00', '2018-12-20 03:42:00', 298486374)[0m
  [1m[35mFixture Delete (1.2ms)[0m  DELETE FROM "users"
  [1m[36m (1.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-20 11:42:00 +0800
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"name"=>"user", "email"=>"user@invalid", "password"=>"[FILTERED]"}}}
Completed 400 Bad Request in 28ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$ga2PLpfOaMfR.gtsIhMjWuXlaLkhoKB4yuHiZPKBeDJF/kzhrnYv6"], ["created_at", "2018-12-20 03:42:00.842329"], ["updated_at", "2018-12-20 03:42:00.842329"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (1.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$uDCcaDVhr5ZPx7v0jM7EZ.tZKw5NxHUIq9/ssmLQjuxZ0EtI9.r2m"], ["created_at", "2018-12-20 03:42:02.272580"], ["updated_at", "2018-12-20 03:42:02.272580"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (2.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (5.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (1.7ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-20 03:42:57', '2018-12-20 03:42:57', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-20 03:42:57', '2018-12-20 03:42:57', 298486374)[0m
  [1m[35mFixture Delete (1.0ms)[0m  DELETE FROM "users"
  [1m[36m (1.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$i/U6MHGrYDWwik2G.wrmReDo3mMC0xwbKF43phYBowFgU0roY5X8a"], ["created_at", "2018-12-20 03:42:59.034388"], ["updated_at", "2018-12-20 03:42:59.034388"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$mZNBmx1GARHC.P5umI0Wz.pmOQ9SIicFVEMP4UTCMepQW/a5n0ssu"], ["created_at", "2018-12-20 03:42:59.067010"], ["updated_at", "2018-12-20 03:42:59.067010"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (2.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.6ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-20 11:42:59 +0800
Processing by UsersController#create as HTML
  Parameters: {"user_params"=>{"user"=>{"name"=>"user", "email"=>"user@invalid", "password"=>"[FILTERED]"}}}
Completed 400 Bad Request in 21ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.7ms)[0m  begin transaction
  [1m[36mFixture Delete (2.8ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.7ms)[0m  INSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-20 03:44:09', '2018-12-20 03:44:09', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-20 03:44:09', '2018-12-20 03:44:09', 298486374)[0m
  [1m[35mFixture Delete (1.0ms)[0m  DELETE FROM "users"
  [1m[36m (1.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (3.3ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$TP0QsHMK9XnfELdl3xA8S.mXxCxIEdxAZjLkeCxiYT8h1a.hcvuI6"], ["created_at", "2018-12-20 03:44:11.351630"], ["updated_at", "2018-12-20 03:44:11.351630"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (3.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.9ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$j4wLusheaqw4tVH1Bnpb3.FlZ6GNXzf/LN7rNKO/RPb.4VTkPd5WW"], ["created_at", "2018-12-20 03:44:11.390791"], ["updated_at", "2018-12-20 03:44:11.390791"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (1.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-20 11:44:11 +0800
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"name"=>"user", "email"=>"user@invalid", "password"=>"[FILTERED]"}}}
Completed 400 Bad Request in 39ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (4.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (2.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.7ms)[0m  INSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-20 03:56:08', '2018-12-20 03:56:08', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-20 03:56:08', '2018-12-20 03:56:08', 298486374)[0m
  [1m[35mFixture Delete (3.2ms)[0m  DELETE FROM "users"
  [1m[36m (4.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-20 11:56:08 +0800
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"name"=>"user", "email"=>"user@invalid", "password"=>"[FILTERED]"}}}
Completed 400 Bad Request in 27ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$bF2AM/HULF6SqI2VKFVJFebaVEn63lDIhLCdtZ2cezAJE6aDHgPYW"], ["created_at", "2018-12-20 03:56:09.913110"], ["updated_at", "2018-12-20 03:56:09.913110"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (1.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$LXQOnqVtNzl5USd1E8fPge8DMe1bAptHlQ7Dnch7kenwnbeBZdNEW"], ["created_at", "2018-12-20 03:56:09.960476"], ["updated_at", "2018-12-20 03:56:09.960476"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.4ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (1.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (1.0ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.7ms)[0m  INSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-20 03:58:15', '2018-12-20 03:58:15', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-20 03:58:15', '2018-12-20 03:58:15', 298486374)[0m
  [1m[35mFixture Delete (1.3ms)[0m  DELETE FROM "users"
  [1m[36m (17.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$J8zxABXOSuTK.zjRMpqFx.iaU1UFuKciZb9GAgM1qiPrA79kP3sEq"], ["created_at", "2018-12-20 03:58:15.803244"], ["updated_at", "2018-12-20 03:58:15.803244"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.5ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$R2v.EO55c8Xa4AtbITTiRuuwF8llCr0fLF4IDKUYSBpIwo6An0Oui"], ["created_at", "2018-12-20 03:58:17.518196"], ["updated_at", "2018-12-20 03:58:17.518196"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (1.5ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.6ms)[0m  begin transaction
  [1m[36mFixture Delete (1.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (2.0ms)[0m  INSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-20 03:58:48', '2018-12-20 03:58:48', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-20 03:58:48', '2018-12-20 03:58:48', 298486374)[0m
  [1m[35mFixture Delete (3.6ms)[0m  DELETE FROM "users"
  [1m[36m (12.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.9ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$O5i0Jp85DrvgL66WrLydVeR4chQGqcjXtmISLZPAN.ZWfYSjbqw6m"], ["created_at", "2018-12-20 03:58:50.224830"], ["updated_at", "2018-12-20 03:58:50.224830"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (1.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (2.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$oTnSy4yPWIiiUY0G27AlyuWEN.m1P3wrqI6DlH77l3w3oB/RG607y"], ["created_at", "2018-12-20 03:58:50.296040"], ["updated_at", "2018-12-20 03:58:50.296040"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (1.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (1.1ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (1.5ms)[0m  INSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-20 04:01:45', '2018-12-20 04:01:45', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-20 04:01:45', '2018-12-20 04:01:45', 298486374)[0m
  [1m[35mFixture Delete (3.1ms)[0m  DELETE FROM "users"
  [1m[36m (1.4ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.5ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$nOQgXzMGisDU6nzdd2NKM.CfqY3pq1NgtEPaZoN8EcZetH4lxj0ny"], ["created_at", "2018-12-20 04:01:47.574255"], ["updated_at", "2018-12-20 04:01:47.574255"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$.32tpy8ozbawGCMipZ.45.YNQAkMI07FBIRx1k.tsFA/Q/4sQHkdm"], ["created_at", "2018-12-20 04:01:47.632968"], ["updated_at", "2018-12-20 04:01:47.632968"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
Started GET "/users" for 127.0.0.1 at 2018-12-20 12:01:47 +0800
Processing by UsersController#index as HTML
Completed 500 Internal Server Error in 119ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.8ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-20 04:02:36', '2018-12-20 04:02:36', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-20 04:02:36', '2018-12-20 04:02:36', 298486374)[0m
  [1m[35mFixture Delete (1.0ms)[0m  DELETE FROM "users"
  [1m[36m (1.4ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$1JM7vop7W2XPKXdlFTcHNOduiqV4..YY8rZ1oaJZC4WTCWynEvgYe"], ["created_at", "2018-12-20 04:02:37.261111"], ["updated_at", "2018-12-20 04:02:37.261111"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$Ejyh3bVQpokEnapus7LSO.sl.n7RVaJCtMEj/QOYpDwbcJqfbHWGa"], ["created_at", "2018-12-20 04:02:37.296745"], ["updated_at", "2018-12-20 04:02:37.296745"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
Started GET "/users" for 127.0.0.1 at 2018-12-20 12:02:37 +0800
Processing by UsersController#index as HTML
Completed 500 Internal Server Error in 72ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (1.2ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (3.4ms)[0m  INSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-20 04:04:16', '2018-12-20 04:04:16', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-20 04:04:16', '2018-12-20 04:04:16', 298486374)[0m
  [1m[35mFixture Delete (1.9ms)[0m  DELETE FROM "users"
  [1m[36m (7.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$1xPcDqKKpsL1Uw64Pw56GO2RnultgtWxF2rFtmtJhfhjTN1uNrcmC"], ["created_at", "2018-12-20 04:04:18.145045"], ["updated_at", "2018-12-20 04:04:18.145045"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$V..2rWQehno1x4iI1dtkOu2RlouuNWlcjyHFaJi7lJK0gHvHnqR8m"], ["created_at", "2018-12-20 04:04:18.198019"], ["updated_at", "2018-12-20 04:04:18.198019"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (1.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (1.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (1.9ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.8ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-20 04:05:31', '2018-12-20 04:05:31', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-20 04:05:31', '2018-12-20 04:05:31', 298486374)[0m
  [1m[35mFixture Delete (0.9ms)[0m  DELETE FROM "users"
  [1m[36m (2.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (1.7ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.7ms)[0m  INSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-20 04:05:53', '2018-12-20 04:05:53', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-20 04:05:53', '2018-12-20 04:05:53', 298486374)[0m
  [1m[35mFixture Delete (1.2ms)[0m  DELETE FROM "users"
  [1m[36m (1.4ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$AucR4DIy5t9FjtvaX6Eq/Oh2xxr0bmS6Kq5nmDgh/P5ef4RbiZ3sm"], ["created_at", "2018-12-20 04:05:54.766443"], ["updated_at", "2018-12-20 04:05:54.766443"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$17Dbjm2XL/97uBiZAhXOMOkzoLbnBmdLV7IbK9uNEBdpffdiCfBSy"], ["created_at", "2018-12-20 04:05:54.781141"], ["updated_at", "2018-12-20 04:05:54.781141"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
Started GET "/users/index" for 127.0.0.1 at 2018-12-20 12:05:54 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"index"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 0]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 26ms (ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-20 12:05:55 +0800
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"name"=>"user", "email"=>"user@invalid", "password"=>"[FILTERED]"}}}
Completed 400 Bad Request in 5ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  begin transaction
  [1m[36mFixture Delete (1.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (1.6ms)[0m  INSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-20 04:06:47', '2018-12-20 04:06:47', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-20 04:06:47', '2018-12-20 04:06:47', 298486374)[0m
  [1m[35mFixture Delete (1.7ms)[0m  DELETE FROM "users"
  [1m[36m (2.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$uLP5v9yLeKwwR1W0WBd4g.yQUq6t5JSC58CcMGXw1OGZ8cQlFfOwW"], ["created_at", "2018-12-20 04:06:47.895880"], ["updated_at", "2018-12-20 04:06:47.895880"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.9ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.5ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$00pCSchm0AMVpDzKeqGQ7OOIi9P5MIwmjbybxgVuep4Xt0N4oF7qq"], ["created_at", "2018-12-20 04:06:49.368813"], ["updated_at", "2018-12-20 04:06:49.368813"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (1.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
Started GET "/users/index" for 127.0.0.1 at 2018-12-20 12:06:49 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"index"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 0]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 94ms (ActiveRecord: 0.5ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users/index" for 127.0.0.1 at 2018-12-20 12:06:50 +0800
  [1m[36m (2.8ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (1.1ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.9ms)[0m  INSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-20 04:07:08', '2018-12-20 04:07:08', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-20 04:07:08', '2018-12-20 04:07:08', 298486374)[0m
  [1m[35mFixture Delete (1.4ms)[0m  DELETE FROM "users"
  [1m[36m (1.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
Started GET "/users/index" for 127.0.0.1 at 2018-12-20 12:07:08 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"index"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 0]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 41ms (ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-20 12:07:09 +0800
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"name"=>"user", "email"=>"user@invalid", "password"=>"[FILTERED]"}}}
Completed 400 Bad Request in 5ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$C/MJETnnOFja9o7V8tfHHOKfkAQ1VasF/b7y6Q7Ov50W8l0PYCmdG"], ["created_at", "2018-12-20 04:07:10.137293"], ["updated_at", "2018-12-20 04:07:10.137293"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (1.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$FvWxi4P7W1B5MLK8ld09heb5x8BJ0VU0e0tIUIkLvVK43AhetNHIm"], ["created_at", "2018-12-20 04:07:10.241524"], ["updated_at", "2018-12-20 04:07:10.241524"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (3.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  begin transaction
  [1m[36mFixture Delete (1.0ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (3.5ms)[0m  INSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-20 04:09:53', '2018-12-20 04:09:53', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-20 04:09:53', '2018-12-20 04:09:53', 298486374)[0m
  [1m[35mFixture Delete (3.1ms)[0m  DELETE FROM "users"
  [1m[36m (5.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (1.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$9Suc45zItvFNm0YNmiOrgesp48RXWHTN.D.GhBTsXH9uxP8Cg7WGm"], ["created_at", "2018-12-20 04:09:55.294269"], ["updated_at", "2018-12-20 04:09:55.294269"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (1.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$Urjl2CCMKGycGxBUu9pT/etR6WlZZ6UnMyMD2vKytScG9yOBVPYHa"], ["created_at", "2018-12-20 04:09:55.319592"], ["updated_at", "2018-12-20 04:09:55.319592"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (3.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.4ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (12.4ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (1.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started GET "/users" for 127.0.0.1 at 2018-12-20 12:09:55 +0800
Processing by UsersController#index as HTML
Completed 500 Internal Server Error in 131ms (ActiveRecord: 0.0ms)
  [1m[36m (1.4ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (3.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (1.0ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (1.2ms)[0m  INSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-20 04:11:47', '2018-12-20 04:11:47', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-20 04:11:47', '2018-12-20 04:11:47', 298486374)[0m
  [1m[35mFixture Delete (1.3ms)[0m  DELETE FROM "users"
  [1m[36m (2.4ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.4ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-20 12:11:47 +0800
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"session"=>{"email"=>"", "password"=>"[FILTERED]"}}}
Completed 400 Bad Request in 22ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$eejAtEJIHXpKJ1dgsp98y.kZA55.iFyeFH5AgGBtrevmraNCkc5Sy"], ["created_at", "2018-12-20 04:11:49.156617"], ["updated_at", "2018-12-20 04:11:49.156617"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (1.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$G3Sg3cKeN4IfGpN.uiEPyu.dhIOn451gz89un2aEtyqOmqzMwO9XG"], ["created_at", "2018-12-20 04:11:49.241927"], ["updated_at", "2018-12-20 04:11:49.241927"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (1.5ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.8ms)[0m  INSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-20 04:13:00', '2018-12-20 04:13:00', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-20 04:13:00', '2018-12-20 04:13:00', 298486374)[0m
  [1m[35mFixture Delete (1.1ms)[0m  DELETE FROM "users"
  [1m[36m (2.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$5xKhbr7yr.0iXztPsLn9wuY/jywFn6i9EhFGjQvB652vXUp.n5Qxu"], ["created_at", "2018-12-20 04:13:02.338898"], ["updated_at", "2018-12-20 04:13:02.338898"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (2.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (5.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$DGFgyBlLJQwOVld8ToLrZeH68SapCl6gKUNYzAOJg0uSffsxSD6um"], ["created_at", "2018-12-20 04:13:02.373495"], ["updated_at", "2018-12-20 04:13:02.373495"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (1.1ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.7ms)[0m  INSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-20 04:13:18', '2018-12-20 04:13:18', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("name", "description", "admin_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, '2018-12-20 04:13:18', '2018-12-20 04:13:18', 298486374)[0m
  [1m[35mFixture Delete (2.1ms)[0m  DELETE FROM "users"
  [1m[36m (5.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$gl4RwfZcEOOuT5HRtjsjTOa6Uv8fOMekNNgA3.FLA79JFt3WvFs7m"], ["created_at", "2018-12-20 04:13:20.236042"], ["updated_at", "2018-12-20 04:13:20.236042"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$1DEXnzNhfiXyfPXgV83wuO1vO2SdfKUWpQacv4dRmlVUlGE6VFeQO"], ["created_at", "2018-12-20 04:13:20.281496"], ["updated_at", "2018-12-20 04:13:20.281496"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (2.2ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.4ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.6ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (2.9ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$r1HQWYOlBwNvaAT3ZoO/U.H3pySmH8t3awr4ucCxqM2IVOIppKdAS"], ["created_at", "2018-12-20 04:19:01.256614"], ["updated_at", "2018-12-20 04:19:01.256614"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (1.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (3.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$ZiwtKkf.pRhEx8OGVXV7SuDAFDON1TYh.bCWy6TnGWvKVX7ETuHpe"], ["created_at", "2018-12-20 04:19:04.659268"], ["updated_at", "2018-12-20 04:19:04.659268"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (3.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (6.6ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (1.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-20 12:19:05 +0800
Processing by SessionsController#create as HTML
  Parameters: {"params"=>{"session"=>{"email"=>"", "password"=>"[FILTERED]"}}}
Completed 500 Internal Server Error in 40ms (ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (4.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (3.0ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$O5x1mcdR79gegj3dvghfRO7wL4LnhdHYKlZ9hn5LEhRatEnQgHAnG"], ["created_at", "2018-12-20 04:19:58.586446"], ["updated_at", "2018-12-20 04:19:58.586446"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (6.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$eXkz803RivTKZRx.BApOV.tyqxIQjVMxsbHWMAFfI9qi8S0rhvN9W"], ["created_at", "2018-12-20 04:19:58.727241"], ["updated_at", "2018-12-20 04:19:58.727241"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (2.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (3.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$AM7sxWU6moBtFtDl.kg1yeCBCtPH4ws8K8lUz4P/MgEIHjmwg1kE."], ["created_at", "2018-12-20 04:21:24.027198"], ["updated_at", "2018-12-20 04:21:24.027198"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$4IEKiMIqJ.ZVf4KvMYIBj.HrIU6UMTobAmSA4GQ85CAbaX0MEKUP2"], ["created_at", "2018-12-20 04:21:24.081365"], ["updated_at", "2018-12-20 04:21:24.081365"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-20 12:21:24 +0800
Processing by SessionsController#create as HTML
  Parameters: {"params"=>{"session"=>{"email"=>"", "password"=>"[FILTERED]"}}}
Completed 500 Internal Server Error in 21ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (9.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$srpOxnMlAnEIO8NERd2jveHa4ru..6MZdbf0IoUpefuDDX90iUKRi"], ["created_at", "2018-12-20 04:26:22.403780"], ["updated_at", "2018-12-20 04:26:22.403780"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (1.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (4.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$cKRlfmEpB.2F/WAc3RI0NuKpLNGUU83C8s/fOC/htVmtW6kkPSTAK"], ["created_at", "2018-12-20 04:26:23.835601"], ["updated_at", "2018-12-20 04:26:23.835601"]]
  [1m[36m (0.7ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (8.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (3.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$QsE68tUTay9Cxy/yQyiH9eDPirVVnIcv6KA.KhzMyBs1W0u6f60Oq"], ["created_at", "2018-12-20 04:26:55.378827"], ["updated_at", "2018-12-20 04:26:55.378827"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$CozdiJlIu4y8P9n/XgGSCui00mzLORs1BLuDAr8p0peOH7CY99RKC"], ["created_at", "2018-12-20 04:26:55.410370"], ["updated_at", "2018-12-20 04:26:55.410370"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (1.5ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-20 12:26:55 +0800
Processing by SessionsController#create as HTML
  Parameters: {"params"=>{"session"=>{"email"=>"@user.email", "password"=>"[FILTERED]"}}}
Completed 500 Internal Server Error in 24ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.7ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.9ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (15.2ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$zt6P2B82axyZ5I341cZG.e2FieED5b1rMpXI3/o8g9ajARJdgG6Vi"], ["created_at", "2018-12-20 07:40:50.612831"], ["updated_at", "2018-12-20 07:40:50.612831"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (20.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (2.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$uMOHDEOu.xsKJqr5Qc5/weerKbjYl/j4WMXNllsqEB.4bk7/FMfX6"], ["created_at", "2018-12-20 07:40:50.753841"], ["updated_at", "2018-12-20 07:40:50.753841"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (5.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (12.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-20 15:40:50 +0800
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}}
Completed 400 Bad Request in 56ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-20 15:40:51 +0800
Processing by SessionsController#create as HTML
  Parameters: {"params"=>{"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}}
Completed 500 Internal Server Error in 7ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (2.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-20 15:42:05 +0800
Processing by SessionsController#create as HTML
  Parameters: {"params"=>{"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}}
Completed 500 Internal Server Error in 108ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (1.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (5.2ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$HkarrbCi0mQA7jQVXtNHFurcEfNcNIxoxCs.1qUuZuRqnwm3WYnHO"], ["created_at", "2018-12-20 07:42:07.793542"], ["updated_at", "2018-12-20 07:42:07.793542"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (3.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (3.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$jC6XAoaOv55C19nrPF.uS.zDr8xSWkOWQvtHTutVDeI9jYseYAwAu"], ["created_at", "2018-12-20 07:42:07.844963"], ["updated_at", "2018-12-20 07:42:07.844963"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-20 15:42:08 +0800
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"params"=>{"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}}}
Completed 400 Bad Request in 2ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (1.3ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (3.9ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$/S2r4hsUMCYsNpw4XI83t.VpUkhPTR06nlTHWI2qdlNmBuGtL7I3G"], ["created_at", "2018-12-20 07:43:31.868054"], ["updated_at", "2018-12-20 07:43:31.868054"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$pCXgZ6GwYvLLzEmib8D/re2UhSl59mZPspL9HmC6eVUzo0cj7Sc92"], ["created_at", "2018-12-20 07:43:31.899078"], ["updated_at", "2018-12-20 07:43:31.899078"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-20 15:43:31 +0800
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"params"=>{"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}}}
Completed 400 Bad Request in 32ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$xc.M3P9nx3cfLyspmfZXeOzfr.6XZOPiWwHjgpJTLM0kQh6iQ0uuC"], ["created_at", "2018-12-20 07:45:08.150065"], ["updated_at", "2018-12-20 07:45:08.150065"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$DbCAj6OJ8KduCG8LCNgga.CwhuX/JO.RgPW9pU5qsRPsWUF7zib5a"], ["created_at", "2018-12-20 07:45:08.240745"], ["updated_at", "2018-12-20 07:45:08.240745"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (1.7ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-20 15:45:08 +0800
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"params"=>{"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}}}
Completed 400 Bad Request in 24ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (1.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (18.3ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (2.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-20 15:50:34 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 1841ms (ActiveRecord: 1.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (4.6ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (1.6ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (1.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (4.8ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (122.1ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$NXH6QQG7hfzYDbaVWNc88.YE1RYOqLmEMTNzmIQHq4Jr/57AbZNDm"], ["created_at", "2018-12-20 07:50:36.706290"], ["updated_at", "2018-12-20 07:50:36.706290"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (2.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$e7A8QzqAeOmhiSWb3Stf4.ejzi47iifkLD5hclTRfWGypyXuxoG1S"], ["created_at", "2018-12-20 07:50:37.026817"], ["updated_at", "2018-12-20 07:50:37.026817"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (5.0ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (2.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-20 15:51:40 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 1747ms (ActiveRecord: 1.0ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (11.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$3UhHC4Qdk2RwXIAJ9iUfLOs.l7TYOudiXGNekAQsAPpJI8UtrOAzi"], ["created_at", "2018-12-20 07:51:42.300192"], ["updated_at", "2018-12-20 07:51:42.300192"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$GZi7lO0GeHpWngA5GG5meOJ6srBz8oPmr5Miz4LW1OgaStDYzZaYi"], ["created_at", "2018-12-20 07:51:42.342469"], ["updated_at", "2018-12-20 07:51:42.342469"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.9ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (3.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (1.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (6.8ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$CBvH6iHbu5Rpf/ZtUaF82u7HkaCQ6zItnILsmEGYDzCMlFtqB0oVS"], ["created_at", "2018-12-20 07:52:08.935176"], ["updated_at", "2018-12-20 07:52:08.935176"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$8kxy/om21vr8qiLdjRoDLO7lqHxH4w.JdljbCbMv/HtLckhAxGlTi"], ["created_at", "2018-12-20 07:52:08.985963"], ["updated_at", "2018-12-20 07:52:08.985963"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (1.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-20 15:52:09 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 33ms (ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (3.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-20 15:53:42 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 1057ms (ActiveRecord: 1.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (6.2ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$Wnuc/QxZqF.MlFaGKPlVju8dZGSck7Qwin0j1hc5adGmYWC52GA2S"], ["created_at", "2018-12-20 07:53:43.532388"], ["updated_at", "2018-12-20 07:53:43.532388"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.4ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (1.9ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$47COHziWkRFgRTioLNa4xOr0e1JisioO6Yfa7TtqlnTL9RX5lDVRa"], ["created_at", "2018-12-20 07:53:43.712011"], ["updated_at", "2018-12-20 07:53:43.712011"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.7ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-20 15:55:57 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 1103ms (ActiveRecord: 0.9ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-20 15:55:58 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 8ms (ActiveRecord: 0.3ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 15:55:58 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (328.0ms)
  Rendered homes/home.html.erb within layouts/application (351.4ms)
  Rendered layouts/_login_panel.html.erb (8.7ms)
  Rendered layouts/_header.html.erb (16.7ms)
  Rendered layouts/_content.html.erb (1.1ms)
Completed 200 OK in 448ms (Views: 446.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (4.1ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$dmNysXD22I/yr0OZZycIbuGn9MDPGXb1rZC4NUrEP2Hros9Z3DfKG"], ["created_at", "2018-12-20 07:55:59.259981"], ["updated_at", "2018-12-20 07:55:59.259981"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (9.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$BipbO13gPIsIiTFO.ZVeKehZXWt1sDzKL2qOr76JO2datlNKTanwm"], ["created_at", "2018-12-20 07:55:59.348342"], ["updated_at", "2018-12-20 07:55:59.348342"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (1.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-20 15:56:57 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (1.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 1279ms (ActiveRecord: 1.9ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-20 15:56:58 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 13ms (ActiveRecord: 0.5ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 15:56:58 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (22.8ms)
  Rendered homes/home.html.erb within layouts/application (76.1ms)
  Rendered layouts/_login_panel.html.erb (9.7ms)
  Rendered layouts/_header.html.erb (14.2ms)
  Rendered layouts/_content.html.erb (1.2ms)
Completed 200 OK in 173ms (Views: 170.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (6.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$Rq1q96ECGIc6klMXyxBCneDO6qLTT3oIJ2mLIqBhXnGmjWc7h3Ium"], ["created_at", "2018-12-20 07:56:58.763364"], ["updated_at", "2018-12-20 07:56:58.763364"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (1.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (14.7ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$sJcOyBuHGaRTLA5tq2fjAeGIwWCEKSa/a/Qewf2Tt56NZwAk7o15."], ["created_at", "2018-12-20 07:56:59.035839"], ["updated_at", "2018-12-20 07:56:59.035839"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (1.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-20 15:56:59 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 25ms (ActiveRecord: 0.4ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 15:56:59 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (3.2ms)
  Rendered homes/home.html.erb within layouts/application (3.8ms)
  Rendered layouts/_login_panel.html.erb (2.8ms)
  Rendered layouts/_header.html.erb (3.6ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 13ms (Views: 11.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-20 15:57:28 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 1204ms (ActiveRecord: 3.8ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-20 15:57:29 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 15ms (ActiveRecord: 0.7ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 15:57:29 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (17.6ms)
  Rendered homes/home.html.erb within layouts/application (50.6ms)
  Rendered layouts/_login_panel.html.erb (7.7ms)
  Rendered layouts/_header.html.erb (15.9ms)
  Rendered layouts/_content.html.erb (1.2ms)
Completed 200 OK in 142ms (Views: 140.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.6ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (1.8ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (1.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (2.1ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$BltkKnQ9D4E2gZGYFBISKOETGEiGbyr1ih9Pa/mGt5aNbafyUGGxi"], ["created_at", "2018-12-20 07:57:30.170077"], ["updated_at", "2018-12-20 07:57:30.170077"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (0.9ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$kx9cGnIkzgKqHhlv5e2dd.MwJddgun1qvjqATwDojMFhbbGjicEfK"], ["created_at", "2018-12-20 07:57:30.309166"], ["updated_at", "2018-12-20 07:57:30.309166"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (2.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-20 15:57:30 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 11ms (ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.6ms)[0m  begin transaction
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-20 15:58:12 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 1944ms (ActiveRecord: 1.7ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 15:58:15 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (66.1ms)
  Rendered homes/home.html.erb within layouts/application (109.8ms)
  Rendered layouts/_login_panel.html.erb (18.0ms)
  Rendered layouts/_header.html.erb (28.6ms)
  Rendered layouts/_content.html.erb (1.9ms)
Completed 200 OK in 232ms (Views: 230.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-20 15:58:15 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 27ms (ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (2.3ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-20 15:58:15 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 96ms (ActiveRecord: 0.5ms)
  [1m[35m (8.7ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (2.1ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$g02qpW/HQU4dstkesC2Axu.0guhRGGvuo20pFkHtzkpwVwb8JfdcC"], ["created_at", "2018-12-20 07:58:15.722191"], ["updated_at", "2018-12-20 07:58:15.722191"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$1m.MpA6qq1hTyqd3ydxdC.H2pRQserca9NB1HvpkfKljL5skpPCqO"], ["created_at", "2018-12-20 07:58:15.834459"], ["updated_at", "2018-12-20 07:58:15.834459"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-20 16:01:42 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$xsYg74jG5M6RmyI/fmWRT.dU1aEvgF8gmERvLN/Y.GLPHcIxK1QT6"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-20 08:01:42.825746"], ["updated_at", "2018-12-20 08:01:42.825746"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 148ms (ActiveRecord: 2.7ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started GET "/" for 127.0.0.1 at 2018-12-20 16:01:42 +0800
Processing by HomesController#home as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered homes/home.html.erb within layouts/application (21.1ms)
  Rendered layouts/_login_panel.html.erb (19.0ms)
  Rendered layouts/_header.html.erb (26.4ms)
  Rendered layouts/_content.html.erb (1.3ms)
Completed 200 OK in 110ms (Views: 108.4ms | ActiveRecord: 0.3ms)
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-20 16:01:42 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 943ms (ActiveRecord: 0.4ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 16:01:43 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (4.1ms)
  Rendered homes/home.html.erb within layouts/application (15.6ms)
  Rendered layouts/_login_panel.html.erb (1.6ms)
  Rendered layouts/_header.html.erb (2.6ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 21ms (Views: 20.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-20 16:01:43 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (1.7ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 15ms (ActiveRecord: 2.0ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$dcWgs11xmVgbmqaAyqYimeFtQi.z7aaWqa3Ug9PL4E0D4qfbzLlzm"], ["created_at", "2018-12-20 08:01:44.026185"], ["updated_at", "2018-12-20 08:01:44.026185"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (3.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$KrkTuzGYC3tDEB1CEVC8guttoM7Eju8iVnkOaWwvHCD9URY/mNK6e"], ["created_at", "2018-12-20 08:01:44.084484"], ["updated_at", "2018-12-20 08:01:44.084484"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-20 16:01:44 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 2ms (ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (1.9ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$80l/bFU6MawXD6wlNy7weO75Epsk93fs/jWGq66Eu2rmEgcgXEcVm"], ["created_at", "2018-12-20 08:03:52.583016"], ["updated_at", "2018-12-20 08:03:52.583016"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$pyfnagBq6FoPaEyl6fNoYu4GZJfQC/VjACNpDMGqldjXERa3OwRvS"], ["created_at", "2018-12-20 08:03:53.530319"], ["updated_at", "2018-12-20 08:03:53.530319"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.5ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-20 16:03:53 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 39ms (ActiveRecord: 0.7ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-20 16:03:53 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$SmfGLn8usFgYRmvTC3Vpr.qEsu9nx.175SUy8uDLTDe6NWu1e.DY6"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-20 08:03:53.811660"], ["updated_at", "2018-12-20 08:03:53.811660"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 10ms (ActiveRecord: 1.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started GET "/" for 127.0.0.1 at 2018-12-20 16:03:53 +0800
Processing by HomesController#home as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered homes/home.html.erb within layouts/application (11.2ms)
  Rendered layouts/_login_panel.html.erb (16.9ms)
  Rendered layouts/_header.html.erb (22.4ms)
  Rendered layouts/_content.html.erb (1.1ms)
Completed 200 OK in 104ms (Views: 103.0ms | ActiveRecord: 0.1ms)
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-20 16:03:53 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 9ms (ActiveRecord: 0.4ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 16:03:53 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (4.3ms)
  Rendered homes/home.html.erb within layouts/application (14.1ms)
  Rendered layouts/_login_panel.html.erb (1.3ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 18ms (Views: 17.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-20 16:03:53 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 3ms (ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-20 17:56:06 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 202ms (ActiveRecord: 1.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (123.0ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$9nLKUs11WMHh61ZQCT7e.uvrgCPHCvhilaGgbuXqw0EaBlfKqsfAi"], ["created_at", "2018-12-20 09:56:08.598962"], ["updated_at", "2018-12-20 09:56:08.598962"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$F.nkC0fsGIFYUOETz/KT9uZMvfjpkjE8RaEQxNkOa9d25FU2pCZ1u"], ["created_at", "2018-12-20 09:56:08.737097"], ["updated_at", "2018-12-20 09:56:08.737097"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-20 17:56:08 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 11ms (ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-20 17:56:08 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 10ms (ActiveRecord: 0.4ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 17:56:08 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (17.2ms)
  Rendered homes/home.html.erb within layouts/application (45.5ms)
  Rendered layouts/_login_panel.html.erb (8.2ms)
  Rendered layouts/_header.html.erb (13.7ms)
  Rendered layouts/_content.html.erb (1.3ms)
Completed 200 OK in 132ms (Views: 129.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-20 17:56:08 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$8DMxEL5O.1zT2P/dpVdVtO8UGdfLFveH8BzK7t9D54.dmtS.JklwC"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-20 09:56:08.973588"], ["updated_at", "2018-12-20 09:56:08.973588"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 12ms (ActiveRecord: 1.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started GET "/" for 127.0.0.1 at 2018-12-20 17:56:08 +0800
Processing by HomesController#home as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered homes/home.html.erb within layouts/application (1.0ms)
  Rendered layouts/_login_panel.html.erb (2.1ms)
  Rendered layouts/_header.html.erb (4.5ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 9ms (Views: 7.9ms | ActiveRecord: 0.1ms)
  [1m[36m (5.2ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (3.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.5ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (3.8ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (4.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$qhZO4owSKSGOECXnRa1cDecJCFY.2xuirC7xezLCTKcH77rgPCcym"], ["created_at", "2018-12-20 10:09:08.661452"], ["updated_at", "2018-12-20 10:09:08.661452"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$U.XvpJkRuJNTcGmxnkcp4uJj.59meSZrAjkISwHxg5Fi6E725oH4W"], ["created_at", "2018-12-20 10:09:08.741180"], ["updated_at", "2018-12-20 10:09:08.741180"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-20 18:09:08 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 37ms (ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-20 18:09:09 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 15ms (ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-20 18:09:09 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 10ms (ActiveRecord: 0.4ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 18:09:09 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (382.1ms)
  Rendered homes/home.html.erb within layouts/application (416.8ms)
  Rendered layouts/_login_panel.html.erb (16.6ms)
  Rendered layouts/_header.html.erb (23.0ms)
  Rendered layouts/_content.html.erb (1.4ms)
Completed 200 OK in 527ms (Views: 525.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-20 18:09:09 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$mafZE65Ffbl0jQek4Vx8t.Bok.OjVZkqq17OVJV4FgOk4ySsPB4RS"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-20 10:09:09.776721"], ["updated_at", "2018-12-20 10:09:09.776721"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 12ms (ActiveRecord: 1.4ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started GET "/" for 127.0.0.1 at 2018-12-20 18:09:09 +0800
Processing by HomesController#home as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered homes/home.html.erb within layouts/application (1.5ms)
  Rendered layouts/_login_panel.html.erb (1.2ms)
  Rendered layouts/_header.html.erb (2.4ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 6ms (Views: 5.6ms | ActiveRecord: 0.2ms)
  [1m[36m (1.2ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (1.7ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-20 18:14:33 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 1455ms (ActiveRecord: 1.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-20 18:14:34 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 11ms (ActiveRecord: 0.5ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 18:14:34 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (16.6ms)
  Rendered homes/home.html.erb within layouts/application (39.9ms)
  Rendered layouts/_login_panel.html.erb (8.5ms)
  Rendered layouts/_header.html.erb (14.4ms)
  Rendered layouts/_content.html.erb (2.9ms)
Completed 200 OK in 115ms (Views: 113.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-20 18:14:34 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (4.4ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$Ho5pQ5EEycerNAcXE4lTV.LD3TCd0oOGxep/e53P7Gow9TAHLSCk."], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-20 10:14:34.895058"], ["updated_at", "2018-12-20 10:14:34.895058"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 15ms (ActiveRecord: 4.7ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started GET "/" for 127.0.0.1 at 2018-12-20 18:14:34 +0800
Processing by HomesController#home as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered homes/home.html.erb within layouts/application (17.8ms)
  Rendered layouts/_login_panel.html.erb (1.8ms)
  Rendered layouts/_header.html.erb (3.4ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 24ms (Views: 23.0ms | ActiveRecord: 0.2ms)
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-20 18:14:34 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 2ms (ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.6ms)[0m  begin transaction
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-20 18:14:34 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 18:14:34 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.0ms)
  Rendered homes/home.html.erb within layouts/application (1.4ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (2.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$queL1o34/QyxKAeLvgOGo.BXa.lfz.dEywrk.JLxV0he0MeGlLytu"], ["created_at", "2018-12-20 10:14:35.126198"], ["updated_at", "2018-12-20 10:14:35.126198"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$YVyaWku.3aWhzcUl.0alteoH8kE4SptEzMuR5KT.c08CP9cPUR7om"], ["created_at", "2018-12-20 10:14:35.150896"], ["updated_at", "2018-12-20 10:14:35.150896"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.2ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (1.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (9.0ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (1.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (2.6ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$2MHJkT5BQictr0Y069ko.elnNRr/b9.B/xVPJq6eYMu2txdUxOAiO"], ["created_at", "2018-12-20 10:28:09.149781"], ["updated_at", "2018-12-20 10:28:09.149781"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.6ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (1.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$wSiSyql7TxPUjwUdCPzq4OLiiTiOH4YAB7K1sV5GwsugZUkevErN6"], ["created_at", "2018-12-20 10:28:09.235638"], ["updated_at", "2018-12-20 10:28:09.235638"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-20 18:28:09 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 47ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 18:28:09 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (30.4ms)
  Rendered homes/home.html.erb within layouts/application (60.5ms)
  Rendered layouts/_login_panel.html.erb (20.8ms)
  Rendered layouts/_header.html.erb (27.9ms)
  Rendered layouts/_content.html.erb (1.4ms)
Completed 200 OK in 149ms (Views: 145.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-20 18:28:09 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 14ms (ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-20 18:28:09 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$kxvAuiXnw7k90e5eEowFc.Nq4jXRHk2F5K3I2kuJeBgrzL20/6Rlm"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-20 10:28:09.869312"], ["updated_at", "2018-12-20 10:28:09.869312"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 13ms (ActiveRecord: 0.8ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started GET "/" for 127.0.0.1 at 2018-12-20 18:28:09 +0800
Processing by HomesController#home as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered homes/home.html.erb within layouts/application (6.2ms)
  Rendered layouts/_login_panel.html.erb (1.2ms)
  Rendered layouts/_header.html.erb (2.6ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 12ms (Views: 10.8ms | ActiveRecord: 0.1ms)
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-20 18:28:09 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 11ms (ActiveRecord: 0.5ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 18:28:09 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.7ms)
  Rendered homes/home.html.erb within layouts/application (2.1ms)
  Rendered layouts/_login_panel.html.erb (1.6ms)
  Rendered layouts/_header.html.erb (2.3ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 7ms (Views: 6.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-20 18:28:09 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 2ms (ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-20 18:29:45 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 332ms (ActiveRecord: 1.4ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-20 18:29:46 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 10ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 18:29:46 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (45.2ms)
  Rendered homes/home.html.erb within layouts/application (65.4ms)
  Rendered layouts/_login_panel.html.erb (15.5ms)
  Rendered layouts/_header.html.erb (39.1ms)
  Rendered layouts/_content.html.erb (4.3ms)
Completed 200 OK in 198ms (Views: 193.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-20 18:29:46 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 8ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 18:29:46 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (8.1ms)
  Rendered homes/home.html.erb within layouts/application (9.4ms)
  Rendered layouts/_login_panel.html.erb (1.4ms)
  Rendered layouts/_header.html.erb (2.9ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 19ms (Views: 15.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (3.7ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$YzpmpGo0i.CSEfrWfSHG/u8tiVSgxQ8a4WzwRRr7sUkXzEkHsIvYG"], ["created_at", "2018-12-20 10:29:47.961035"], ["updated_at", "2018-12-20 10:29:47.961035"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$SHUXZz2Amfd.ppYXpkVs/ukMVGkJzaVpmJiUj/lSCmHoPbLR9.qXG"], ["created_at", "2018-12-20 10:29:48.040472"], ["updated_at", "2018-12-20 10:29:48.040472"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-20 18:29:48 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 19ms (ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-20 18:29:48 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 10ms (ActiveRecord: 0.5ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 18:29:48 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.6ms)
  Rendered homes/home.html.erb within layouts/application (2.3ms)
  Rendered layouts/_login_panel.html.erb (1.3ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 7ms (Views: 6.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-20 18:29:48 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$kSXP22WCzC6Sx1HMyWr1FOVBou0doJXq4XNpyrBnKuHt5qdmKGoia"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-20 10:29:48.184057"], ["updated_at", "2018-12-20 10:29:48.184057"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 11ms (ActiveRecord: 0.8ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started GET "/" for 127.0.0.1 at 2018-12-20 18:29:48 +0800
Processing by HomesController#home as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered homes/home.html.erb within layouts/application (1.8ms)
  Rendered layouts/_login_panel.html.erb (1.4ms)
  Rendered layouts/_header.html.erb (3.5ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 9ms (Views: 7.9ms | ActiveRecord: 0.2ms)
  [1m[36m (1.4ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (1.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-20 18:32:12 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 1433ms (ActiveRecord: 2.9ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-20 18:32:14 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (2.1ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$c/9PTOv3TPmb2DOclMeVausk8VNLWx1uvUIzAOCJ7.pgJ2PIcJ3lO"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-20 10:32:14.291194"], ["updated_at", "2018-12-20 10:32:14.291194"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 20ms (ActiveRecord: 2.7ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started GET "/" for 127.0.0.1 at 2018-12-20 18:32:14 +0800
Processing by HomesController#home as HTML
  [1m[35mUser Load (3.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered homes/home.html.erb within layouts/application (35.2ms)
  Rendered layouts/_login_panel.html.erb (37.9ms)
  Rendered layouts/_header.html.erb (45.4ms)
  Rendered layouts/_content.html.erb (1.4ms)
Completed 200 OK in 183ms (Views: 178.0ms | ActiveRecord: 3.5ms)
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-20 18:32:14 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 11ms (ActiveRecord: 0.5ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 18:32:14 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.8ms)
  Rendered homes/home.html.erb within layouts/application (15.7ms)
  Rendered layouts/_login_panel.html.erb (1.9ms)
  Rendered layouts/_header.html.erb (2.6ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 22ms (Views: 21.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-20 18:32:14 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 5ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 18:32:14 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.6ms)
  Rendered homes/home.html.erb within layouts/application (3.9ms)
  Rendered layouts/_login_panel.html.erb (2.6ms)
  Rendered layouts/_header.html.erb (3.9ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 13ms (Views: 11.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$rFufmDio0vKkGQh4mZwZYu/zip6OBpC7t76xdw9X/q.tHAlIH5Euu"], ["created_at", "2018-12-20 10:32:14.652429"], ["updated_at", "2018-12-20 10:32:14.652429"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (10.9ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$iMnrTKHtkUGgFZtzNDUpEOIdmt94Je4HSweMnqMzTGCHNPJ7PIr4u"], ["created_at", "2018-12-20 10:32:14.733998"], ["updated_at", "2018-12-20 10:32:14.733998"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-20 18:32:14 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 18:32:14 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.0ms)
  Rendered homes/home.html.erb within layouts/application (2.5ms)
  Rendered layouts/_login_panel.html.erb (2.7ms)
  Rendered layouts/_header.html.erb (3.5ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 10ms (Views: 9.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-20 18:32:14 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (2.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 6ms (ActiveRecord: 2.1ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-20 18:32:48 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.9ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 1731ms (ActiveRecord: 2.9ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 18:32:50 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (22.4ms)
  Rendered homes/home.html.erb within layouts/application (54.5ms)
  Rendered layouts/_login_panel.html.erb (8.9ms)
  Rendered layouts/_header.html.erb (15.0ms)
  Rendered layouts/_content.html.erb (6.0ms)
Completed 200 OK in 169ms (Views: 167.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[35m (1.3ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-20 18:32:50 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (4.0ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$t2MeXqseN4eoksOaT1Z2k.AsobHcutJrEXcbd5GWRedgkwXMoO7nK"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-20 10:32:50.704979"], ["updated_at", "2018-12-20 10:32:50.704979"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 17ms (ActiveRecord: 4.4ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started GET "/" for 127.0.0.1 at 2018-12-20 18:32:50 +0800
Processing by HomesController#home as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered homes/home.html.erb within layouts/application (26.2ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (5.2ms)
  Rendered layouts/_content.html.erb (0.4ms)
Completed 200 OK in 36ms (Views: 34.3ms | ActiveRecord: 0.3ms)
  [1m[36m (2.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-20 18:32:50 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 8ms (ActiveRecord: 0.3ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-20 18:32:50 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 18:32:50 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (8.7ms)
  Rendered homes/home.html.erb within layouts/application (9.2ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.4ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 13ms (Views: 12.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-20 18:32:50 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 4ms (ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-20 18:32:50 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 18:32:50 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.7ms)
  Rendered homes/home.html.erb within layouts/application (2.2ms)
  Rendered layouts/_login_panel.html.erb (8.9ms)
  Rendered layouts/_header.html.erb (10.1ms)
  Rendered layouts/_content.html.erb (0.5ms)
Completed 200 OK in 16ms (Views: 15.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$znKfuu71ZGS7GOeKl1RRlOI0a/RsWHt6FE9.6q6Zu9e.J6AWYfNom"], ["created_at", "2018-12-20 10:32:50.928532"], ["updated_at", "2018-12-20 10:32:50.928532"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$5TXtK0YwZCUcYZrX2SeGgON.8U6bcLzV1nPU/8TXUi522Sye2.93e"], ["created_at", "2018-12-20 10:32:50.949017"], ["updated_at", "2018-12-20 10:32:50.949017"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (17.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (1.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  begin transaction
--------------------------------------------------
MessagesControllerTest: test_should_create_message
--------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------
MessagesControllerTest: test_should_update_message
--------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
MessagesControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
MessagesControllerTest: test_should_get_index
---------------------------------------------
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.2ms)[0m  begin transaction
---------------------------------------------------
MessagesControllerTest: test_should_destroy_message
---------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
MessagesControllerTest: test_should_show_message
------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------
MessagesControllerTest: test_should_get_new
-------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (2.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  begin transaction
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-20 18:33:59 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 78ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 18:33:59 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (41.6ms)
  Rendered homes/home.html.erb within layouts/application (82.2ms)
  Rendered layouts/_login_panel.html.erb (16.8ms)
  Rendered layouts/_header.html.erb (25.0ms)
  Rendered layouts/_content.html.erb (21.4ms)
Completed 200 OK in 315ms (Views: 287.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.4ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (11.6ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (16.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$H9xdfIojHKj3e.sV3gCkKuRkfI1VikCFwKs/COQWlFc.dwP6ESlgq"], ["created_at", "2018-12-20 10:34:00.413408"], ["updated_at", "2018-12-20 10:34:00.413408"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (1.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$MMaKCeSUwbKb6PiYTtQo/e1/4uAUxJR30ivNMUUtB5bZ8SdppSQGm"], ["created_at", "2018-12-20 10:34:02.853388"], ["updated_at", "2018-12-20 10:34:02.853388"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
MessagesControllerTest: test_should_get_new
-------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
MessagesControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
MessagesControllerTest: test_should_destroy_message
---------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
MessagesControllerTest: test_should_show_message
------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-20 18:34:03 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 10ms (ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-20 18:34:03 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 15ms (ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-20 18:34:03 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 9ms (ActiveRecord: 0.4ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 18:34:03 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.5ms)
  Rendered homes/home.html.erb within layouts/application (2.4ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.4ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 7ms (Views: 6.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-20 18:34:03 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$eNDvninHSqFd.p3hgbW/Me96Tu0OKVuM47oLiZ34ra29N7ltdlDy6"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-20 10:34:03.285008"], ["updated_at", "2018-12-20 10:34:03.285008"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 18ms (ActiveRecord: 1.4ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started GET "/" for 127.0.0.1 at 2018-12-20 18:34:03 +0800
Processing by HomesController#home as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered homes/home.html.erb within layouts/application (2.0ms)
  Rendered layouts/_login_panel.html.erb (1.8ms)
  Rendered layouts/_header.html.erb (4.0ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 11ms (Views: 10.0ms | ActiveRecord: 0.1ms)
  [1m[36m (2.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-20 18:34:03 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 18:34:03 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (3.7ms)
  Rendered homes/home.html.erb within layouts/application (4.4ms)
  Rendered layouts/_login_panel.html.erb (1.4ms)
  Rendered layouts/_header.html.erb (2.3ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 20ms (Views: 18.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-20 18:44:03 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 96ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 18:44:04 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (24.6ms)
  Rendered homes/home.html.erb within layouts/application (57.1ms)
  Rendered layouts/_login_panel.html.erb (14.1ms)
  Rendered layouts/_header.html.erb (28.4ms)
  Rendered layouts/_content.html.erb (1.3ms)
Completed 200 OK in 189ms (Views: 183.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (1.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (5.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$YC5ksGeatxhfnUpgXXMX9.DKdmhQvf3cxdLXdatgpRD6wQ3TWl6ou"], ["created_at", "2018-12-20 10:44:06.348563"], ["updated_at", "2018-12-20 10:44:06.348563"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (1.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$uYod2/Gfp3TToDftJPWaVekNYaEhGuunxx2o7aWgw38gFWbpel5By"], ["created_at", "2018-12-20 10:44:06.400962"], ["updated_at", "2018-12-20 10:44:06.400962"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (3.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (1.8ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------------------------------
UsersLoginTest: test_login_with_valid_information_followed_by_logout
--------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.5ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-20 18:44:07 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (1.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 33ms (ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (1.6ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-20 18:44:07 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 18:44:07 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (5.0ms)
  Rendered homes/home.html.erb within layouts/application (6.8ms)
  Rendered layouts/_login_panel.html.erb (2.6ms)
  Rendered layouts/_header.html.erb (3.9ms)
  Rendered layouts/_content.html.erb (0.4ms)
Completed 200 OK in 19ms (Views: 17.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-20 18:44:07 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 31ms (ActiveRecord: 0.7ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 18:44:08 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.1ms)
  Rendered homes/home.html.erb within layouts/application (2.8ms)
  Rendered layouts/_login_panel.html.erb (2.5ms)
  Rendered layouts/_header.html.erb (3.4ms)
  Rendered layouts/_content.html.erb (0.4ms)
Completed 200 OK in 16ms (Views: 14.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-20 18:44:08 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$KU4rWhDbIkNkIQeydZI1i.9O0PN3cwH5HczgKLPTdp4h/3TF8JD.."], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-20 10:44:08.129994"], ["updated_at", "2018-12-20 10:44:08.129994"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 41ms (ActiveRecord: 1.9ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started GET "/" for 127.0.0.1 at 2018-12-20 18:44:08 +0800
Processing by HomesController#home as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered homes/home.html.erb within layouts/application (2.1ms)
  Rendered layouts/_login_panel.html.erb (2.0ms)
  Rendered layouts/_header.html.erb (8.6ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 15ms (Views: 14.1ms | ActiveRecord: 0.1ms)
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-20 18:44:08 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 13ms (ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (2.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (3.3ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$e1aa43TqFRfXOdoYeSBwqutwDP3WCaMvunBjyUaxR6Ht9M/5sqZMW"], ["created_at", "2018-12-20 10:44:33.052571"], ["updated_at", "2018-12-20 10:44:33.052571"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (1.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$8kiKObk4sjlfKXJ5zdSyvuele7h8/hCShxuMImRaiSBi.qILPI4rS"], ["created_at", "2018-12-20 10:44:33.098803"], ["updated_at", "2018-12-20 10:44:33.098803"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (4.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-20 18:44:33 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 41ms (ActiveRecord: 0.4ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-20 18:44:33 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.4ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 14ms (ActiveRecord: 0.9ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 18:44:33 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (22.0ms)
  Rendered homes/home.html.erb within layouts/application (58.1ms)
  Rendered layouts/_login_panel.html.erb (11.5ms)
  Rendered layouts/_header.html.erb (21.6ms)
  Rendered layouts/_content.html.erb (1.9ms)
Completed 200 OK in 183ms (Views: 177.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-20 18:44:33 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$9S2A.Kz64AGWzQDP6rPLQOywB9RtdaCOxYddB32ROxvvpO6okrbeq"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-20 10:44:33.571410"], ["updated_at", "2018-12-20 10:44:33.571410"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 13ms (ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started GET "/" for 127.0.0.1 at 2018-12-20 18:44:33 +0800
Processing by HomesController#home as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered homes/home.html.erb within layouts/application (5.6ms)
  Rendered layouts/_login_panel.html.erb (1.2ms)
  Rendered layouts/_header.html.erb (2.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 11ms (Views: 10.3ms | ActiveRecord: 0.2ms)
  [1m[35m (1.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-20 18:44:33 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 18:44:33 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.7ms)
  Rendered homes/home.html.erb within layouts/application (2.2ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 6ms (Views: 5.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-20 18:44:33 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 18ms (ActiveRecord: 0.5ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------
UsersLoginTest: test_login_with_valid_information_followed_by_logout
--------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-20 18:44:34 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 18:44:34 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.3ms)
  Rendered homes/home.html.erb within layouts/application (3.1ms)
  Rendered layouts/_login_panel.html.erb (2.5ms)
  Rendered layouts/_header.html.erb (3.3ms)
  Rendered layouts/_content.html.erb (0.5ms)
Completed 200 OK in 10ms (Views: 9.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  begin transaction
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-20 18:45:06 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 42ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 18:45:06 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (26.1ms)
  Rendered homes/home.html.erb within layouts/application (54.5ms)
  Rendered layouts/_login_panel.html.erb (17.8ms)
  Rendered layouts/_header.html.erb (25.0ms)
  Rendered layouts/_content.html.erb (2.1ms)
Completed 200 OK in 168ms (Views: 166.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.2ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (3.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$WUw5rT1OuIMS0flSpVD2DeDMt1ZLh3vIOPqae0gKlgyh0SGohfZua"], ["created_at", "2018-12-20 10:45:08.754636"], ["updated_at", "2018-12-20 10:45:08.754636"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$8BP2QsEuxdCMMBaLHFpo4.LI7UZnPBPbi1mTFs1.OhKl0J0lLASCm"], ["created_at", "2018-12-20 10:45:08.778710"], ["updated_at", "2018-12-20 10:45:08.778710"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (2.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (1.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.4ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-20 18:45:08 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 18:45:08 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (9.7ms)
  Rendered homes/home.html.erb within layouts/application (10.5ms)
  Rendered layouts/_login_panel.html.erb (1.9ms)
  Rendered layouts/_header.html.erb (2.8ms)
  Rendered layouts/_content.html.erb (0.4ms)
Completed 200 OK in 17ms (Views: 16.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-20 18:45:08 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 18ms (ActiveRecord: 0.4ms)
  [1m[35m (1.2ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------
UsersLoginTest: test_login_with_valid_information_followed_by_logout
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-20 18:45:09 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 13ms (ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[36m (1.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-20 18:45:09 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$wnc5267O.1rpO8nfbt5eRu.rst44RW34qYW0sJlCRFVB1lj9KWJH2"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-20 10:45:09.140535"], ["updated_at", "2018-12-20 10:45:09.140535"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 24ms (ActiveRecord: 3.7ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started GET "/" for 127.0.0.1 at 2018-12-20 18:45:09 +0800
Processing by HomesController#home as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered homes/home.html.erb within layouts/application (1.7ms)
  Rendered layouts/_login_panel.html.erb (1.7ms)
  Rendered layouts/_header.html.erb (3.8ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 9ms (Views: 8.2ms | ActiveRecord: 0.1ms)
  [1m[35m (2.7ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-20 18:45:09 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.5ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 11ms (ActiveRecord: 0.9ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 18:45:09 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.2ms)
  Rendered homes/home.html.erb within layouts/application (2.9ms)
  Rendered layouts/_login_panel.html.erb (2.5ms)
  Rendered layouts/_header.html.erb (3.4ms)
  Rendered layouts/_content.html.erb (0.4ms)
Completed 200 OK in 10ms (Views: 9.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (3.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  begin transaction
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-20 18:45:50 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 35ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 18:45:51 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (25.6ms)
  Rendered homes/home.html.erb within layouts/application (68.5ms)
  Rendered layouts/_login_panel.html.erb (11.0ms)
  Rendered layouts/_header.html.erb (19.4ms)
  Rendered layouts/_content.html.erb (1.5ms)
Completed 200 OK in 202ms (Views: 200.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-20 18:45:51 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 18:45:51 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.4ms)
  Rendered homes/home.html.erb within layouts/application (1.9ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 5.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (4.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$KFUp8JcIZjjhl.2TuAYHBu8POo8LjbYo6cSAr66zzDYnJZFuVl.p6"], ["created_at", "2018-12-20 10:45:53.010544"], ["updated_at", "2018-12-20 10:45:53.010544"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (1.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$i4Ts2v4uIMmw/RbeubT8muT9RkDVqGt3cgRflIAXGI6BCpuOPdWyK"], ["created_at", "2018-12-20 10:45:53.042259"], ["updated_at", "2018-12-20 10:45:53.042259"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-20 18:45:53 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 12ms (ActiveRecord: 0.4ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-20 18:45:53 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 10ms (ActiveRecord: 0.6ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 18:45:53 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.9ms)
  Rendered homes/home.html.erb within layouts/application (3.6ms)
  Rendered layouts/_login_panel.html.erb (1.2ms)
  Rendered layouts/_header.html.erb (2.0ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 9ms (Views: 8.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-20 18:45:53 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$CfpqQ/DNqZ3Ip/.7zDwXleuumxTiPbriyn54hJeq9KzmOvyoFUaaC"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-20 10:45:53.162143"], ["updated_at", "2018-12-20 10:45:53.162143"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 10ms (ActiveRecord: 0.8ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Started GET "/" for 127.0.0.1 at 2018-12-20 18:45:53 +0800
Processing by HomesController#home as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered homes/home.html.erb within layouts/application (9.5ms)
  Rendered layouts/_login_panel.html.erb (1.6ms)
  Rendered layouts/_header.html.erb (3.4ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 16ms (Views: 15.4ms | ActiveRecord: 0.1ms)
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-20 18:45:53 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 3ms (ActiveRecord: 0.5ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------
UsersLoginTest: test_login_with_valid_information_followed_by_logout
--------------------------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-20 18:45:53 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"@user.email", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  begin transaction
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-20 18:46:42 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 52ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 18:46:42 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (29.5ms)
  Rendered homes/home.html.erb within layouts/application (68.9ms)
  Rendered layouts/_login_panel.html.erb (19.5ms)
  Rendered layouts/_header.html.erb (32.9ms)
  Rendered layouts/_content.html.erb (3.5ms)
Completed 200 OK in 210ms (Views: 208.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (1.8ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (6.7ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$NRhn.THPSjOGvBX5DQEfhegidBNzB6bcQHiin.Rf9c3aAaGHPhjoO"], ["created_at", "2018-12-20 10:46:43.680490"], ["updated_at", "2018-12-20 10:46:43.680490"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (2.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$YZ7tYNuAidl6Pf1pAB7W0.OHerDjgsw8ajpYWFmKy6MTIE6Aa3zLq"], ["created_at", "2018-12-20 10:46:43.707394"], ["updated_at", "2018-12-20 10:46:43.707394"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.6ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-20 18:46:43 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 11ms (ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-20 18:46:43 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.9ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$aYlhAS5d4gMbj2zdJtogN.OPnIhZuiChWyQDB58CVCvMSYzg6aGLe"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-20 10:46:43.853136"], ["updated_at", "2018-12-20 10:46:43.853136"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 25ms (ActiveRecord: 2.7ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started GET "/" for 127.0.0.1 at 2018-12-20 18:46:43 +0800
Processing by HomesController#home as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered homes/home.html.erb within layouts/application (1.7ms)
  Rendered layouts/_login_panel.html.erb (1.4ms)
  Rendered layouts/_header.html.erb (2.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 8ms (Views: 6.8ms | ActiveRecord: 0.1ms)
  [1m[36m (3.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-20 18:46:43 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 11ms (ActiveRecord: 0.6ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-20 18:46:43 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 8ms (ActiveRecord: 0.3ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 18:46:43 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.7ms)
  Rendered homes/home.html.erb within layouts/application (2.4ms)
  Rendered layouts/_login_panel.html.erb (1.9ms)
  Rendered layouts/_header.html.erb (2.8ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 8ms (Views: 7.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-20 18:46:43 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 18:46:43 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.5ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.4ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 6ms (Views: 5.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (1.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (2.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$u5rPx.yFRE6Z9AwVbgDfCOdz3wFZo6SzxrJRJeRCf01gtzVyot5Ra"], ["created_at", "2018-12-20 10:51:14.150634"], ["updated_at", "2018-12-20 10:51:14.150634"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (1.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$PKaY3Amf/Lv3uGJtLgKNZuOd7Y8Qkkn.xeGt/aOAxw0kM71KizCJq"], ["created_at", "2018-12-20 10:51:14.243014"], ["updated_at", "2018-12-20 10:51:14.243014"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
UsersLoginTest: test_login_without_remembering
----------------------------------------------
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
-------------------------------------------
UsersLoginTest: test_login_with_remembering
-------------------------------------------
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-20 18:51:14 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (1.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 166ms (ActiveRecord: 2.2ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 18:51:15 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (38.1ms)
  Rendered homes/home.html.erb within layouts/application (75.3ms)
  Rendered layouts/_login_panel.html.erb (11.1ms)
  Rendered layouts/_header.html.erb (19.7ms)
  Rendered layouts/_content.html.erb (8.7ms)
Completed 200 OK in 190ms (Views: 187.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-20 18:51:16 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (1.8ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 22ms (ActiveRecord: 2.1ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[36m (1.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-20 18:51:16 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$v9TZMBP/wNsynsm0DhjuQ.ICBk.8ecOj85vKjTFOCcKhfRDA2bdPK"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-20 10:51:16.152452"], ["updated_at", "2018-12-20 10:51:16.152452"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 21ms (ActiveRecord: 1.5ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
Started GET "/" for 127.0.0.1 at 2018-12-20 18:51:16 +0800
Processing by HomesController#home as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered homes/home.html.erb within layouts/application (11.4ms)
  Rendered layouts/_login_panel.html.erb (2.4ms)
  Rendered layouts/_header.html.erb (6.6ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 25ms (Views: 23.9ms | ActiveRecord: 0.1ms)
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-20 18:51:16 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 5ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 18:51:16 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.5ms)
  Rendered homes/home.html.erb within layouts/application (2.0ms)
  Rendered layouts/_login_panel.html.erb (2.7ms)
  Rendered layouts/_header.html.erb (3.5ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 10ms (Views: 8.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-20 18:51:16 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 18:51:16 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (6.3ms)
  Rendered homes/home.html.erb within layouts/application (7.8ms)
  Rendered layouts/_login_panel.html.erb (2.3ms)
  Rendered layouts/_header.html.erb (3.4ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 17ms (Views: 15.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (1.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (9.2ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$4Br6rmBakuhALijnjLipa.7f28jUNBzZT0RS1.WKEsRD.7LZnEU8q"], ["created_at", "2018-12-20 10:53:37.104324"], ["updated_at", "2018-12-20 10:53:37.104324"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (7.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$fLaBv91LVphplUFWjPagmORseoMfofdJF4HJtJE98c5rT7/jiPcqO"], ["created_at", "2018-12-20 10:53:37.161697"], ["updated_at", "2018-12-20 10:53:37.161697"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (3.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-20 18:53:37 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$0jBTvqqMpaNqwYL845Ag5uBZ9E5TuNmuISW9SkE.ld4sWzL4TDtDu"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-20 10:53:37.432122"], ["updated_at", "2018-12-20 10:53:37.432122"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 43ms (ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started GET "/" for 127.0.0.1 at 2018-12-20 18:53:37 +0800
Processing by HomesController#home as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered homes/home.html.erb within layouts/application (14.5ms)
  Rendered layouts/_login_panel.html.erb (54.1ms)
  Rendered layouts/_header.html.erb (63.8ms)
  Rendered layouts/_content.html.erb (1.3ms)
Completed 200 OK in 158ms (Views: 155.3ms | ActiveRecord: 0.1ms)
  [1m[35m (4.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-20 18:53:37 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 12ms (ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-20 18:53:37 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 9ms (ActiveRecord: 0.4ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 18:53:37 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.6ms)
  Rendered homes/home.html.erb within layouts/application (15.3ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 20ms (Views: 19.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UsersLoginTest: test_login_without_remembering
----------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-20 18:53:37 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 3ms (ActiveRecord: 0.4ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UsersLoginTest: test_login_with_remembering
-------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-20 18:53:38 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 18:53:38 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (0.9ms)
  Rendered homes/home.html.erb within layouts/application (1.3ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.4ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 5ms (Views: 4.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-20 18:53:38 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 18:53:38 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.3ms)
  Rendered homes/home.html.erb within layouts/application (1.6ms)
  Rendered layouts/_login_panel.html.erb (1.2ms)
  Rendered layouts/_header.html.erb (2.0ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 6ms (Views: 5.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
----------------------------------------------
UsersLoginTest: test_login_without_remembering
----------------------------------------------
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UsersLoginTest: test_login_with_remembering
-------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-20 18:57:14 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 352ms (ActiveRecord: 1.9ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-20 18:57:15 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 12ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 18:57:15 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (51.6ms)
  Rendered homes/home.html.erb within layouts/application (89.5ms)
  Rendered layouts/_login_panel.html.erb (41.9ms)
  Rendered layouts/_header.html.erb (56.7ms)
  Rendered layouts/_content.html.erb (2.9ms)
Completed 200 OK in 550ms (Views: 544.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.8ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (5.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$ry1hf/BCgMNpmOhxACwbj.0CYDysatK6m5NMwTGGTCsinPwZDKADC"], ["created_at", "2018-12-20 10:57:18.948555"], ["updated_at", "2018-12-20 10:57:18.948555"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$X9MvmmWmSkcFeAj1Yi/iwufksQuyYssCnXzvsQu6ElCtc4BHvJ9n."], ["created_at", "2018-12-20 10:57:18.986935"], ["updated_at", "2018-12-20 10:57:18.986935"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (1.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.4ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-20 18:57:19 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 18:57:19 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.9ms)
  Rendered homes/home.html.erb within layouts/application (3.7ms)
  Rendered layouts/_login_panel.html.erb (4.7ms)
  Rendered layouts/_header.html.erb (5.2ms)
  Rendered layouts/_content.html.erb (4.1ms)
Completed 200 OK in 17ms (Views: 15.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------------
SessionsHelperTest: test_current_user_returns_nil_when_remember_digest_is_wrong
-------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------------
SessionsHelperTest: test_current_user_returns_right_user_when_session_is_nil
----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-20 18:57:19 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 20ms (ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-20 18:57:19 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 22ms (ActiveRecord: 0.5ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 18:57:19 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.0ms)
  Rendered homes/home.html.erb within layouts/application (2.6ms)
  Rendered layouts/_login_panel.html.erb (3.0ms)
  Rendered layouts/_header.html.erb (3.6ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 17ms (Views: 16.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-20 18:57:19 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$gMn4SOCTwNr00L688c1OieygC.uUKZYwjjJxhJL/ddO5Q.tp9qB3m"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-20 10:57:19.344153"], ["updated_at", "2018-12-20 10:57:19.344153"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 15ms (ActiveRecord: 1.4ms)
  [1m[36m (1.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started GET "/" for 127.0.0.1 at 2018-12-20 18:57:19 +0800
Processing by HomesController#home as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered homes/home.html.erb within layouts/application (1.8ms)
  Rendered layouts/_login_panel.html.erb (2.4ms)
  Rendered layouts/_header.html.erb (10.1ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 17ms (Views: 14.9ms | ActiveRecord: 0.3ms)
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  begin transaction
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-20 19:10:53 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 78ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 19:10:54 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (53.4ms)
  Rendered homes/home.html.erb within layouts/application (96.0ms)
  Rendered layouts/_login_panel.html.erb (37.2ms)
  Rendered layouts/_header.html.erb (51.3ms)
  Rendered layouts/_content.html.erb (19.3ms)
Completed 200 OK in 309ms (Views: 295.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (1.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-20 19:10:54 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 2410ms (ActiveRecord: 1.9ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-20 19:10:57 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 9ms (ActiveRecord: 0.3ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 19:10:57 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.6ms)
  Rendered homes/home.html.erb within layouts/application (2.0ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (5.8ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 11ms (Views: 10.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-20 19:10:57 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (7.6ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$RFBxwVn18GxxaGXTFapQOu4V.lVE6rD6JDZ2MOBaEh/if7NByOhsm"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-20 11:10:57.068609"], ["updated_at", "2018-12-20 11:10:57.068609"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 23ms (ActiveRecord: 7.9ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Started GET "/" for 127.0.0.1 at 2018-12-20 19:10:57 +0800
Processing by HomesController#home as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered homes/home.html.erb within layouts/application (16.2ms)
  Rendered layouts/_login_panel.html.erb (5.4ms)
  Rendered layouts/_header.html.erb (11.9ms)
  Rendered layouts/_content.html.erb (0.4ms)
Completed 200 OK in 32ms (Views: 30.9ms | ActiveRecord: 0.3ms)
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-20 19:10:57 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 19:10:57 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.5ms)
  Rendered homes/home.html.erb within layouts/application (1.8ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.4ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 6ms (Views: 4.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------------
SessionsHelperTest: test_current_user_returns_nil_when_remember_digest_is_wrong
-------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------------
SessionsHelperTest: test_current_user_returns_right_user_when_session_is_nil
----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$7sFoSq5t9Qdz3pD4rqzbfOgRxaHjq02Yq2JIXwRRne/IJidqu5ms6"], ["created_at", "2018-12-20 11:10:57.296327"], ["updated_at", "2018-12-20 11:10:57.296327"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (6.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$zD1hiOPqL.Dh4CO/D1QJBe6lRR9zz3RMDU1z2O9GfZCRSOtr3CBpi"], ["created_at", "2018-12-20 11:10:57.341484"], ["updated_at", "2018-12-20 11:10:57.341484"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (6.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UsersLoginTest: test_login_without_remembering
----------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-20 19:10:57 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (2.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 7ms (ActiveRecord: 2.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UsersLoginTest: test_login_with_remembering
-------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.5ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (1.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-20 19:13:39 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 2080ms (ActiveRecord: 2.2ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-20 19:13:42 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 11ms (ActiveRecord: 0.4ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 19:13:42 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (31.7ms)
  Rendered homes/home.html.erb within layouts/application (77.9ms)
  Rendered layouts/_login_panel.html.erb (15.0ms)
  Rendered layouts/_header.html.erb (27.4ms)
  Rendered layouts/_content.html.erb (1.8ms)
Completed 200 OK in 177ms (Views: 175.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.6ms)[0m  begin transaction
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-20 19:13:42 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (2.7ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$7N9gHskdxPDz2k3am8Cr0Oiop/HPYWmAyp5AvYZFhst7JNtJiidmG"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-20 11:13:42.594325"], ["updated_at", "2018-12-20 11:13:42.594325"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 21ms (ActiveRecord: 4.4ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started GET "/" for 127.0.0.1 at 2018-12-20 19:13:42 +0800
Processing by HomesController#home as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered homes/home.html.erb within layouts/application (21.6ms)
  Rendered layouts/_login_panel.html.erb (1.9ms)
  Rendered layouts/_header.html.erb (3.4ms)
  Rendered layouts/_content.html.erb (0.4ms)
Completed 200 OK in 28ms (Views: 27.3ms | ActiveRecord: 0.3ms)
  [1m[35m (4.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-20 19:13:42 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 19:13:42 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.4ms)
  Rendered homes/home.html.erb within layouts/application (1.8ms)
  Rendered layouts/_login_panel.html.erb (2.2ms)
  Rendered layouts/_header.html.erb (3.1ms)
  Rendered layouts/_content.html.erb (0.4ms)
Completed 200 OK in 138ms (Views: 131.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UsersLoginTest: test_login_without_remembering
----------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (5.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-20 19:13:43 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 3ms (ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UsersLoginTest: test_login_with_remembering
-------------------------------------------
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$c8a0GFDG15TGk1g5Fbd1MOP1zY/NtZacN9R8Vz3czB.AZhPmNviBa"], ["created_at", "2018-12-20 11:13:43.338933"], ["updated_at", "2018-12-20 11:13:43.338933"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$kO/1c651eWJzvO1vn8mjEO5dWsUAT9x.wWf4u4Xn8.LiCPcXjeZuK"], ["created_at", "2018-12-20 11:13:43.355995"], ["updated_at", "2018-12-20 11:13:43.355995"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-20 19:13:43 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 19:13:43 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (11.2ms)
  Rendered homes/home.html.erb within layouts/application (11.7ms)
  Rendered layouts/_login_panel.html.erb (1.7ms)
  Rendered layouts/_header.html.erb (3.7ms)
  Rendered layouts/_content.html.erb (0.6ms)
Completed 200 OK in 20ms (Views: 18.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (4.4ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$qvsE2wAwlQkHs5goPYyi5O3o56Ivmr84btByCda7SJqO7eRez3vO."], ["created_at", "2018-12-20 11:58:43.519577"], ["updated_at", "2018-12-20 11:58:43.519577"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$l.09xSBviR3VAIuGJJwW4OG4B3eajIye6ePB4aPABF0cCNpPdymh6"], ["created_at", "2018-12-20 11:58:43.634640"], ["updated_at", "2018-12-20 11:58:43.634640"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (2.7ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-20 19:58:43 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 56ms (ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UsersLoginTest: test_login_with_remembering
-------------------------------------------
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UsersLoginTest: test_login_without_remembering
----------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/message" for 127.0.0.1 at 2018-12-20 19:58:44 +0800
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-20 19:58:44 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 25ms (ActiveRecord: 0.7ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 19:58:44 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (49.0ms)
  Rendered homes/home.html.erb within layouts/application (88.3ms)
  Rendered layouts/_login_panel.html.erb (18.1ms)
  Rendered layouts/_header.html.erb (28.0ms)
  Rendered layouts/_content.html.erb (1.4ms)
Completed 200 OK in 207ms (Views: 204.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[36m (2.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-20 19:58:44 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$GkCOT5iSlMOI7csghrk8Y.iX/2/qJbnCnGaVQ9Ft4rI5c0m/IkiFC"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-20 11:58:44.676491"], ["updated_at", "2018-12-20 11:58:44.676491"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 16ms (ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started GET "/" for 127.0.0.1 at 2018-12-20 19:58:44 +0800
Processing by HomesController#home as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered homes/home.html.erb within layouts/application (2.0ms)
  Rendered layouts/_login_panel.html.erb (2.0ms)
  Rendered layouts/_header.html.erb (4.2ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 10ms (Views: 9.0ms | ActiveRecord: 0.1ms)
  [1m[35m (8.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-20 19:58:44 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 11ms (ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-20 19:58:44 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 19:58:44 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.3ms)
  Rendered homes/home.html.erb within layouts/application (4.9ms)
  Rendered layouts/_login_panel.html.erb (2.8ms)
  Rendered layouts/_header.html.erb (3.7ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 21ms (Views: 20.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/message" for 127.0.0.1 at 2018-12-20 19:59:08 +0800
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (181.5ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$a5pfbb29nmRjaC9ahtn3du/Px9H/don/0qOLHsNzwm1qQXeXlgCq2"], ["created_at", "2018-12-20 11:59:09.877501"], ["updated_at", "2018-12-20 11:59:09.877501"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (1.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (6.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (2.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$8scnINimWkZhWZaYmbHkDOngZlmcFCek2ecjlRCqgC/eRctf4fzPC"], ["created_at", "2018-12-20 11:59:10.175940"], ["updated_at", "2018-12-20 11:59:10.175940"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (4.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (3.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.4ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (1.7ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-20 19:59:10 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 396ms (ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UsersLoginTest: test_login_with_remembering
-------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (15.9ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UsersLoginTest: test_login_without_remembering
----------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-20 19:59:11 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 11ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 19:59:11 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (21.9ms)
  Rendered homes/home.html.erb within layouts/application (46.3ms)
  Rendered layouts/_login_panel.html.erb (15.0ms)
  Rendered layouts/_header.html.erb (21.9ms)
  Rendered layouts/_content.html.erb (1.9ms)
Completed 200 OK in 140ms (Views: 135.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-20 19:59:11 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 18ms (ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-20 19:59:11 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 14ms (ActiveRecord: 0.5ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 19:59:11 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.8ms)
  Rendered homes/home.html.erb within layouts/application (4.4ms)
  Rendered layouts/_login_panel.html.erb (1.7ms)
  Rendered layouts/_header.html.erb (2.6ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 12ms (Views: 10.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-20 19:59:11 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$Xhdbyh5dUxSV8WUuWOyYQOkqIE71qUfb8pX.Xnlam.LIiUzrdhg0C"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-20 11:59:11.891462"], ["updated_at", "2018-12-20 11:59:11.891462"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 14ms (ActiveRecord: 1.4ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started GET "/" for 127.0.0.1 at 2018-12-20 19:59:11 +0800
Processing by HomesController#home as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered homes/home.html.erb within layouts/application (1.7ms)
  Rendered layouts/_login_panel.html.erb (1.5ms)
  Rendered layouts/_header.html.erb (3.2ms)
  Rendered layouts/_content.html.erb (2.8ms)
Completed 200 OK in 11ms (Views: 10.3ms | ActiveRecord: 0.1ms)
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.6ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (3.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$MmCIljKtQFXX6shQ2eNW2up131.UjYOSCdSeWAHxbXqQmhRHCm.g2"], ["created_at", "2018-12-20 12:00:16.398902"], ["updated_at", "2018-12-20 12:00:16.398902"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$Eyzzwv9pBhmOFbpCHpsTOeRyeYJyekX2QUOBXfWqVZUjmtNyJfKIq"], ["created_at", "2018-12-20 12:00:16.417146"], ["updated_at", "2018-12-20 12:00:16.417146"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-20 20:00:16 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 33ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 20:00:16 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (158.1ms)
  Rendered homes/home.html.erb within layouts/application (178.1ms)
  Rendered layouts/_login_panel.html.erb (7.8ms)
  Rendered layouts/_header.html.erb (12.6ms)
  Rendered layouts/_content.html.erb (1.2ms)
Completed 200 OK in 251ms (Views: 249.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.4ms)[0m  begin transaction
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-20 20:00:16 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 20:00:16 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.5ms)
  Rendered layouts/_login_panel.html.erb (1.2ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 5.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
----------------------------------------------
UsersLoginTest: test_login_without_remembering
----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-20 20:00:17 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 7ms (ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UsersLoginTest: test_login_with_remembering
-------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-20 20:00:17 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 13ms (ActiveRecord: 0.5ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 20:00:17 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.4ms)
  Rendered homes/home.html.erb within layouts/application (2.9ms)
  Rendered layouts/_login_panel.html.erb (1.5ms)
  Rendered layouts/_header.html.erb (2.2ms)
  Rendered layouts/_content.html.erb (0.6ms)
Completed 200 OK in 10ms (Views: 8.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-20 20:00:17 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$CBX00G3l1MebbNsRITAEyO74UoV8ssijKSs9IQbpHwQozAfAu00m."], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-20 12:00:17.376926"], ["updated_at", "2018-12-20 12:00:17.376926"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 18ms (ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started GET "/" for 127.0.0.1 at 2018-12-20 20:00:17 +0800
Processing by HomesController#home as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered homes/home.html.erb within layouts/application (1.4ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (2.7ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 7ms (Views: 6.1ms | ActiveRecord: 0.2ms)
  [1m[35m (11.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-20 20:00:17 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 11ms (ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (6.7ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (5.0ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$H6gfAj/bi.IpGxNKW3vRguidN3Kb7B2SxCOxYON5yxHqDaBk1EqHe"], ["created_at", "2018-12-20 12:01:18.488145"], ["updated_at", "2018-12-20 12:01:18.488145"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (9.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$LFG5S8rp9sCGTX2YboOlROxduQaq6VMqXEVGJ9SeSldORvz6/A32a"], ["created_at", "2018-12-20 12:01:20.204490"], ["updated_at", "2018-12-20 12:01:20.204490"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (1.6ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-20 20:01:20 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 33ms (ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-20 20:01:20 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 12ms (ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-20 20:01:20 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 10ms (ActiveRecord: 0.5ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 20:01:20 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (24.5ms)
  Rendered homes/home.html.erb within layouts/application (62.5ms)
  Rendered layouts/_login_panel.html.erb (15.5ms)
  Rendered layouts/_header.html.erb (25.4ms)
  Rendered layouts/_content.html.erb (1.7ms)
Completed 200 OK in 166ms (Views: 165.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-20 20:01:20 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$0BvyQieNBg9AMYaDrduU7eHtA3UqfjbyEx1V.EA2vnRF6HUWOb7RK"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-20 12:01:20.905929"], ["updated_at", "2018-12-20 12:01:20.905929"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 11ms (ActiveRecord: 1.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started GET "/" for 127.0.0.1 at 2018-12-20 20:01:20 +0800
Processing by HomesController#home as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered homes/home.html.erb within layouts/application (6.8ms)
  Rendered layouts/_login_panel.html.erb (1.8ms)
  Rendered layouts/_header.html.erb (4.7ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 16ms (Views: 15.1ms | ActiveRecord: 0.1ms)
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-20 20:01:20 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 20:01:20 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.7ms)
  Rendered homes/home.html.erb within layouts/application (2.2ms)
  Rendered layouts/_login_panel.html.erb (4.0ms)
  Rendered layouts/_header.html.erb (4.6ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 19ms (Views: 17.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.6ms)[0m  begin transaction
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-20 20:01:21 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 20:01:21 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (5.8ms)
  Rendered homes/home.html.erb within layouts/application (6.4ms)
  Rendered layouts/_login_panel.html.erb (1.3ms)
  Rendered layouts/_header.html.erb (2.0ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 13ms (Views: 11.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.6ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-20 20:02:33 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (4.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 109ms (ActiveRecord: 5.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$tlnsqaROosR86eClBEfOzelrXn7EmvjOyESRHitUfsU28ydFbH5Ki"], ["created_at", "2018-12-20 12:02:34.011659"], ["updated_at", "2018-12-20 12:02:34.011659"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$zkduXzv3LElMNdrkB6FlUuPMmLjPaqNYBcoJtRnpqsj4pIokg.jAq"], ["created_at", "2018-12-20 12:02:35.141993"], ["updated_at", "2018-12-20 12:02:35.141993"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-20 20:02:35 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 7ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 20:02:35 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (12.5ms)
  Rendered homes/home.html.erb within layouts/application (24.2ms)
  Rendered layouts/_login_panel.html.erb (8.4ms)
  Rendered layouts/_header.html.erb (13.7ms)
  Rendered layouts/_content.html.erb (1.2ms)
Completed 200 OK in 84ms (Views: 82.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-20 20:02:35 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 10ms (ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-20 20:02:35 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 7ms (ActiveRecord: 0.3ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 20:02:35 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.7ms)
  Rendered homes/home.html.erb within layouts/application (2.6ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (2.0ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 8ms (Views: 6.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-20 20:02:35 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$OmT4KIvbxBfCw6hR2vUoC.YllFvfvTfOCxdbrWn8XhmEH4Yt8TOSy"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-20 12:02:35.374593"], ["updated_at", "2018-12-20 12:02:35.374593"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 9ms (ActiveRecord: 0.7ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started GET "/" for 127.0.0.1 at 2018-12-20 20:02:35 +0800
Processing by HomesController#home as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered homes/home.html.erb within layouts/application (1.7ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (2.2ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 5.4ms | ActiveRecord: 0.2ms)
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-20 20:02:35 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 20:02:35 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.4ms)
  Rendered layouts/_login_panel.html.erb (14.5ms)
  Rendered layouts/_header.html.erb (15.0ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 18ms (Views: 17.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (6.5ms)[0m  begin transaction
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-20 21:33:19 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 1535ms (ActiveRecord: 2.3ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 21:33:21 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (20.2ms)
  Rendered homes/home.html.erb within layouts/application (54.7ms)
  Rendered layouts/_login_panel.html.erb (8.0ms)
  Rendered layouts/_header.html.erb (13.4ms)
  Rendered layouts/_content.html.erb (1.6ms)
Completed 200 OK in 146ms (Views: 141.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[35m (8.8ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-20 21:33:21 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 19ms (ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-20 21:33:21 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (27.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$bjbk65ndrxziPn3U7A0gfuuKRBHTwlYVEX2CXAze0.7qVhXl1TtYa"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-20 13:33:21.402698"], ["updated_at", "2018-12-20 13:33:21.402698"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 78ms (ActiveRecord: 27.4ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started GET "/" for 127.0.0.1 at 2018-12-20 21:33:21 +0800
Processing by HomesController#home as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered homes/home.html.erb within layouts/application (55.4ms)
  Rendered layouts/_login_panel.html.erb (1.2ms)
  Rendered layouts/_header.html.erb (2.4ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 61ms (Views: 59.8ms | ActiveRecord: 0.4ms)
  [1m[35m (1.1ms)[0m  rollback transaction
  [1m[36m (0.5ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-20 21:33:21 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 2ms (ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$uAmusfZLx1/p/OWuH.KRw.ba5d9kvF0lJHKhMvj4KPzyydoZ0jvaC"], ["created_at", "2018-12-20 13:33:21.595898"], ["updated_at", "2018-12-20 13:33:21.595898"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$xN0jG3kXFT2L3oa6GGyVKOqGLyUY.g8Z06VK1SL1xdQkPsWM7rLqS"], ["created_at", "2018-12-20 13:33:21.703695"], ["updated_at", "2018-12-20 13:33:21.703695"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (1.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------
MessagesControllerTest: test_should_get_index
---------------------------------------------
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-20 21:33:22 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 21:33:22 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.5ms)
  Rendered homes/home.html.erb within layouts/application (2.3ms)
  Rendered layouts/_login_panel.html.erb (2.2ms)
  Rendered layouts/_header.html.erb (3.1ms)
  Rendered layouts/_content.html.erb (0.4ms)
Completed 200 OK in 14ms (Views: 13.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-20 21:33:22 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 21:33:22 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.2ms)
  Rendered homes/home.html.erb within layouts/application (4.6ms)
  Rendered layouts/_login_panel.html.erb (4.6ms)
  Rendered layouts/_header.html.erb (7.4ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 16ms (Views: 14.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (3.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  begin transaction
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-20 22:47:10 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 68ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 22:47:10 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (62.4ms)
  Rendered homes/home.html.erb within layouts/application (109.6ms)
  Rendered layouts/_login_panel.html.erb (275.7ms)
  Rendered layouts/_header.html.erb (303.7ms)
  Rendered layouts/_content.html.erb (7.3ms)
Completed 200 OK in 611ms (Views: 604.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (3.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (10.0ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$DMQmmyMXsA5OeXRiu3x9Y.m2r/8wC6fl/j3bo2SAuz3Wg4jpQijYa"], ["created_at", "2018-12-20 14:47:14.057634"], ["updated_at", "2018-12-20 14:47:14.057634"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (9.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.4ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$MVcSnPrKo70A3thJhF/pGevEshfXgPDFRzzsMzBsaELKUCaCZqeK2"], ["created_at", "2018-12-20 14:47:14.179808"], ["updated_at", "2018-12-20 14:47:14.179808"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (3.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-20 22:47:14 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 15ms (ActiveRecord: 0.5ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 22:47:14 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.7ms)
  Rendered homes/home.html.erb within layouts/application (2.0ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 5.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-20 22:47:14 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 8ms (ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-20 22:47:14 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$pp15rrWhg11lwsOQViXTYOYGuxOPqlQ8nr3hpuI6ixyZ.T7EOx8ga"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-20 14:47:14.314443"], ["updated_at", "2018-12-20 14:47:14.314443"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 10ms (ActiveRecord: 1.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Started GET "/" for 127.0.0.1 at 2018-12-20 22:47:14 +0800
Processing by HomesController#home as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered homes/home.html.erb within layouts/application (7.5ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (2.2ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 13ms (Views: 12.0ms | ActiveRecord: 0.1ms)
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started GET "/users/index_json?query=" for 127.0.0.1 at 2018-12-20 22:47:14 +0800
Processing by UsersController#index_json as HTML
  Parameters: {"query"=>""}
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-20 22:47:14 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-20 22:47:14 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 22:47:14 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.4ms)
  Rendered homes/home.html.erb within layouts/application (2.3ms)
  Rendered layouts/_login_panel.html.erb (2.0ms)
  Rendered layouts/_header.html.erb (3.1ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 10ms (Views: 9.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-20 22:47:14 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 4ms (ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-20 22:47:14 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-20 22:47:14 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 22:47:14 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.8ms)
  Rendered homes/home.html.erb within layouts/application (2.5ms)
  Rendered layouts/_login_panel.html.erb (1.4ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 8ms (Views: 6.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-20 22:47:14 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-20 22:47:14 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 22:47:14 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.7ms)
  Rendered homes/home.html.erb within layouts/application (2.1ms)
  Rendered layouts/_login_panel.html.erb (3.2ms)
  Rendered layouts/_header.html.erb (3.7ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 9ms (Views: 8.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-20 22:47:14 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-20 22:47:14 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 22:47:14 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.4ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.2ms)
  Rendered layouts/_content.html.erb (6.0ms)
Completed 200 OK in 11ms (Views: 10.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-20 22:47:14 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 22:47:14 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.7ms)
  Rendered homes/home.html.erb within layouts/application (2.2ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 8ms (Views: 6.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-20 22:47:14 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-20 22:47:14 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 22:47:14 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.3ms)
  Rendered homes/home.html.erb within layouts/application (1.7ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (1.6ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 5ms (Views: 5.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  begin transaction
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-20 22:48:14 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 48ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 22:48:15 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (28.3ms)
  Rendered homes/home.html.erb within layouts/application (62.7ms)
  Rendered layouts/_login_panel.html.erb (22.8ms)
  Rendered layouts/_header.html.erb (31.5ms)
  Rendered layouts/_content.html.erb (1.9ms)
Completed 200 OK in 199ms (Views: 197.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-20 22:48:15 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-20 22:48:15 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 22:48:15 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.5ms)
  Rendered homes/home.html.erb within layouts/application (1.8ms)
  Rendered layouts/_login_panel.html.erb (1.8ms)
  Rendered layouts/_header.html.erb (2.6ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 8ms (Views: 7.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-20 22:48:15 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-20 22:48:15 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 22:48:15 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.8ms)
  Rendered homes/home.html.erb within layouts/application (10.2ms)
  Rendered layouts/_login_panel.html.erb (2.3ms)
  Rendered layouts/_header.html.erb (3.8ms)
  Rendered layouts/_content.html.erb (6.7ms)
Completed 200 OK in 37ms (Views: 23.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-20 22:48:15 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-20 22:48:15 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 6ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 22:48:15 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.9ms)
  Rendered homes/home.html.erb within layouts/application (2.2ms)
  Rendered layouts/_login_panel.html.erb (1.9ms)
  Rendered layouts/_header.html.erb (2.5ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 8ms (Views: 7.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  begin transaction
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-20 22:48:15 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-20 22:48:15 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 7ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 22:48:15 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.7ms)
  Rendered homes/home.html.erb within layouts/application (2.1ms)
  Rendered layouts/_login_panel.html.erb (3.8ms)
  Rendered layouts/_header.html.erb (4.9ms)
  Rendered layouts/_content.html.erb (0.4ms)
Completed 200 OK in 22ms (Views: 16.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-20 22:48:15 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 22:48:15 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.8ms)
  Rendered homes/home.html.erb within layouts/application (7.3ms)
  Rendered layouts/_login_panel.html.erb (2.7ms)
  Rendered layouts/_header.html.erb (3.5ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 21ms (Views: 20.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (5.8ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$octBEGwaesjaJGKy4IKEPuop44J8zN.l12Dunye0R9CdYWdG.uHF."], ["created_at", "2018-12-20 14:48:16.076080"], ["updated_at", "2018-12-20 14:48:16.076080"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$nd/s98rebrHLx9lh9Fzb0OOhh9D6Rk4G/D/c0/TMFUE.giGoZZQ.S"], ["created_at", "2018-12-20 14:48:17.616151"], ["updated_at", "2018-12-20 14:48:17.616151"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.9ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-20 22:48:17 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 13ms (ActiveRecord: 0.2ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-20 22:48:17 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 22:48:17 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.7ms)
  Rendered homes/home.html.erb within layouts/application (2.3ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 7ms (Views: 5.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-20 22:48:17 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 22:48:17 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (4.0ms)
  Rendered homes/home.html.erb within layouts/application (4.6ms)
  Rendered layouts/_login_panel.html.erb (2.1ms)
  Rendered layouts/_header.html.erb (3.2ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 13ms (Views: 12.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-20 22:48:17 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 13ms (ActiveRecord: 0.6ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-20 22:48:17 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 9ms (ActiveRecord: 0.4ms)
Started GET "/" for 127.0.0.1 at 2018-12-20 22:48:17 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.8ms)
  Rendered homes/home.html.erb within layouts/application (2.2ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.4ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 5.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-20 22:48:17 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$FXJYQj4wVC7FkHEVCNhGKOatgjAuzyjPw9f4omSBQ2jKf/OyTWLlq"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-20 14:48:17.898381"], ["updated_at", "2018-12-20 14:48:17.898381"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 14ms (ActiveRecord: 1.4ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Started GET "/" for 127.0.0.1 at 2018-12-20 22:48:17 +0800
Processing by HomesController#home as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered homes/home.html.erb within layouts/application (1.0ms)
  Rendered layouts/_login_panel.html.erb (1.3ms)
  Rendered layouts/_header.html.erb (3.3ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 8ms (Views: 7.1ms | ActiveRecord: 0.1ms)
  [1m[35m (7.4ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-20 22:48:17 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 3ms (ActiveRecord: 0.4ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (7.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (5.2ms)[0m  begin transaction
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 00:04:39 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 55ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 00:04:39 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (31.7ms)
  Rendered homes/home.html.erb within layouts/application (58.9ms)
  Rendered layouts/_login_panel.html.erb (20.2ms)
  Rendered layouts/_header.html.erb (30.2ms)
  Rendered layouts/_content.html.erb (1.3ms)
Completed 200 OK in 526ms (Views: 522.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-21 00:04:40 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (2.8ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 3026ms (ActiveRecord: 4.2ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 00:04:43 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.1ms)
  Rendered homes/home.html.erb within layouts/application (2.7ms)
  Rendered layouts/_login_panel.html.erb (1.5ms)
  Rendered layouts/_header.html.erb (2.2ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 8ms (Views: 7.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[35m (1.8ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 00:04:43 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 11ms (ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-21 00:04:43 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (4.9ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$gJCsN4crXm7Mmo1KxmqTBehFAQa3UppaPYJl8vzZqmS/3jLmmn.5y"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-20 16:04:43.219799"], ["updated_at", "2018-12-20 16:04:43.219799"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 29ms (ActiveRecord: 5.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Started GET "/" for 127.0.0.1 at 2018-12-21 00:04:43 +0800
Processing by HomesController#home as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered homes/home.html.erb within layouts/application (31.5ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (2.1ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 36ms (Views: 35.0ms | ActiveRecord: 0.3ms)
  [1m[35m (2.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 00:04:43 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-21 00:04:43 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 00:04:43 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.4ms)
  Rendered homes/home.html.erb within layouts/application (1.7ms)
  Rendered layouts/_login_panel.html.erb (1.4ms)
  Rendered layouts/_header.html.erb (2.0ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 6ms (Views: 5.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
ChatsStateTest: test_delete_history_of_chat
-------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 00:04:43 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/messages/destroyall?chat_room=8" for 127.0.0.1 at 2018-12-21 00:04:43 +0800
Processing by MessagesController#destroyall as HTML
  Parameters: {"chat_room"=>"8"}
  [1m[35mChat Load (5.9ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 8]]
Completed 500 Internal Server Error in 27ms (ActiveRecord: 6.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 00:04:43 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-21 00:04:43 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 00:04:43 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.5ms)
  Rendered layouts/_login_panel.html.erb (1.5ms)
  Rendered layouts/_header.html.erb (3.1ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 17ms (Views: 16.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------
ChatsStateTest: test_delete_chat
--------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 00:04:43 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/chats/8" for 127.0.0.1 at 2018-12-21 00:04:43 +0800
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 00:04:43 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.0ms)
  Rendered homes/home.html.erb within layouts/application (2.5ms)
  Rendered layouts/_login_panel.html.erb (2.8ms)
  Rendered layouts/_header.html.erb (3.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 11ms (Views: 9.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 00:04:43 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-21 00:04:43 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 00:04:43 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (3.9ms)
  Rendered homes/home.html.erb within layouts/application (5.3ms)
  Rendered layouts/_login_panel.html.erb (1.5ms)
  Rendered layouts/_header.html.erb (2.2ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 13ms (Views: 10.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 00:04:43 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 4ms (ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------
FriendshipStateTest: test_delete_a_friend
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 00:04:43 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/3" for 127.0.0.1 at 2018-12-21 00:04:43 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"3"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 00:04:43 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.7ms)
  Rendered homes/home.html.erb within layouts/application (2.3ms)
  Rendered layouts/_login_panel.html.erb (1.5ms)
  Rendered layouts/_header.html.erb (2.4ms)
  Rendered layouts/_content.html.erb (5.7ms)
Completed 200 OK in 17ms (Views: 12.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------
FriendshipStateTest: test_test_show_information_of_friend
---------------------------------------------------------
Started GET "/users/9" for 127.0.0.1 at 2018-12-21 00:04:43 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 9]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 00:04:43 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 00:04:43 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.4ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 00:04:43 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 00:04:43 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.5ms)
  Rendered layouts/_login_panel.html.erb (1.2ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 10ms (Views: 9.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$S0bWCcr/NM7mnxRXuEtXm.wuNLQIsmjZ364UUHWDk9u4tyItDqKnG"], ["created_at", "2018-12-20 16:04:43.813124"], ["updated_at", "2018-12-20 16:04:43.813124"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (34.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$4L86DkvVgMJEkSYoufhso.5JZfH6ftNdLtAWTAJsGwSQTZvD2UsBS"], ["created_at", "2018-12-20 16:04:43.943350"], ["updated_at", "2018-12-20 16:04:43.943350"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (20.8ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 00:04:43 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-21 00:04:43 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 00:04:44 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.4ms)
  Rendered homes/home.html.erb within layouts/application (2.0ms)
  Rendered layouts/_login_panel.html.erb (1.5ms)
  Rendered layouts/_header.html.erb (2.0ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 5.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mbegin transaction[0m
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 00:04:44 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 00:04:44 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.0ms)
  Rendered homes/home.html.erb within layouts/application (1.4ms)
  Rendered layouts/_login_panel.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (1.1ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 5ms (Views: 4.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 00:04:44 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 00:04:44 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 00:04:44 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.9ms)
  Rendered homes/home.html.erb within layouts/application (2.4ms)
  Rendered layouts/_login_panel.html.erb (9.2ms)
  Rendered layouts/_header.html.erb (9.7ms)
  Rendered layouts/_content.html.erb (1.7ms)
Completed 200 OK in 30ms (Views: 28.9ms | ActiveRecord: 0.0ms)
  [1m[35m (1.3ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 00:05:49 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 35ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 00:05:49 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (54.1ms)
  Rendered homes/home.html.erb within layouts/application (209.3ms)
  Rendered layouts/_login_panel.html.erb (19.5ms)
  Rendered layouts/_header.html.erb (45.0ms)
  Rendered layouts/_content.html.erb (3.7ms)
Completed 200 OK in 354ms (Views: 350.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 00:05:50 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 5ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 00:05:50 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 00:05:50 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (5.1ms)
  Rendered homes/home.html.erb within layouts/application (9.7ms)
  Rendered layouts/_login_panel.html.erb (10.0ms)
  Rendered layouts/_header.html.erb (13.7ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 28ms (Views: 27.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 00:05:50 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 4ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 00:05:50 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.6ms)
  Rendered homes/home.html.erb within layouts/application (3.2ms)
  Rendered layouts/_login_panel.html.erb (2.2ms)
  Rendered layouts/_header.html.erb (4.1ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 13ms (Views: 12.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 00:05:50 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 00:05:50 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.3ms)
  Rendered homes/home.html.erb within layouts/application (4.3ms)
  Rendered layouts/_login_panel.html.erb (2.1ms)
  Rendered layouts/_header.html.erb (6.6ms)
  Rendered layouts/_content.html.erb (0.4ms)
Completed 200 OK in 14ms (Views: 13.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-21 00:05:50 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (3.5ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 1671ms (ActiveRecord: 4.6ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 00:05:52 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.3ms)
  Rendered homes/home.html.erb within layouts/application (3.5ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 9ms (Views: 8.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[35m (3.3ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 00:05:52 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (15.7ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$9aMJHRZSI/SVCqrkKTNS0.jMbVGOF1Q8smjwQLv4v4AetgnwfI3ki"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-20 16:05:52.199892"], ["updated_at", "2018-12-20 16:05:52.199892"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 28ms (ActiveRecord: 16.2ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started GET "/" for 127.0.0.1 at 2018-12-21 00:05:52 +0800
Processing by HomesController#home as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered homes/home.html.erb within layouts/application (26.1ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (2.5ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 31ms (Views: 30.2ms | ActiveRecord: 0.3ms)
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-21 00:05:52 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 11ms (ActiveRecord: 0.7ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 00:05:52 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 00:05:52 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-21 00:05:52 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 00:05:52 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.5ms)
  Rendered layouts/_login_panel.html.erb (1.4ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 5.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 00:05:52 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-21 00:05:52 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 00:05:52 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (3.1ms)
  Rendered layouts/_login_panel.html.erb (1.8ms)
  Rendered layouts/_header.html.erb (2.4ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 8ms (Views: 7.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------
ChatsStateTest: test_delete_chat
--------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 00:05:52 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/chats/8" for 127.0.0.1 at 2018-12-21 00:05:52 +0800
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 00:05:52 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.1ms)
  Rendered homes/home.html.erb within layouts/application (2.9ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 9ms (Views: 7.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 00:05:52 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-21 00:05:52 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 00:05:52 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (3.2ms)
  Rendered homes/home.html.erb within layouts/application (3.8ms)
  Rendered layouts/_login_panel.html.erb (3.6ms)
  Rendered layouts/_header.html.erb (4.6ms)
  Rendered layouts/_content.html.erb (0.4ms)
Completed 200 OK in 12ms (Views: 11.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------
FriendshipStateTest: test_test_show_information_of_friend
---------------------------------------------------------
Started GET "/users/9" for 127.0.0.1 at 2018-12-21 00:05:52 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 9]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 00:05:52 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 5ms (ActiveRecord: 0.2ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 00:05:52 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.5ms)
  Rendered layouts/_login_panel.html.erb (1.2ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 6ms (Views: 5.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
FriendshipStateTest: test_delete_a_friend
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 00:05:52 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/3" for 127.0.0.1 at 2018-12-21 00:05:52 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"3"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 00:05:52 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.3ms)
  Rendered homes/home.html.erb within layouts/application (3.1ms)
  Rendered layouts/_login_panel.html.erb (2.2ms)
  Rendered layouts/_header.html.erb (3.0ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 10ms (Views: 9.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 00:05:52 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-21 00:05:52 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 00:05:52 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.8ms)
  Rendered homes/home.html.erb within layouts/application (3.4ms)
  Rendered layouts/_login_panel.html.erb (1.2ms)
  Rendered layouts/_header.html.erb (2.1ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 9ms (Views: 8.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.5ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.9ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$koCJ80hWaVNztEJ2QekrCOD8MWYY1VX9mQQmZ1OVdUAHqHR2kzU2y"], ["created_at", "2018-12-20 16:05:52.638475"], ["updated_at", "2018-12-20 16:05:52.638475"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (272.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$jVsoKzADUq68GCfaCW3OueWCIho/G.wH/gpX6Jv8VNRfE3YJI2c2e"], ["created_at", "2018-12-20 16:05:52.954184"], ["updated_at", "2018-12-20 16:05:52.954184"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (2.4ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.7ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 04:38:49', '2018-12-21 04:38:49', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 04:38:49', '2018-12-21 04:38:49', 298486374)[0m
  [1m[35m (6.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (8.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$0DqbMxLvVQ8cTJvLwTaks.KTPfiFENjTi86PA5KWisvMOuNV300vW"], ["created_at", "2018-12-21 04:38:50.254419"], ["updated_at", "2018-12-21 04:38:50.254419"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35m (0.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$qqqd1cTyqkn4rWftR.YHuuvwlGUZxxYBmAoJqtRupPreAMbGskUL6"], ["created_at", "2018-12-21 04:38:50.294718"], ["updated_at", "2018-12-21 04:38:50.294718"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (1.6ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 12:38:50 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 92ms (ActiveRecord: 0.4ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------
FriendshipStateTest: test_delete_a_friend
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 12:38:50 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 10ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/3" for 127.0.0.1 at 2018-12-21 12:38:50 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"3"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:38:50 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (25.2ms)
  Rendered homes/home.html.erb within layouts/application (42.7ms)
  Rendered layouts/_login_panel.html.erb (7.0ms)
  Rendered layouts/_header.html.erb (12.7ms)
  Rendered layouts/_content.html.erb (1.3ms)
Completed 200 OK in 121ms (Views: 120.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------
FriendshipStateTest: test_test_show_information_of_friend
---------------------------------------------------------
Started GET "/users/9" for 127.0.0.1 at 2018-12-21 12:38:50 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 9]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.1ms)
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 12:38:50 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:38:50 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (3.0ms)
  Rendered homes/home.html.erb within layouts/application (3.4ms)
  Rendered layouts/_login_panel.html.erb (2.9ms)
  Rendered layouts/_header.html.erb (4.5ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 12ms (Views: 11.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-21 12:38:51 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 18ms (ActiveRecord: 0.6ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:38:51 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.0ms)
  Rendered homes/home.html.erb within layouts/application (1.4ms)
  Rendered layouts/_login_panel.html.erb (2.6ms)
  Rendered layouts/_header.html.erb (3.7ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 10ms (Views: 7.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 12:38:51 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$OQDg3LkUWy27P.2LMKfjgeicg4aJQnRTDkgPmLcGVDFpY73iwLRLi"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-21 04:38:51.091010"], ["updated_at", "2018-12-21 04:38:51.091010"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 10ms (ActiveRecord: 0.8ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started GET "/" for 127.0.0.1 at 2018-12-21 12:38:51 +0800
Processing by HomesController#home as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  Rendered homes/home.html.erb within layouts/application (1.1ms)
  Rendered layouts/_login_panel.html.erb (1.9ms)
  Rendered layouts/_header.html.erb (4.4ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 18ms (Views: 16.6ms | ActiveRecord: 0.1ms)
  [1m[36m (1.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-21 12:38:51 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 14ms (ActiveRecord: 0.4ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UsersControllerTest: test_should_show_user
------------------------------------------
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by UsersController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UsersControllerTest: test_should_get_index
------------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by UsersController#index as HTML
Completed 500 Internal Server Error in 50ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{}, "id"=>"980190962"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
Completed 400 Bad Request in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#create as HTML
  Parameters: {"user"=>{}}
Completed 400 Bad Request in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[36mUser Load (7.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
Processing by UsersController#new as HTML
Completed 500 Internal Server Error in 86ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.7ms)[0m  DELETE FROM "chats_users" WHERE "chats_users"."user_id" = ?  [["user_id", 980190962]]
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users?new=false
Completed 302 Found in 71ms (ActiveRecord: 3.5ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UsersControllerTest: test_should_get_edit
-----------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by UsersController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
Completed 500 Internal Server Error in 100ms (ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 12:38:51 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 15ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:38:51 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.6ms)
  Rendered homes/home.html.erb within layouts/application (2.2ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.3ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 7ms (Views: 5.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 12:38:51 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:38:51 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.5ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.4ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 12:38:51 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 4ms (ActiveRecord: 0.3ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-21 12:38:51 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:38:51 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.4ms)
  Rendered layouts/_login_panel.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (1.1ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 5ms (Views: 4.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 12:38:51 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 12:38:51 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:38:51 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.0ms)
  Rendered homes/home.html.erb within layouts/application (1.3ms)
  Rendered layouts/_login_panel.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (1.1ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 4ms (Views: 3.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 12:38:51 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:38:51 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.4ms)
  Rendered homes/home.html.erb within layouts/application (1.9ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 5.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 12:38:51 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-21 12:38:51 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:38:51 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.6ms)
  Rendered homes/home.html.erb within layouts/application (2.0ms)
  Rendered layouts/_login_panel.html.erb (1.2ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 6ms (Views: 5.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 12:38:51 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-21 12:38:51 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:38:51 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.3ms)
  Rendered homes/home.html.erb within layouts/application (1.6ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.2ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------
ChatsStateTest: test_delete_chat
--------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 12:38:51 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/chats/8" for 127.0.0.1 at 2018-12-21 12:38:51 +0800
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:38:51 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.6ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.2ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 12:38:51 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-21 12:38:51 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:38:51 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (0.9ms)
  Rendered homes/home.html.erb within layouts/application (1.3ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (1.6ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (15.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  begin transaction
  [1m[36mFixture Delete (4.6ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.8ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 04:43:57', '2018-12-21 04:43:57', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 04:43:57', '2018-12-21 04:43:57', 298486374)[0m
  [1m[35m (6.9ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 12:43:57 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 52ms (ActiveRecord: 0.5ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 12:43:57 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 9ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:43:57 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (23.5ms)
  Rendered homes/home.html.erb within layouts/application (47.4ms)
  Rendered layouts/_login_panel.html.erb (12.2ms)
  Rendered layouts/_header.html.erb (19.7ms)
  Rendered layouts/_content.html.erb (2.1ms)
Completed 200 OK in 156ms (Views: 154.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 12:43:58 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 12:43:58 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:43:58 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.1ms)
  Rendered homes/home.html.erb within layouts/application (2.9ms)
  Rendered layouts/_login_panel.html.erb (2.1ms)
  Rendered layouts/_header.html.erb (3.2ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 10ms (Views: 9.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 12:43:58 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:43:58 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (4.9ms)
  Rendered homes/home.html.erb within layouts/application (5.9ms)
  Rendered layouts/_login_panel.html.erb (3.1ms)
  Rendered layouts/_header.html.erb (4.4ms)
  Rendered layouts/_content.html.erb (0.4ms)
Completed 200 OK in 15ms (Views: 14.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 12:43:58 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-21 12:43:58 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:43:58 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.7ms)
  Rendered homes/home.html.erb within layouts/application (2.1ms)
  Rendered layouts/_login_panel.html.erb (4.2ms)
  Rendered layouts/_header.html.erb (8.8ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 17ms (Views: 16.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------
ChatsStateTest: test_delete_chat
--------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 12:43:58 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 6ms (ActiveRecord: 0.0ms)
Started DELETE "/chats/8" for 127.0.0.1 at 2018-12-21 12:43:58 +0800
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:43:58 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (19.1ms)
  Rendered homes/home.html.erb within layouts/application (19.9ms)
  Rendered layouts/_login_panel.html.erb (2.2ms)
  Rendered layouts/_header.html.erb (2.9ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 29ms (Views: 27.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.5ms)[0m  begin transaction
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 12:43:58 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-21 12:43:58 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:43:58 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (4.1ms)
  Rendered homes/home.html.erb within layouts/application (5.0ms)
  Rendered layouts/_login_panel.html.erb (2.4ms)
  Rendered layouts/_header.html.erb (4.0ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 20ms (Views: 13.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 12:43:58 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-21 12:43:58 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:43:58 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (5.0ms)
  Rendered homes/home.html.erb within layouts/application (5.6ms)
  Rendered layouts/_login_panel.html.erb (2.2ms)
  Rendered layouts/_header.html.erb (3.2ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 16ms (Views: 14.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
---------------------------------------------------------
FriendshipStateTest: test_test_show_information_of_friend
---------------------------------------------------------
Started GET "/users/9" for 127.0.0.1 at 2018-12-21 12:43:58 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 9]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 9ms (ActiveRecord: 0.4ms)
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 12:43:58 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:43:58 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (4.3ms)
  Rendered homes/home.html.erb within layouts/application (4.8ms)
  Rendered layouts/_login_panel.html.erb (6.3ms)
  Rendered layouts/_header.html.erb (7.0ms)
  Rendered layouts/_content.html.erb (2.1ms)
Completed 200 OK in 19ms (Views: 17.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
FriendshipStateTest: test_delete_a_friend
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 12:43:58 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/3" for 127.0.0.1 at 2018-12-21 12:43:58 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"3"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:43:58 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (14.7ms)
  Rendered homes/home.html.erb within layouts/application (15.2ms)
  Rendered layouts/_login_panel.html.erb (2.2ms)
  Rendered layouts/_header.html.erb (3.0ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 25ms (Views: 23.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "sex", "password_digest", "phonenumber", "role", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$5meO.l1.KhYYLIcRwotCZeT6f.3s4CoqKaUM.x8pa3SdVQBlob6kG"], ["phonenumber", ""], ["role", 1], ["status", "user"], ["created_at", "2018-12-21 04:43:58.882178"], ["updated_at", "2018-12-21 04:43:58.882178"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 55ms (ActiveRecord: 1.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.9ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.3ms)[0m  DELETE FROM "chats_users" WHERE "chats_users"."user_id" = ?  [["user_id", 980190962]]
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users?new=false
Completed 302 Found in 169ms (ActiveRecord: 3.3ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[35mUser Load (1.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"980190962"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user1@test.com') AND "users"."id" != 980190962) LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  UPDATE "users" SET "name" = ?, "email" = ?, "sex" = ?, "password_digest" = ?, "phonenumber" = ?, "updated_at" = ? WHERE "users"."id" = ?  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$5B8w95U7xOFAONwNN651Te2RHJ26a8r4wK3bJSilN82jG75FHPnL6"], ["phonenumber", "123456677777"], ["updated_at", "2018-12-21 04:43:59.132634"], ["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 21ms (ActiveRecord: 1.4ms)
  [1m[35m (6.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 12:43:59 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-21 12:43:59 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:43:59 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.6ms)
  Rendered homes/home.html.erb within layouts/application (2.1ms)
  Rendered layouts/_login_panel.html.erb (7.9ms)
  Rendered layouts/_header.html.erb (9.1ms)
  Rendered layouts/_content.html.erb (0.4ms)
Completed 200 OK in 18ms (Views: 16.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 12:43:59 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 1998ms (ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  begin transaction
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-21 12:44:01 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 22ms (ActiveRecord: 0.7ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:44:01 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.3ms)
  Rendered homes/home.html.erb within layouts/application (3.1ms)
  Rendered layouts/_login_panel.html.erb (1.8ms)
  Rendered layouts/_header.html.erb (2.7ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 11ms (Views: 9.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (1.6ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 12:44:01 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$LDier.qnDjPBkr6galyp8uJqFc18j7r10KIfXnZvCeKFeaL3MEAM2"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-21 04:44:01.385376"], ["updated_at", "2018-12-21 04:44:01.385376"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 51ms (ActiveRecord: 1.5ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started GET "/" for 127.0.0.1 at 2018-12-21 12:44:01 +0800
Processing by HomesController#home as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  Rendered homes/home.html.erb within layouts/application (1.5ms)
  Rendered layouts/_login_panel.html.erb (2.2ms)
  Rendered layouts/_header.html.erb (4.4ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 11ms (Views: 9.7ms | ActiveRecord: 0.1ms)
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$VNl6HDDfQgtvZnA3fZ185.dAh6FnesRPC3AjVX99vRfQFOnuZ/.ny"], ["created_at", "2018-12-21 04:44:01.459118"], ["updated_at", "2018-12-21 04:44:01.459118"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (4.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$Ukj8DzP5TJhet6w5Or7U2udJhl.Dy2kD73X06z1e1YqjtN31nRrU6"], ["created_at", "2018-12-21 04:44:01.680144"], ["updated_at", "2018-12-21 04:44:01.680144"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36m (1.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.4ms)[0m  begin transaction
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 12:44:01 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 5ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:44:01 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (19.5ms)
  Rendered homes/home.html.erb within layouts/application (20.2ms)
  Rendered layouts/_login_panel.html.erb (2.0ms)
  Rendered layouts/_header.html.erb (3.7ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 29ms (Views: 28.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (1.0ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (5.0ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 04:46:08', '2018-12-21 04:46:08', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 04:46:08', '2018-12-21 04:46:08', 298486374)[0m
  [1m[35mFixture Delete (1.7ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 04:46:08', '2018-12-21 04:46:08', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 04:46:08', '2018-12-21 04:46:08', 298486374)
  [1m[36m (1.4ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 12:46:08 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 68ms (ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("name", "email", "sex", "password_digest", "phonenumber", "role", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$cVYLtZkENN.uHwmet4r.kOvT/Kx9oiqH0eQXKY.p4vvjhQzXU6sZa"], ["phonenumber", ""], ["role", 1], ["status", "user"], ["created_at", "2018-12-21 04:46:09.341192"], ["updated_at", "2018-12-21 04:46:09.341192"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 82ms (ActiveRecord: 0.9ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "chats_users" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 980190962]]
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "users" WHERE "users"."id" = ?  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users?new=false
Completed 302 Found in 75ms (ActiveRecord: 1.6ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"980190962"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user1@test.com') AND "users"."id" != 980190962) LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "users" SET "name" = ?, "email" = ?, "sex" = ?, "password_digest" = ?, "phonenumber" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$Ih1OYeaEc0hnYiqGCbGSz.eB5QuS/Tby/YJjfHhJxcyzmsykXuYre"], ["phonenumber", "123456677777"], ["updated_at", "2018-12-21 04:46:09.479506"], ["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 19ms (ActiveRecord: 0.9ms)
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 12:46:09 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 6ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:46:09 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (21.5ms)
  Rendered homes/home.html.erb within layouts/application (44.2ms)
  Rendered layouts/_login_panel.html.erb (6.8ms)
  Rendered layouts/_header.html.erb (11.4ms)
  Rendered layouts/_content.html.erb (1.0ms)
Completed 200 OK in 111ms (Views: 110.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 12:46:09 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 12:46:09 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:46:09 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.5ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.4ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------
FriendshipStateTest: test_delete_a_friend
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 12:46:09 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/3" for 127.0.0.1 at 2018-12-21 12:46:09 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"3"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:46:09 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (16.7ms)
  Rendered homes/home.html.erb within layouts/application (17.4ms)
  Rendered layouts/_login_panel.html.erb (1.5ms)
  Rendered layouts/_header.html.erb (2.2ms)
  Rendered layouts/_content.html.erb (0.4ms)
Completed 200 OK in 23ms (Views: 22.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------------------
FriendshipStateTest: test_test_show_information_of_friend
---------------------------------------------------------
Started GET "/users/9" for 127.0.0.1 at 2018-12-21 12:46:09 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 9]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.1ms)
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 12:46:09 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:46:09 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.9ms)
  Rendered homes/home.html.erb within layouts/application (2.6ms)
  Rendered layouts/_login_panel.html.erb (2.0ms)
  Rendered layouts/_header.html.erb (3.2ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 11ms (Views: 8.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-21 12:46:09 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 954ms (ActiveRecord: 0.5ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 12:46:10 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$cJuc/TWU5J1w2FL8JM/GC.zOuokL.CUixHAd2txPgI23JPdhnyIq6"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-21 04:46:10.778356"], ["updated_at", "2018-12-21 04:46:10.778356"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 12ms (ActiveRecord: 0.9ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started GET "/" for 127.0.0.1 at 2018-12-21 12:46:10 +0800
Processing by HomesController#home as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  Rendered homes/home.html.erb within layouts/application (0.7ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (2.1ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 17ms (Views: 14.7ms | ActiveRecord: 0.1ms)
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-21 12:46:10 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.7ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 10ms (ActiveRecord: 1.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:46:10 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.0ms)
  Rendered homes/home.html.erb within layouts/application (2.4ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.1ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 12:46:10 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-21 12:46:10 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:46:10 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (0.9ms)
  Rendered homes/home.html.erb within layouts/application (1.3ms)
  Rendered layouts/_login_panel.html.erb (1.4ms)
  Rendered layouts/_header.html.erb (2.3ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 12:46:10 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-21 12:46:10 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:46:10 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.7ms)
  Rendered homes/home.html.erb within layouts/application (2.4ms)
  Rendered layouts/_login_panel.html.erb (1.2ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 7ms (Views: 6.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------
ChatsStateTest: test_delete_chat
--------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 12:46:10 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/chats/8" for 127.0.0.1 at 2018-12-21 12:46:10 +0800
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:46:10 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (0.9ms)
  Rendered homes/home.html.erb within layouts/application (1.3ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.4ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 12:46:10 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-21 12:46:10 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:46:10 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.8ms)
  Rendered homes/home.html.erb within layouts/application (2.2ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 6ms (Views: 5.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 12:46:10 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:46:10 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.6ms)
  Rendered homes/home.html.erb within layouts/application (3.0ms)
  Rendered layouts/_login_panel.html.erb (1.2ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 8ms (Views: 6.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
ChatsControllerTest: test_should_get_index
------------------------------------------
  [1m[35mChat Load (0.3ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by ChatsController#index as HTML
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
ChatsControllerTest: test_should_destroy_chat
---------------------------------------------
  [1m[36mChat Load (0.3ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "chats"
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsControllerTest: test_should_create_chat
--------------------------------------------
  [1m[35mChat Load (0.3ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "chats"
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsControllerTest: test_should_update_chat
--------------------------------------------
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
Processing by ChatsController#update as HTML
  Parameters: {"chat"=>{}, "id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------
ChatsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[35mChat Load (0.5ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------
ChatsControllerTest: test_should_get_new
----------------------------------------
  [1m[36mChat Load (0.2ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------------------
ChatsControllerTest: test_should_show_chat
------------------------------------------
  [1m[35mChat Load (0.4ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 12:46:11 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.1ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-21 12:46:11 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:46:11 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.0ms)
  Rendered homes/home.html.erb within layouts/application (1.4ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.1ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 12:46:11 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:46:11 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.3ms)
  Rendered homes/home.html.erb within layouts/application (1.6ms)
  Rendered layouts/_login_panel.html.erb (1.9ms)
  Rendered layouts/_header.html.erb (2.8ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 7ms (Views: 6.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$j9mR/8j.TTfaMVKmmrQa7O2GKRkYI4YfOuxmx/Qk.tzIO40FJdbt."], ["created_at", "2018-12-21 04:46:11.732908"], ["updated_at", "2018-12-21 04:46:11.732908"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35m (1.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$ycWR81ifF60HKk7.sO3Xken1PA6PQkHusPd5AMwiCfUMl7VosRGOi"], ["created_at", "2018-12-21 04:46:11.773770"], ["updated_at", "2018-12-21 04:46:11.773770"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (1.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (6.9ms)[0m  begin transaction
  [1m[36mFixture Delete (1.1ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.7ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 04:50:47', '2018-12-21 04:50:47', 980190962)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 04:50:47', '2018-12-21 04:50:47', 298486374)[0m
  [1m[35mFixture Delete (1.3ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 04:50:47', '2018-12-21 04:50:47', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 04:50:47', '2018-12-21 04:50:47', 298486374)
  [1m[36m (3.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$s6rYtb40BHgFdY03XWFflewAwFO2x5TqHQ/xnjt83kOW.Qf9qJsY."], ["created_at", "2018-12-21 04:50:48.969170"], ["updated_at", "2018-12-21 04:50:48.969170"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$Wg0biyn8eJ/Fyh9A79vbaOovDmFzTd3tvsHrGLwB8MD.LnoyXeHPu"], ["created_at", "2018-12-21 04:50:49.000265"], ["updated_at", "2018-12-21 04:50:49.000265"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.5ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("name", "email", "sex", "password_digest", "phonenumber", "role", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$ur05.hncvxQxkwP5VagxUOPSNeSd0fpfHC4J7QfxcRkqjjvPvcF.q"], ["phonenumber", ""], ["role", 1], ["status", "user"], ["created_at", "2018-12-21 04:50:49.152179"], ["updated_at", "2018-12-21 04:50:49.152179"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 11ms (ActiveRecord: 1.4ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "chats_users" WHERE "chats_users"."user_id" = ?  [["user_id", 980190962]]
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users?new=false
Completed 302 Found in 52ms (ActiveRecord: 1.4ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user1@test.com') AND "users"."id" != 980190962) LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  UPDATE "users" SET "name" = ?, "email" = ?, "sex" = ?, "password_digest" = ?, "phonenumber" = ?, "updated_at" = ? WHERE "users"."id" = ?  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$M9AJ4W4HhCmVnBk4aQXuluJcWU/sVAqPtAkQ66X5yN8k4GYKXTYeu"], ["phonenumber", "123456677777"], ["updated_at", "2018-12-21 04:50:49.238151"], ["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 14ms (ActiveRecord: 1.1ms)
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 12:50:49 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 30ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-21 12:50:49 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:50:49 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (16.7ms)
  Rendered homes/home.html.erb within layouts/application (28.8ms)
  Rendered layouts/_login_panel.html.erb (17.3ms)
  Rendered layouts/_header.html.erb (26.1ms)
  Rendered layouts/_content.html.erb (1.2ms)
Completed 200 OK in 107ms (Views: 105.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 12:50:49 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-21 12:50:49 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:50:49 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.5ms)
  Rendered layouts/_login_panel.html.erb (1.4ms)
  Rendered layouts/_header.html.erb (2.4ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 7ms (Views: 6.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------
ChatsStateTest: test_delete_chat
--------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 12:50:49 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/chats/8" for 127.0.0.1 at 2018-12-21 12:50:49 +0800
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:50:49 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (4.5ms)
  Rendered layouts/_login_panel.html.erb (1.2ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 9ms (Views: 8.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 12:50:49 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-21 12:50:49 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:50:49 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.4ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.2ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 12:50:49 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-21 12:50:49 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 9ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:50:49 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.6ms)
  Rendered homes/home.html.erb within layouts/application (2.1ms)
  Rendered layouts/_login_panel.html.erb (1.8ms)
  Rendered layouts/_header.html.erb (2.9ms)
  Rendered layouts/_content.html.erb (1.1ms)
Completed 200 OK in 9ms (Views: 8.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 12:50:49 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 12:50:49 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:50:49 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.8ms)
  Rendered homes/home.html.erb within layouts/application (2.3ms)
  Rendered layouts/_login_panel.html.erb (1.3ms)
  Rendered layouts/_header.html.erb (2.0ms)
  Rendered layouts/_content.html.erb (1.3ms)
Completed 200 OK in 11ms (Views: 9.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 12:50:49 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:50:49 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.9ms)
  Rendered homes/home.html.erb within layouts/application (2.5ms)
  Rendered layouts/_login_panel.html.erb (2.1ms)
  Rendered layouts/_header.html.erb (4.1ms)
  Rendered layouts/_content.html.erb (0.4ms)
Completed 200 OK in 17ms (Views: 16.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 12:50:49 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 7ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:50:49 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.3ms)
  Rendered homes/home.html.erb within layouts/application (3.1ms)
  Rendered layouts/_login_panel.html.erb (6.2ms)
  Rendered layouts/_header.html.erb (7.1ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 14ms (Views: 13.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsControllerTest: test_should_create_chat
--------------------------------------------
  [1m[35mChat Load (0.2ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "chats"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------
ChatsControllerTest: test_should_show_chat
------------------------------------------
  [1m[36mChat Load (1.0ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsControllerTest: test_should_update_chat
--------------------------------------------
  [1m[35mChat Load (0.2ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by ChatsController#update as HTML
  Parameters: {"chat"=>{}, "id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
ChatsControllerTest: test_should_destroy_chat
---------------------------------------------
  [1m[36mChat Load (0.6ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "chats"
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.5ms)[0m  [1mbegin transaction[0m
-----------------------------------------
ChatsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[35mChat Load (0.2ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 12:50:50 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 2ms (ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 12:50:50 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 18ms (ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-21 12:50:50 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 10ms (ActiveRecord: 0.4ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:50:50 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.9ms)
  Rendered homes/home.html.erb within layouts/application (2.5ms)
  Rendered layouts/_login_panel.html.erb (1.6ms)
  Rendered layouts/_header.html.erb (2.4ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 8ms (Views: 7.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 12:50:50 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (4.1ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$AODRU6MV1ngsS85.wvrJduChGDPciyc93WhTarhxJYvtVBZShTtl."], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-21 04:50:50.623829"], ["updated_at", "2018-12-21 04:50:50.623829"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 23ms (ActiveRecord: 4.8ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started GET "/" for 127.0.0.1 at 2018-12-21 12:50:50 +0800
Processing by HomesController#home as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  Rendered homes/home.html.erb within layouts/application (1.4ms)
  Rendered layouts/_login_panel.html.erb (1.6ms)
  Rendered layouts/_header.html.erb (4.0ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 10ms (Views: 8.4ms | ActiveRecord: 0.2ms)
  [1m[36m (1.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 12:50:50 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:50:50 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.6ms)
  Rendered homes/home.html.erb within layouts/application (2.0ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (3.9ms)
Completed 200 OK in 12ms (Views: 11.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------
FriendshipStateTest: test_delete_a_friend
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 12:50:50 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/3" for 127.0.0.1 at 2018-12-21 12:50:50 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"3"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:50:50 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (3.2ms)
  Rendered homes/home.html.erb within layouts/application (4.0ms)
  Rendered layouts/_login_panel.html.erb (2.0ms)
  Rendered layouts/_header.html.erb (3.1ms)
  Rendered layouts/_content.html.erb (0.4ms)
Completed 200 OK in 12ms (Views: 10.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------
FriendshipStateTest: test_test_show_information_of_friend
---------------------------------------------------------
Started GET "/users/9" for 127.0.0.1 at 2018-12-21 12:50:50 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 9]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 12:50:50 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:50:50 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.4ms)
  Rendered layouts/_login_panel.html.erb (1.3ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 04:51:46', '2018-12-21 04:51:46', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 04:51:46', '2018-12-21 04:51:46', 298486374)[0m
  [1m[35mFixture Delete (1.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 04:51:46', '2018-12-21 04:51:46', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 04:51:46', '2018-12-21 04:51:46', 298486374)
  [1m[36m (4.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "sex", "password_digest", "phonenumber", "role", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$YoIowLaXEcRMFXK8X4U9EONpvJNvd2wD4gVtCTp6.UsQCzUydmxCG"], ["phonenumber", ""], ["role", 1], ["status", "user"], ["created_at", "2018-12-21 04:51:47.218337"], ["updated_at", "2018-12-21 04:51:47.218337"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 76ms (ActiveRecord: 1.0ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (2.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "chats_users" WHERE "chats_users"."user_id" = ?  [["user_id", 980190962]]
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users?new=false
Completed 302 Found in 60ms (ActiveRecord: 1.7ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"980190962"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user1@test.com') AND "users"."id" != 980190962) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  UPDATE "users" SET "name" = ?, "email" = ?, "sex" = ?, "password_digest" = ?, "phonenumber" = ?, "updated_at" = ? WHERE "users"."id" = ?  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$bMEbR3Oq.Bfad6NLzltmYuvqOHaIIn2fH4SIMk7ZCuqUX73DjXE9O"], ["phonenumber", "123456677777"], ["updated_at", "2018-12-21 04:51:47.342867"], ["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 35ms (ActiveRecord: 1.4ms)
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------
ChatsStateTest: test_delete_chat
--------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 12:51:47 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 31ms (ActiveRecord: 0.0ms)
Started DELETE "/chats/8" for 127.0.0.1 at 2018-12-21 12:51:47 +0800
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:51:47 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (302.8ms)
  Rendered homes/home.html.erb within layouts/application (327.8ms)
  Rendered layouts/_login_panel.html.erb (11.9ms)
  Rendered layouts/_header.html.erb (17.5ms)
  Rendered layouts/_content.html.erb (1.2ms)
Completed 200 OK in 396ms (Views: 395.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 12:51:47 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-21 12:51:47 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:51:47 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.4ms)
  Rendered homes/home.html.erb within layouts/application (1.8ms)
  Rendered layouts/_login_panel.html.erb (1.3ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 6ms (Views: 5.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 12:51:47 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-21 12:51:47 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:51:48 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.3ms)
  Rendered homes/home.html.erb within layouts/application (1.8ms)
  Rendered layouts/_login_panel.html.erb (2.1ms)
  Rendered layouts/_header.html.erb (3.3ms)
  Rendered layouts/_content.html.erb (3.3ms)
Completed 200 OK in 11ms (Views: 10.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 12:51:48 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-21 12:51:48 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:51:48 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.3ms)
  Rendered homes/home.html.erb within layouts/application (1.8ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 6ms (Views: 5.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 12:51:48 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:51:48 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.6ms)
  Rendered homes/home.html.erb within layouts/application (2.2ms)
  Rendered layouts/_login_panel.html.erb (2.9ms)
  Rendered layouts/_header.html.erb (3.4ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 9ms (Views: 7.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 12:51:48 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 2ms (ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
FriendshipStateTest: test_delete_a_friend
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 12:51:48 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/3" for 127.0.0.1 at 2018-12-21 12:51:48 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"3"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:51:48 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.0ms)
  Rendered homes/home.html.erb within layouts/application (1.4ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.2ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 3.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------------------
FriendshipStateTest: test_test_show_information_of_friend
---------------------------------------------------------
Started GET "/users/9" for 127.0.0.1 at 2018-12-21 12:51:48 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 9]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 12:51:48 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:51:48 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.9ms)
  Rendered homes/home.html.erb within layouts/application (2.4ms)
  Rendered layouts/_login_panel.html.erb (4.4ms)
  Rendered layouts/_header.html.erb (4.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 11ms (Views: 9.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 12:51:48 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:51:48 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.0ms)
  Rendered homes/home.html.erb within layouts/application (1.3ms)
  Rendered layouts/_login_panel.html.erb (1.8ms)
  Rendered layouts/_header.html.erb (2.3ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 6ms (Views: 5.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 12:51:48 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 12:51:48 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:51:48 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.4ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.2ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 4ms (Views: 3.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-21 12:51:48 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 778ms (ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 12:51:49 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$f32AFGJd8T8VdVFetweFaOt/7FRVTc6pPZtCB7oPDfnm2OAd1Ayt2"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-21 04:51:49.048761"], ["updated_at", "2018-12-21 04:51:49.048761"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 9ms (ActiveRecord: 0.8ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started GET "/" for 127.0.0.1 at 2018-12-21 12:51:49 +0800
Processing by HomesController#home as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  Rendered homes/home.html.erb within layouts/application (0.9ms)
  Rendered layouts/_login_panel.html.erb (1.3ms)
  Rendered layouts/_header.html.erb (2.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 7ms (Views: 5.6ms | ActiveRecord: 0.2ms)
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-21 12:51:49 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 10ms (ActiveRecord: 0.5ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:51:49 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.5ms)
  Rendered layouts/_login_panel.html.erb (2.0ms)
  Rendered layouts/_header.html.erb (6.2ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 10ms (Views: 9.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 12:51:49 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:51:49 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.3ms)
  Rendered homes/home.html.erb within layouts/application (1.7ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.2ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 5ms (Views: 4.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 12:51:49 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-21 12:51:49 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:51:49 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.4ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.1ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$x4gi2VRDGdDxUoJXgenP..iRkH88vKpbsRcdMf1zbowSYU5vrk1vS"], ["created_at", "2018-12-21 04:51:49.183060"], ["updated_at", "2018-12-21 04:51:49.183060"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$0Ms0LE8.WApFjeJUnqxUKuah7He0NiWnFKXAzuG8RKroOIWsWqBmK"], ["created_at", "2018-12-21 04:51:49.206766"], ["updated_at", "2018-12-21 04:51:49.206766"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35m (1.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------
ChatsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[35mChat Load (0.3ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------
ChatsControllerTest: test_should_create_chat
--------------------------------------------
  [1m[36mChat Load (0.2ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "chats"
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
ChatsControllerTest: test_should_destroy_chat
---------------------------------------------
  [1m[35mChat Load (0.3ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "chats"
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
ChatsControllerTest: test_should_show_chat
------------------------------------------
  [1m[36mChat Load (0.2ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsControllerTest: test_should_update_chat
--------------------------------------------
  [1m[35mChat Load (0.5ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by ChatsController#update as HTML
  Parameters: {"chat"=>{}, "id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 04:52:00', '2018-12-21 04:52:00', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 04:52:00', '2018-12-21 04:52:00', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 04:52:00', '2018-12-21 04:52:00', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 04:52:00', '2018-12-21 04:52:00', 298486374)
  [1m[36m (1.4ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}}
  [1m[36m (0.7ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "sex", "password_digest", "phonenumber", "role", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$DvxnjVZaQMrwv8zu71bdX.e04vAIpcZoI9/S1dWxWIt1dwo6ObeXe"], ["phonenumber", ""], ["role", 1], ["status", "user"], ["created_at", "2018-12-21 04:52:00.932796"], ["updated_at", "2018-12-21 04:52:00.932796"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 63ms (ActiveRecord: 1.4ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "chats_users" WHERE "chats_users"."user_id" = ?  [["user_id", 980190962]]
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users?new=false
Completed 302 Found in 56ms (ActiveRecord: 1.4ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"980190962"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user1@test.com') AND "users"."id" != 980190962) LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  UPDATE "users" SET "name" = ?, "email" = ?, "sex" = ?, "password_digest" = ?, "phonenumber" = ?, "updated_at" = ? WHERE "users"."id" = ?  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$XkxB/9LWZ9.O5PcvwVCP1uLHhwbrkf0yBoxLyQHP./w2Bl7qB9b1q"], ["phonenumber", "123456677777"], ["updated_at", "2018-12-21 04:52:01.026272"], ["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 14ms (ActiveRecord: 1.0ms)
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 12:52:01 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 19ms (ActiveRecord: 0.1ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-21 12:52:01 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:52:01 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (14.3ms)
  Rendered homes/home.html.erb within layouts/application (34.5ms)
  Rendered layouts/_login_panel.html.erb (7.0ms)
  Rendered layouts/_header.html.erb (12.1ms)
  Rendered layouts/_content.html.erb (1.2ms)
Completed 200 OK in 111ms (Views: 109.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
-----------------------------------------
ChatsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[35mChat Load (0.3ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
ChatsControllerTest: test_should_show_chat
------------------------------------------
  [1m[36mChat Load (0.2ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
---------------------------------------------
ChatsControllerTest: test_should_destroy_chat
---------------------------------------------
  [1m[35mChat Load (0.3ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "chats"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsControllerTest: test_should_create_chat
--------------------------------------------
  [1m[36mChat Load (0.2ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "chats"
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 0ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsControllerTest: test_should_update_chat
--------------------------------------------
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by ChatsController#update as HTML
  Parameters: {"chat"=>{}, "id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 0ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------
ChatsStateTest: test_delete_chat
--------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 12:52:01 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/chats/8" for 127.0.0.1 at 2018-12-21 12:52:01 +0800
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:52:01 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.9ms)
  Rendered homes/home.html.erb within layouts/application (2.3ms)
  Rendered layouts/_login_panel.html.erb (1.6ms)
  Rendered layouts/_header.html.erb (2.6ms)
  Rendered layouts/_content.html.erb (0.4ms)
Completed 200 OK in 16ms (Views: 15.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 12:52:01 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-21 12:52:01 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:52:01 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.3ms)
  Rendered homes/home.html.erb within layouts/application (8.5ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 13ms (Views: 12.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 12:52:01 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-21 12:52:01 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:52:01 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.0ms)
  Rendered homes/home.html.erb within layouts/application (1.3ms)
  Rendered layouts/_login_panel.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (1.1ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 4ms (Views: 3.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 12:52:01 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-21 12:52:01 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:52:01 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (0.9ms)
  Rendered homes/home.html.erb within layouts/application (1.2ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.4ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 12:52:01 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (4.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 7ms (ActiveRecord: 4.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$njb4HBaJWAUyB5hxyLfure2CqlUQT9rqPp4efWOmFbYlRCAuMhl/K"], ["created_at", "2018-12-21 04:52:02.678247"], ["updated_at", "2018-12-21 04:52:02.678247"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (1.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$yX8x.i7386weQQbUBX5SeuldXWOBE3vEQN9QbYEjZ6ZlxUmSRnU6u"], ["created_at", "2018-12-21 04:52:02.705463"], ["updated_at", "2018-12-21 04:52:02.705463"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.4ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 12:52:02 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:52:02 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (3.9ms)
  Rendered homes/home.html.erb within layouts/application (4.4ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.4ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 9ms (Views: 7.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 12:52:02 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 12:52:02 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:52:02 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.0ms)
  Rendered homes/home.html.erb within layouts/application (1.3ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (4.7ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 8ms (Views: 7.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
FriendshipStateTest: test_delete_a_friend
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 12:52:02 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/3" for 127.0.0.1 at 2018-12-21 12:52:02 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"3"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:52:02 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.8ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.2ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 4.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------
FriendshipStateTest: test_test_show_information_of_friend
---------------------------------------------------------
Started GET "/users/9" for 127.0.0.1 at 2018-12-21 12:52:02 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 9]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 12:52:02 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:52:02 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.7ms)
  Rendered homes/home.html.erb within layouts/application (3.6ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 9ms (Views: 7.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 12:52:02 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:52:02 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.4ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.3ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 12:52:02 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:52:02 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.4ms)
  Rendered homes/home.html.erb within layouts/application (1.7ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.2ms)
  Rendered layouts/_content.html.erb (14.0ms)
Completed 200 OK in 19ms (Views: 18.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[35m (1.3ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 12:52:02 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 15ms (ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-21 12:52:02 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$znI6OhX20BNusZEkIfVOA.O2NxUB.wWjBBBzuTrn6h9VYGAuawDIu"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-21 04:52:02.972393"], ["updated_at", "2018-12-21 04:52:02.972393"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 13ms (ActiveRecord: 1.5ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Started GET "/" for 127.0.0.1 at 2018-12-21 12:52:02 +0800
Processing by HomesController#home as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  Rendered homes/home.html.erb within layouts/application (0.6ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (3.0ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 6ms (Views: 5.2ms | ActiveRecord: 0.1ms)
  [1m[35m (0.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-21 12:52:03 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 11ms (ActiveRecord: 0.6ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:52:03 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.4ms)
  Rendered homes/home.html.erb within layouts/application (2.0ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.1ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 04:52:11', '2018-12-21 04:52:11', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 04:52:11', '2018-12-21 04:52:11', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 04:52:11', '2018-12-21 04:52:11', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 04:52:11', '2018-12-21 04:52:11', 298486374)
  [1m[36m (1.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
FriendshipStateTest: test_delete_a_friend
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 12:52:11 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 29ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/3" for 127.0.0.1 at 2018-12-21 12:52:11 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"3"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:52:11 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (17.1ms)
  Rendered homes/home.html.erb within layouts/application (30.0ms)
  Rendered layouts/_login_panel.html.erb (19.6ms)
  Rendered layouts/_header.html.erb (25.1ms)
  Rendered layouts/_content.html.erb (2.3ms)
Completed 200 OK in 122ms (Views: 120.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------
FriendshipStateTest: test_test_show_information_of_friend
---------------------------------------------------------
Started GET "/users/9" for 127.0.0.1 at 2018-12-21 12:52:11 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 9]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 21ms (ActiveRecord: 0.3ms)
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 12:52:11 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:52:11 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.4ms)
  Rendered homes/home.html.erb within layouts/application (1.9ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (2.2ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 11ms (Views: 10.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsControllerTest: test_should_create_chat
--------------------------------------------
  [1m[36mChat Load (0.3ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "chats"
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
ChatsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[35mChat Load (0.3ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------
ChatsControllerTest: test_should_show_chat
------------------------------------------
  [1m[36mChat Load (0.2ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
ChatsControllerTest: test_should_destroy_chat
---------------------------------------------
  [1m[35mChat Load (0.2ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "chats"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsControllerTest: test_should_update_chat
--------------------------------------------
  [1m[36mChat Load (0.2ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
Processing by ChatsController#update as HTML
  Parameters: {"chat"=>{}, "id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 12:52:11 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:52:11 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.9ms)
  Rendered homes/home.html.erb within layouts/application (3.2ms)
  Rendered layouts/_login_panel.html.erb (3.4ms)
  Rendered layouts/_header.html.erb (4.4ms)
  Rendered layouts/_content.html.erb (0.4ms)
Completed 200 OK in 19ms (Views: 17.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$fmThhzym2YFdf03CajQU4ekEaxC623OLiDZj.sa11r2Mp8PTq2bTe"], ["created_at", "2018-12-21 04:52:12.817001"], ["updated_at", "2018-12-21 04:52:12.817001"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (1.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$EiD/Ru52yoNBz7j01kscBOQT3ok3PXKrO9HWepKhzILTYK1/HVyh6"], ["created_at", "2018-12-21 04:52:12.892146"], ["updated_at", "2018-12-21 04:52:12.892146"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}}
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("name", "email", "sex", "password_digest", "phonenumber", "role", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$.EZH9K7f9YzfcaYkD8sFXukACbU8kPXBgIt4/K3vJU3NvHbEw5oWW"], ["phonenumber", ""], ["role", 1], ["status", "user"], ["created_at", "2018-12-21 04:52:12.919353"], ["updated_at", "2018-12-21 04:52:12.919353"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 11ms (ActiveRecord: 1.4ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "chats_users" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 980190962]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "users" WHERE "users"."id" = ?  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users?new=false
Completed 302 Found in 44ms (ActiveRecord: 0.9ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"980190962"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user1@test.com') AND "users"."id" != 980190962) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "users" SET "name" = ?, "email" = ?, "sex" = ?, "password_digest" = ?, "phonenumber" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$4wOi1GirdlKAFwKQrJOx2.5WsTlOBnkc5qhCLz9GiUH6/W9xElA9m"], ["phonenumber", "123456677777"], ["updated_at", "2018-12-21 04:52:12.991162"], ["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 13ms (ActiveRecord: 1.0ms)
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------
ChatsStateTest: test_delete_chat
--------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 12:52:13 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/chats/8" for 127.0.0.1 at 2018-12-21 12:52:13 +0800
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:52:13 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.5ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.4ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 12:52:13 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-21 12:52:13 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:52:13 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.5ms)
  Rendered homes/home.html.erb within layouts/application (2.1ms)
  Rendered layouts/_login_panel.html.erb (2.4ms)
  Rendered layouts/_header.html.erb (3.3ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 9ms (Views: 8.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 12:52:13 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-21 12:52:13 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:52:13 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.5ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.2ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 12:52:13 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-21 12:52:13 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:52:13 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.4ms)
  Rendered homes/home.html.erb within layouts/application (2.0ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.4ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 11ms (Views: 10.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 12:52:13 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 12:52:13 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:52:13 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.4ms)
  Rendered homes/home.html.erb within layouts/application (3.0ms)
  Rendered layouts/_login_panel.html.erb (1.8ms)
  Rendered layouts/_header.html.erb (2.7ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 11ms (Views: 9.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 12:52:13 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:52:13 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.4ms)
  Rendered layouts/_login_panel.html.erb (3.1ms)
  Rendered layouts/_header.html.erb (3.6ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 8ms (Views: 7.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 12:52:13 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:52:13 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.0ms)
  Rendered homes/home.html.erb within layouts/application (1.3ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.2ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 4ms (Views: 3.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-21 12:52:13 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$cI9qwklMD1ScconXMM71UOZCBRrGcbDdo5um/1bEvClU7nJ2drb5u"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-21 04:52:13.234257"], ["updated_at", "2018-12-21 04:52:13.234257"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 12ms (ActiveRecord: 1.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Started GET "/" for 127.0.0.1 at 2018-12-21 12:52:13 +0800
Processing by HomesController#home as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  Rendered homes/home.html.erb within layouts/application (0.7ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (5.2ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 8ms (Views: 7.3ms | ActiveRecord: 0.1ms)
  [1m[35m (0.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 12:52:13 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 8ms (ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-21 12:52:13 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 9ms (ActiveRecord: 0.4ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:52:13 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (3.3ms)
  Rendered homes/home.html.erb within layouts/application (4.0ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_content.html.erb (2.4ms)
Completed 200 OK in 11ms (Views: 10.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 12:52:13 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-21 12:52:13 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:52:13 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.8ms)
  Rendered homes/home.html.erb within layouts/application (2.3ms)
  Rendered layouts/_login_panel.html.erb (1.2ms)
  Rendered layouts/_header.html.erb (2.1ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 7ms (Views: 6.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 12:52:13 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 2ms (ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 04:52:42', '2018-12-21 04:52:42', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 04:52:42', '2018-12-21 04:52:42', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 04:52:42', '2018-12-21 04:52:42', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 04:52:42', '2018-12-21 04:52:42', 298486374)
  [1m[36m (1.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 12:52:42 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 27ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:52:42 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (19.0ms)
  Rendered homes/home.html.erb within layouts/application (35.3ms)
  Rendered layouts/_login_panel.html.erb (9.8ms)
  Rendered layouts/_header.html.erb (16.0ms)
  Rendered layouts/_content.html.erb (1.2ms)
Completed 200 OK in 106ms (Views: 105.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 12:52:43 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 16ms (ActiveRecord: 0.4ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-21 12:52:43 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:52:43 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.0ms)
  Rendered homes/home.html.erb within layouts/application (1.3ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.2ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 12:52:43 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:52:43 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.0ms)
  Rendered homes/home.html.erb within layouts/application (1.3ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.2ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 8ms (Views: 7.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 12:52:43 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 12:52:43 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:52:43 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.3ms)
  Rendered homes/home.html.erb within layouts/application (1.6ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.6ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-21 12:52:43 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 741ms (ActiveRecord: 0.3ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:52:43 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.0ms)
  Rendered homes/home.html.erb within layouts/application (1.2ms)
  Rendered layouts/_login_panel.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (1.1ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 4ms (Views: 3.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 12:52:43 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$iZL3trNH7dJ.Xwp3EzEtR.SojOxksmbvER7NCzAIBgMCGw.GrD44W"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-21 04:52:43.912066"], ["updated_at", "2018-12-21 04:52:43.912066"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 12ms (ActiveRecord: 0.9ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started GET "/" for 127.0.0.1 at 2018-12-21 12:52:43 +0800
Processing by HomesController#home as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  Rendered homes/home.html.erb within layouts/application (0.7ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (3.6ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 7ms (Views: 5.8ms | ActiveRecord: 0.1ms)
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-21 12:52:43 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 7ms (ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$QgLXIpHVsSF5T9YDa2c2COnvk32rnC.eetXUZW1PP7cVt9ZEISo36"], ["created_at", "2018-12-21 04:52:43.988653"], ["updated_at", "2018-12-21 04:52:43.988653"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$NAUZteJNOBfTN0YluMX3nuZdhet5ux0b5D..a9TtC4E6JGi6IZKQ6"], ["created_at", "2018-12-21 04:52:44.022148"], ["updated_at", "2018-12-21 04:52:44.022148"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 12:52:44 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:52:44 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.4ms)
  Rendered homes/home.html.erb within layouts/application (1.8ms)
  Rendered layouts/_login_panel.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (1.4ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 4.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("name", "email", "sex", "password_digest", "phonenumber", "role", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$xctRkQaNxS3d0AX7zLHp6OhadUfWY6CNuLZmLqZdah3EhpMEEcbei"], ["phonenumber", ""], ["role", 1], ["status", "user"], ["created_at", "2018-12-21 04:52:44.107274"], ["updated_at", "2018-12-21 04:52:44.107274"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 10ms (ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"980190962"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user1@test.com') AND "users"."id" != 980190962) LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "users" SET "name" = ?, "email" = ?, "sex" = ?, "password_digest" = ?, "phonenumber" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$ueDiH3rkoiu/g5aqr.uwuO5RLOoduGqrnPl/RlyJinnmiPufEDu5."], ["phonenumber", "123456677777"], ["updated_at", "2018-12-21 04:52:44.130891"], ["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 16ms (ActiveRecord: 1.3ms)
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "chats_users" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 980190962]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "users" WHERE "users"."id" = ?  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users?new=false
Completed 302 Found in 50ms (ActiveRecord: 1.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------------------
FriendshipStateTest: test_test_show_information_of_friend
---------------------------------------------------------
Started GET "/users/9" for 127.0.0.1 at 2018-12-21 12:52:44 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 9]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.3ms)
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 12:52:44 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:52:44 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.3ms)
  Rendered homes/home.html.erb within layouts/application (1.6ms)
  Rendered layouts/_login_panel.html.erb (2.4ms)
  Rendered layouts/_header.html.erb (3.9ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 8ms (Views: 7.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
FriendshipStateTest: test_delete_a_friend
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 12:52:44 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/3" for 127.0.0.1 at 2018-12-21 12:52:44 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"3"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:52:44 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.6ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.1ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 12:52:44 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 4ms (ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 12:52:44 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-21 12:52:44 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:52:44 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.0ms)
  Rendered homes/home.html.erb within layouts/application (1.2ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.2ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 4ms (Views: 3.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
--------------------------------
ChatsStateTest: test_delete_chat
--------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 12:52:44 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/chats/8" for 127.0.0.1 at 2018-12-21 12:52:44 +0800
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:52:44 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (3.1ms)
  Rendered homes/home.html.erb within layouts/application (4.2ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.6ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 9ms (Views: 8.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 12:52:44 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-21 12:52:44 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:52:44 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.0ms)
  Rendered homes/home.html.erb within layouts/application (1.3ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.1ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 4ms (Views: 3.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 12:52:44 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-21 12:52:44 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:52:44 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (0.9ms)
  Rendered homes/home.html.erb within layouts/application (1.2ms)
  Rendered layouts/_login_panel.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (1.1ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 4ms (Views: 3.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------------------
ChatsControllerTest: test_should_show_chat
------------------------------------------
  [1m[35mChat Load (0.4ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------
ChatsControllerTest: test_should_update_chat
--------------------------------------------
  [1m[36mChat Load (0.5ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
Processing by ChatsController#update as HTML
  Parameters: {"chat"=>{}, "id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
ChatsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsControllerTest: test_should_create_chat
--------------------------------------------
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "chats"
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
ChatsControllerTest: test_should_destroy_chat
---------------------------------------------
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "chats"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 04:52:59', '2018-12-21 04:52:59', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 04:52:59', '2018-12-21 04:52:59', 298486374)[0m
  [1m[35mFixture Delete (1.0ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 04:52:59', '2018-12-21 04:52:59', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 04:52:59', '2018-12-21 04:52:59', 298486374)
  [1m[36m (1.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "sex", "password_digest", "phonenumber", "role", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$RrSXTXBHZf./2Gi3MXbi2u7XgdgH.HvAWPN3P4XLXL4EIdOjINNI2"], ["phonenumber", ""], ["role", 1], ["status", "user"], ["created_at", "2018-12-21 04:52:59.215007"], ["updated_at", "2018-12-21 04:52:59.215007"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 42ms (ActiveRecord: 0.9ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "chats_users" WHERE "chats_users"."user_id" = ?  [["user_id", 980190962]]
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users?new=false
Completed 302 Found in 57ms (ActiveRecord: 1.8ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"980190962"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user1@test.com') AND "users"."id" != 980190962) LIMIT 1[0m
  [1m[35mSQL (1.2ms)[0m  UPDATE "users" SET "name" = ?, "email" = ?, "sex" = ?, "password_digest" = ?, "phonenumber" = ?, "updated_at" = ? WHERE "users"."id" = ?  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$nSg8kXsFFy5UX9BFMGuC8uLftjXIZui5F5YFt535WqOLRVU16t8iS"], ["phonenumber", "123456677777"], ["updated_at", "2018-12-21 04:52:59.309653"], ["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 16ms (ActiveRecord: 1.8ms)
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 12:52:59 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 18ms (ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 12:52:59 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 8ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-21 12:52:59 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:52:59 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (17.4ms)
  Rendered homes/home.html.erb within layouts/application (31.4ms)
  Rendered layouts/_login_panel.html.erb (8.7ms)
  Rendered layouts/_header.html.erb (16.2ms)
  Rendered layouts/_content.html.erb (1.2ms)
Completed 200 OK in 100ms (Views: 99.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 12:52:59 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-21 12:52:59 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:52:59 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.4ms)
  Rendered homes/home.html.erb within layouts/application (1.9ms)
  Rendered layouts/_login_panel.html.erb (1.2ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 7ms (Views: 5.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------
ChatsStateTest: test_delete_chat
--------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 12:52:59 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/chats/8" for 127.0.0.1 at 2018-12-21 12:52:59 +0800
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:52:59 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.7ms)
  Rendered layouts/_login_panel.html.erb (1.4ms)
  Rendered layouts/_header.html.erb (2.5ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 6ms (Views: 5.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 12:52:59 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-21 12:52:59 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:52:59 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.0ms)
  Rendered homes/home.html.erb within layouts/application (1.4ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.1ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 12:52:59 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:52:59 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.8ms)
  Rendered homes/home.html.erb within layouts/application (2.2ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 8ms (Views: 7.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 12:52:59 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 12:52:59 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:52:59 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.0ms)
  Rendered homes/home.html.erb within layouts/application (2.7ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 8ms (Views: 6.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (1.3ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (3.8ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$4xWfXKNpJ12rR8yuA0SPBewLL8ZcWcOwbsAr95296tTocQuSsSK3W"], ["created_at", "2018-12-21 04:53:00.817552"], ["updated_at", "2018-12-21 04:53:00.817552"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (1.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$4K3WXdlJ38PuI.al9L8pyeBnLio.sndE2BJ0YwPDZHFtq0syIsN4y"], ["created_at", "2018-12-21 04:53:00.860684"], ["updated_at", "2018-12-21 04:53:00.860684"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35m (0.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 12:53:00 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 6ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:53:00 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.3ms)
  Rendered homes/home.html.erb within layouts/application (1.8ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (1.6ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 8ms (Views: 5.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 12:53:01 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 6ms (ActiveRecord: 0.8ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-21 12:53:01 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 9ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:53:01 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.6ms)
  Rendered homes/home.html.erb within layouts/application (1.9ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 6ms (Views: 5.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------
ChatsControllerTest: test_should_show_chat
------------------------------------------
  [1m[36mChat Load (0.4ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsControllerTest: test_should_update_chat
--------------------------------------------
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by ChatsController#update as HTML
  Parameters: {"chat"=>{}, "id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (2.2ms)[0m  begin transaction
-----------------------------------------
ChatsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mChat Load (1.3ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
---------------------------------------------
ChatsControllerTest: test_should_destroy_chat
---------------------------------------------
  [1m[35mChat Load (0.2ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 5ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "chats"
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------
ChatsControllerTest: test_should_create_chat
--------------------------------------------
  [1m[36mChat Load (0.3ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "chats"
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 12:53:01 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:53:01 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.4ms)
  Rendered homes/home.html.erb within layouts/application (1.9ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 6ms (Views: 5.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 12:53:01 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 16ms (ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  begin transaction
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-21 12:53:01 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 23ms (ActiveRecord: 0.6ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:53:01 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.8ms)
  Rendered homes/home.html.erb within layouts/application (2.5ms)
  Rendered layouts/_login_panel.html.erb (1.7ms)
  Rendered layouts/_header.html.erb (2.8ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 9ms (Views: 7.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 12:53:01 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$rUwlvKb6vQMJo5MVfu8a..sZysOlricPo3hS347zQ71XpFYAN0FbO"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-21 04:53:01.647603"], ["updated_at", "2018-12-21 04:53:01.647603"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 13ms (ActiveRecord: 1.2ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started GET "/" for 127.0.0.1 at 2018-12-21 12:53:01 +0800
Processing by HomesController#home as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  Rendered homes/home.html.erb within layouts/application (0.8ms)
  Rendered layouts/_login_panel.html.erb (1.7ms)
  Rendered layouts/_header.html.erb (3.3ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 7ms (Views: 6.1ms | ActiveRecord: 0.1ms)
  [1m[36m (1.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
FriendshipStateTest: test_delete_a_friend
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 12:53:01 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/3" for 127.0.0.1 at 2018-12-21 12:53:01 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"3"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:53:01 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.1ms)
  Rendered homes/home.html.erb within layouts/application (4.1ms)
  Rendered layouts/_login_panel.html.erb (2.0ms)
  Rendered layouts/_header.html.erb (3.3ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 11ms (Views: 10.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------------------
FriendshipStateTest: test_test_show_information_of_friend
---------------------------------------------------------
Started GET "/users/9" for 127.0.0.1 at 2018-12-21 12:53:01 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 9]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 12:53:01 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:53:01 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.6ms)
  Rendered homes/home.html.erb within layouts/application (2.1ms)
  Rendered layouts/_login_panel.html.erb (2.1ms)
  Rendered layouts/_header.html.erb (2.8ms)
  Rendered layouts/_content.html.erb (0.4ms)
Completed 200 OK in 8ms (Views: 7.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.9ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (2.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 04:55:05', '2018-12-21 04:55:05', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 04:55:05', '2018-12-21 04:55:05', 298486374)[0m
  [1m[35mFixture Delete (4.4ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 04:55:05', '2018-12-21 04:55:05', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 04:55:05', '2018-12-21 04:55:05', 298486374)
  [1m[36m (3.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 12:55:05 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 39ms (ActiveRecord: 0.3ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-21 12:55:05 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:55:05 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (16.8ms)
  Rendered homes/home.html.erb within layouts/application (41.6ms)
  Rendered layouts/_login_panel.html.erb (8.3ms)
  Rendered layouts/_header.html.erb (13.8ms)
  Rendered layouts/_content.html.erb (1.9ms)
Completed 200 OK in 113ms (Views: 111.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-21 12:55:05 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$zSmtbDlkCLcnjqwnY7anX.1gVM1lHkgp3QoKqYdLSBoNEZVoz8oWi"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-21 04:55:05.807278"], ["updated_at", "2018-12-21 04:55:05.807278"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 70ms (ActiveRecord: 1.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Started GET "/" for 127.0.0.1 at 2018-12-21 12:55:05 +0800
Processing by HomesController#home as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  Rendered homes/home.html.erb within layouts/application (0.9ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (3.0ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 7ms (Views: 6.6ms | ActiveRecord: 0.1ms)
  [1m[35m (0.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 12:55:05 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 850ms (ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-21 12:55:06 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 10ms (ActiveRecord: 0.7ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:55:06 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.0ms)
  Rendered homes/home.html.erb within layouts/application (1.4ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.1ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "chats_users" WHERE "chats_users"."user_id" = ?  [["user_id", 980190962]]
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users?new=false
Completed 302 Found in 41ms (ActiveRecord: 1.4ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[35mUser Load (0.9ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("name", "email", "sex", "password_digest", "phonenumber", "role", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$3YN0s5KYfOBuxSTqeaPoTOaQmh0zdwIVrpukQjtugBtowasVpD/Wi"], ["phonenumber", ""], ["role", 1], ["status", "user"], ["created_at", "2018-12-21 04:55:06.819794"], ["updated_at", "2018-12-21 04:55:06.819794"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 13ms (ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"980190962"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user1@test.com') AND "users"."id" != 980190962) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "users" SET "name" = ?, "email" = ?, "sex" = ?, "password_digest" = ?, "phonenumber" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$B.hVuuMPjxfrXYHlPWRimeKPZHveSLqVbR9fL9J7oQi1tOQNr8ksy"], ["phonenumber", "123456677777"], ["updated_at", "2018-12-21 04:55:06.850379"], ["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 14ms (ActiveRecord: 1.1ms)
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------
ChatsStateTest: test_delete_chat
--------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 12:55:06 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 4ms (ActiveRecord: 0.0ms)
Started DELETE "/chats/8" for 127.0.0.1 at 2018-12-21 12:55:06 +0800
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:55:06 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.0ms)
  Rendered homes/home.html.erb within layouts/application (1.3ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (2.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 5.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 12:55:06 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-21 12:55:06 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:55:06 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.0ms)
  Rendered homes/home.html.erb within layouts/application (1.4ms)
  Rendered layouts/_login_panel.html.erb (1.4ms)
  Rendered layouts/_header.html.erb (2.2ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 5.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 12:55:06 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-21 12:55:06 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:55:06 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.0ms)
  Rendered homes/home.html.erb within layouts/application (1.3ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.1ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 4ms (Views: 3.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 12:55:06 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-21 12:55:06 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:55:06 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.5ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
FriendshipStateTest: test_delete_a_friend
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 12:55:07 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/3" for 127.0.0.1 at 2018-12-21 12:55:07 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"3"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:55:07 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.1ms)
  Rendered homes/home.html.erb within layouts/application (2.7ms)
  Rendered layouts/_login_panel.html.erb (1.7ms)
  Rendered layouts/_header.html.erb (3.2ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 11ms (Views: 10.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------
FriendshipStateTest: test_test_show_information_of_friend
---------------------------------------------------------
Started GET "/users/9" for 127.0.0.1 at 2018-12-21 12:55:07 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 9]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.3ms)
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 12:55:07 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:55:07 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.0ms)
  Rendered homes/home.html.erb within layouts/application (1.3ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.3ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 12:55:07 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:55:07 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.5ms)
  Rendered homes/home.html.erb within layouts/application (1.9ms)
  Rendered layouts/_login_panel.html.erb (2.8ms)
  Rendered layouts/_header.html.erb (4.2ms)
  Rendered layouts/_content.html.erb (3.9ms)
Completed 200 OK in 14ms (Views: 12.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$TsbdNCsbztJQbUtgITjAheWgK.Y4auDQE3Pnq2VC5E4hs./A47eOa"], ["created_at", "2018-12-21 04:55:07.138193"], ["updated_at", "2018-12-21 04:55:07.138193"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$HNQNp2eoAcrw62WSRF/w7eWX7q8jgjY6nPn00tkR3JR6nQjRQoPTi"], ["created_at", "2018-12-21 04:55:07.195332"], ["updated_at", "2018-12-21 04:55:07.195332"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsControllerTest: test_should_create_chat
--------------------------------------------
  [1m[36mChat Load (0.2ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "chats"
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------------------
ChatsControllerTest: test_should_show_chat
------------------------------------------
  [1m[35mChat Load (0.2ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
ChatsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsControllerTest: test_should_update_chat
--------------------------------------------
  [1m[35mChat Load (0.2ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by ChatsController#update as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}, "id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
ChatsControllerTest: test_should_destroy_chat
---------------------------------------------
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "chats"
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 12:55:07 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:55:07 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.5ms)
  Rendered homes/home.html.erb within layouts/application (2.1ms)
  Rendered layouts/_login_panel.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (1.1ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 5.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 12:55:07 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 12:55:07 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:55:07 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.5ms)
  Rendered homes/home.html.erb within layouts/application (1.9ms)
  Rendered layouts/_login_panel.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (1.1ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 12ms (Views: 10.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 12:55:07 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 12:55:07 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:55:07 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.6ms)
  Rendered homes/home.html.erb within layouts/application (2.4ms)
  Rendered layouts/_login_panel.html.erb (1.2ms)
  Rendered layouts/_header.html.erb (2.1ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 7ms (Views: 6.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (1.0ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.7ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 04:55:29', '2018-12-21 04:55:29', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 04:55:29', '2018-12-21 04:55:29', 298486374)[0m
  [1m[35mFixture Delete (2.4ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 04:55:29', '2018-12-21 04:55:29', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 04:55:29', '2018-12-21 04:55:29', 298486374)
  [1m[36m (1.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$8Iiyo8YO7vhiRvXIFQ/igexsPYG1aWxQzpBHJjKlloj9oCvSRlLn6"], ["created_at", "2018-12-21 04:55:30.048510"], ["updated_at", "2018-12-21 04:55:30.048510"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$gEUMb2eX1B5vLbU39MEpE.UMyRapZvrP400sLrCAn243EyG8ZPELK"], ["created_at", "2018-12-21 04:55:30.139509"], ["updated_at", "2018-12-21 04:55:30.139509"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "sex", "password_digest", "phonenumber", "role", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$UIPftw1ELqT7AoeEAdbkwOJ2DicAISieKgZANOM2CpP.YO1.xTh6q"], ["phonenumber", ""], ["role", 1], ["status", "user"], ["created_at", "2018-12-21 04:55:30.215831"], ["updated_at", "2018-12-21 04:55:30.215831"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 8ms (ActiveRecord: 0.6ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (1.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "chats_users" WHERE "chats_users"."user_id" = ?  [["user_id", 980190962]]
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users?new=false
Completed 302 Found in 49ms (ActiveRecord: 1.6ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"980190962"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user1@test.com') AND "users"."id" != 980190962) LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  UPDATE "users" SET "name" = ?, "email" = ?, "sex" = ?, "password_digest" = ?, "phonenumber" = ?, "updated_at" = ? WHERE "users"."id" = ?  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$hcvyPowK06CTv3XJa81h8.hMTixtBfp9Po8/vZcDdgsue19YcEX9W"], ["phonenumber", "123456677777"], ["updated_at", "2018-12-21 04:55:30.302927"], ["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 14ms (ActiveRecord: 1.2ms)
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
FriendshipStateTest: test_delete_a_friend
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 12:55:30 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 38ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/3" for 127.0.0.1 at 2018-12-21 12:55:30 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"3"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:55:30 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (14.2ms)
  Rendered homes/home.html.erb within layouts/application (33.7ms)
  Rendered layouts/_login_panel.html.erb (9.2ms)
  Rendered layouts/_header.html.erb (14.1ms)
  Rendered layouts/_content.html.erb (1.6ms)
Completed 200 OK in 95ms (Views: 94.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------
FriendshipStateTest: test_test_show_information_of_friend
---------------------------------------------------------
Started GET "/users/9" for 127.0.0.1 at 2018-12-21 12:55:30 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 9]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.3ms)
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 12:55:30 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:55:30 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.7ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 5.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 12:55:30 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:55:30 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.6ms)
  Rendered layouts/_login_panel.html.erb (3.3ms)
  Rendered layouts/_header.html.erb (3.9ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 15ms (Views: 14.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------
ChatsStateTest: test_delete_chat
--------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 12:55:30 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started DELETE "/chats/8" for 127.0.0.1 at 2018-12-21 12:55:30 +0800
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:55:30 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.6ms)
  Rendered layouts/_login_panel.html.erb (1.3ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (3.4ms)
Completed 200 OK in 11ms (Views: 10.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 12:55:30 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-21 12:55:30 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:55:30 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.5ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.4ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 12:55:30 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-21 12:55:30 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:55:30 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.1ms)
  Rendered homes/home.html.erb within layouts/application (2.9ms)
  Rendered layouts/_login_panel.html.erb (2.6ms)
  Rendered layouts/_header.html.erb (3.4ms)
  Rendered layouts/_content.html.erb (0.4ms)
Completed 200 OK in 12ms (Views: 9.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 12:55:30 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-21 12:55:30 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:55:30 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.7ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.3ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 4.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-21 12:55:30 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 11ms (ActiveRecord: 0.4ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:55:30 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.4ms)
  Rendered homes/home.html.erb within layouts/application (3.0ms)
  Rendered layouts/_login_panel.html.erb (1.8ms)
  Rendered layouts/_header.html.erb (2.8ms)
  Rendered layouts/_content.html.erb (0.4ms)
Completed 200 OK in 15ms (Views: 13.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-21 12:55:30 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 11ms (ActiveRecord: 0.4ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 12:55:30 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$n02RhnHde2AW8ZqSHCP8BOKUNlPQ6HTy0wt4qqq/QpUOszay10zvC"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-21 04:55:30.820616"], ["updated_at", "2018-12-21 04:55:30.820616"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 12ms (ActiveRecord: 1.5ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started GET "/" for 127.0.0.1 at 2018-12-21 12:55:30 +0800
Processing by HomesController#home as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  Rendered homes/home.html.erb within layouts/application (1.0ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (2.2ms)
  Rendered layouts/_content.html.erb (4.6ms)
Completed 200 OK in 10ms (Views: 9.3ms | ActiveRecord: 0.3ms)
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsControllerTest: test_should_create_chat
--------------------------------------------
  [1m[36mChat Load (0.3ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "chats"
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 0ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
ChatsControllerTest: test_should_destroy_chat
---------------------------------------------
  [1m[35mChat Load (0.2ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "chats"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
ChatsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mChat Load (0.4ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------------------
ChatsControllerTest: test_should_show_chat
------------------------------------------
  [1m[35mChat Load (0.3ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsControllerTest: test_should_update_chat
--------------------------------------------
  [1m[36mChat Load (0.2ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
Processing by ChatsController#update as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}, "id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 12:55:31 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 2ms (ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 12:55:31 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-21 12:55:31 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:55:31 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.6ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.2ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 5ms (Views: 4.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 12:55:31 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:55:31 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.5ms)
  Rendered homes/home.html.erb within layouts/application (2.0ms)
  Rendered layouts/_login_panel.html.erb (2.2ms)
  Rendered layouts/_header.html.erb (2.9ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 9ms (Views: 8.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 12:55:31 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 12:55:31 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:55:31 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (0.9ms)
  Rendered homes/home.html.erb within layouts/application (1.2ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.2ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 4ms (Views: 3.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 12:55:31 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:55:31 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.6ms)
  Rendered homes/home.html.erb within layouts/application (3.1ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.4ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 7ms (Views: 6.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  begin transaction
  [1m[36mFixture Delete (0.8ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.7ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 04:57:30', '2018-12-21 04:57:30', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 04:57:30', '2018-12-21 04:57:30', 298486374)[0m
  [1m[35mFixture Delete (1.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 04:57:30', '2018-12-21 04:57:30', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 04:57:30', '2018-12-21 04:57:30', 298486374)
  [1m[36m (2.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$Fde2S5Wg4j.tVNbXHlhbJuFs9LtUMU7n2rWfj9xIETh7or7.AL3cu"], ["created_at", "2018-12-21 04:57:30.882027"], ["updated_at", "2018-12-21 04:57:30.882027"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$KHFlSxXLoyF6uu3aJ0UfkOfPcorx25vze9UGChd.yicZ77iBsJ7x."], ["created_at", "2018-12-21 04:57:31.797109"], ["updated_at", "2018-12-21 04:57:31.797109"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36m (1.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 12:57:31 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 30ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:57:31 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (22.7ms)
  Rendered homes/home.html.erb within layouts/application (42.1ms)
  Rendered layouts/_login_panel.html.erb (6.7ms)
  Rendered layouts/_header.html.erb (11.7ms)
  Rendered layouts/_content.html.erb (1.4ms)
Completed 200 OK in 110ms (Views: 109.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------
ChatsStateTest: test_delete_chat
--------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 12:57:32 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/chats/8" for 127.0.0.1 at 2018-12-21 12:57:32 +0800
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:57:32 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.6ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.4ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 5ms (Views: 4.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 12:57:32 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-21 12:57:32 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:57:32 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.5ms)
  Rendered homes/home.html.erb within layouts/application (3.7ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.3ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 8ms (Views: 7.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 12:57:32 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-21 12:57:32 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:57:32 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.5ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.2ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 5ms (Views: 4.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 12:57:32 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-21 12:57:32 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:57:32 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.6ms)
  Rendered layouts/_login_panel.html.erb (1.3ms)
  Rendered layouts/_header.html.erb (2.1ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 7ms (Views: 6.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"980190962"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user1@test.com') AND "users"."id" != 980190962) LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "users" SET "name" = ?, "email" = ?, "sex" = ?, "password_digest" = ?, "phonenumber" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$kMoM08VtHWlZyrLKhloUuu7icQ0pSoOui8UeduMpuqWpapoNWIrrO"], ["phonenumber", "123456677777"], ["updated_at", "2018-12-21 04:57:32.241838"], ["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 17ms (ActiveRecord: 1.0ms)
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "sex", "password_digest", "phonenumber", "role", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$IM6K9nWqk2ebpe.Qr9gnpeA27kMueeRkhQS2pXBEwJQvdAQPVGuLO"], ["phonenumber", ""], ["role", 1], ["status", "user"], ["created_at", "2018-12-21 04:57:32.266647"], ["updated_at", "2018-12-21 04:57:32.266647"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 10ms (ActiveRecord: 0.8ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "chats_users" WHERE "chats_users"."user_id" = ?  [["user_id", 980190962]]
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users?new=false
Completed 302 Found in 57ms (ActiveRecord: 2.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
ChatsControllerTest: test_should_destroy_chat
---------------------------------------------
  [1m[35mChat Load (0.3ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "chats"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsControllerTest: test_should_create_chat
--------------------------------------------
  [1m[36mChat Load (0.2ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "chats"
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsControllerTest: test_should_update_chat
--------------------------------------------
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by ChatsController#update as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}, "id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 12:57:32 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 12:57:32 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:57:32 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.9ms)
  Rendered homes/home.html.erb within layouts/application (2.6ms)
  Rendered layouts/_login_panel.html.erb (1.2ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 9ms (Views: 7.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 12:57:32 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:57:32 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.5ms)
  Rendered homes/home.html.erb within layouts/application (2.2ms)
  Rendered layouts/_login_panel.html.erb (1.5ms)
  Rendered layouts/_header.html.erb (2.4ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 7ms (Views: 6.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 12:57:32 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:57:32 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.5ms)
  Rendered layouts/_login_panel.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (1.0ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 3.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.6ms)[0m  begin transaction
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 12:57:32 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-21 12:57:32 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:57:32 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.5ms)
  Rendered homes/home.html.erb within layouts/application (2.1ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 7ms (Views: 5.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 12:57:32 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 2ms (ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
FriendshipStateTest: test_delete_a_friend
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 12:57:32 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/3" for 127.0.0.1 at 2018-12-21 12:57:32 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"3"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:57:32 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.0ms)
  Rendered homes/home.html.erb within layouts/application (1.4ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.2ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------
FriendshipStateTest: test_test_show_information_of_friend
---------------------------------------------------------
Started GET "/users/9" for 127.0.0.1 at 2018-12-21 12:57:32 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 9]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 12:57:32 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:57:32 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.0ms)
  Rendered homes/home.html.erb within layouts/application (1.4ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.2ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 12:57:32 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 12ms (ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-21 12:57:32 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$/ZQ4SlLK2eiCyOshibDpXuXmRcZtGwvOfpRaTHyLcd2SeJrrEM/lm"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-21 04:57:32.655573"], ["updated_at", "2018-12-21 04:57:32.655573"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 12ms (ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started GET "/" for 127.0.0.1 at 2018-12-21 12:57:32 +0800
Processing by HomesController#home as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  Rendered homes/home.html.erb within layouts/application (0.7ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (2.3ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 6ms (Views: 5.2ms | ActiveRecord: 0.1ms)
  [1m[35m (1.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-21 12:57:32 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 9ms (ActiveRecord: 0.4ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:57:32 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.4ms)
  Rendered homes/home.html.erb within layouts/application (1.9ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 6ms (Views: 5.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (2.0ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.7ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 04:58:39', '2018-12-21 04:58:39', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 04:58:39', '2018-12-21 04:58:39', 298486374)[0m
  [1m[35mFixture Delete (1.0ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 04:58:39', '2018-12-21 04:58:39', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 04:58:39', '2018-12-21 04:58:39', 298486374)
  [1m[36m (1.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 12:58:39 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 26ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:58:39 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (18.5ms)
  Rendered homes/home.html.erb within layouts/application (35.0ms)
  Rendered layouts/_login_panel.html.erb (7.1ms)
  Rendered layouts/_header.html.erb (12.3ms)
  Rendered layouts/_content.html.erb (1.0ms)
Completed 200 OK in 106ms (Views: 105.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 12:58:39 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:58:39 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.4ms)
  Rendered homes/home.html.erb within layouts/application (1.8ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 7ms (Views: 7.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 12:58:39 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 12:58:39 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:58:39 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.7ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.3ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 7ms (Views: 6.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-21 12:58:39 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 875ms (ActiveRecord: 0.6ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 12:58:40 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$MyFqfp0hldSFGXaeiv8GcOmTqoXiAPeJ5oQ7YHSV0L/WwZvtFJeci"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-21 04:58:40.720341"], ["updated_at", "2018-12-21 04:58:40.720341"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 8ms (ActiveRecord: 0.7ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started GET "/" for 127.0.0.1 at 2018-12-21 12:58:40 +0800
Processing by HomesController#home as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  Rendered homes/home.html.erb within layouts/application (15.1ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (2.2ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 21ms (Views: 19.0ms | ActiveRecord: 0.3ms)
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-21 12:58:40 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 12ms (ActiveRecord: 0.7ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:58:40 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.4ms)
  Rendered homes/home.html.erb within layouts/application (2.3ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.6ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 9ms (Views: 7.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------
FriendshipStateTest: test_delete_a_friend
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 12:58:40 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/3" for 127.0.0.1 at 2018-12-21 12:58:40 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"3"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:58:40 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.6ms)
  Rendered layouts/_login_panel.html.erb (1.8ms)
  Rendered layouts/_header.html.erb (2.3ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 6ms (Views: 5.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------
FriendshipStateTest: test_test_show_information_of_friend
---------------------------------------------------------
Started GET "/users/9" for 127.0.0.1 at 2018-12-21 12:58:40 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 9]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.1ms)
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 12:58:40 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:58:40 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.6ms)
  Rendered homes/home.html.erb within layouts/application (2.1ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.6ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 5.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("name", "email", "sex", "password_digest", "phonenumber", "role", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$AE5gqB.CF.AGifFh/f1rTeUon2195YGfrZ9TXOcyrkKcuVPeByopy"], ["phonenumber", ""], ["role", 1], ["status", "user"], ["created_at", "2018-12-21 04:58:40.868520"], ["updated_at", "2018-12-21 04:58:40.868520"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 11ms (ActiveRecord: 0.9ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"980190962"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user1@test.com') AND "users"."id" != 980190962) LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "users" SET "name" = ?, "email" = ?, "sex" = ?, "password_digest" = ?, "phonenumber" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$HD82QdiKR/RtfTSwm4b1rOYslYj0sWmq8r77LtV4eWdnZPrzYQv5i"], ["phonenumber", "123456677777"], ["updated_at", "2018-12-21 04:58:40.889595"], ["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 14ms (ActiveRecord: 0.9ms)
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.5ms)[0m  [1mDELETE FROM "chats_users" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 980190962]]
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "users" WHERE "users"."id" = ?  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users?new=false
Completed 302 Found in 81ms (ActiveRecord: 3.7ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$EGGIrmtTm.WJoudHvXDtQ.pFaG7qCsgY6ye9eq3OQjHipIDjWHLbC"], ["created_at", "2018-12-21 04:58:41.017962"], ["updated_at", "2018-12-21 04:58:41.017962"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$RwI/fzadDtPxxLeCgitigOq.H93tkv.UOpc/bNx4TH5HUVf1CasLK"], ["created_at", "2018-12-21 04:58:41.074192"], ["updated_at", "2018-12-21 04:58:41.074192"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (1.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsControllerTest: test_should_update_chat
--------------------------------------------
  [1m[36mChat Load (0.2ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
Processing by ChatsController#update as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}, "id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsControllerTest: test_should_create_chat
--------------------------------------------
  [1m[35mChat Load (0.2ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "chats"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
ChatsControllerTest: test_should_destroy_chat
---------------------------------------------
  [1m[36mChat Load (0.2ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "chats"
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 0ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 12:58:41 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 12:58:41 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 4ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:58:41 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.8ms)
  Rendered homes/home.html.erb within layouts/application (2.5ms)
  Rendered layouts/_login_panel.html.erb (1.3ms)
  Rendered layouts/_header.html.erb (2.9ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 10ms (Views: 9.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 12:58:41 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.1ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-21 12:58:41 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:58:41 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (3.4ms)
  Rendered homes/home.html.erb within layouts/application (4.2ms)
  Rendered layouts/_login_panel.html.erb (2.2ms)
  Rendered layouts/_header.html.erb (3.9ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 12ms (Views: 10.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 12:58:41 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-21 12:58:41 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:58:41 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.0ms)
  Rendered homes/home.html.erb within layouts/application (1.3ms)
  Rendered layouts/_login_panel.html.erb (1.2ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 6ms (Views: 5.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 12:58:41 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-21 12:58:41 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:58:41 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (3.4ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.4ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 7ms (Views: 6.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 12:58:41 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-21 12:58:41 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:58:41 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.1ms)
  Rendered homes/home.html.erb within layouts/application (2.8ms)
  Rendered layouts/_login_panel.html.erb (1.3ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 9ms (Views: 8.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------
ChatsStateTest: test_delete_chat
--------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 12:58:41 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/chats/8" for 127.0.0.1 at 2018-12-21 12:58:41 +0800
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:58:41 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (3.8ms)
  Rendered homes/home.html.erb within layouts/application (4.3ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 10ms (Views: 9.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.8ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.7ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 04:59:09', '2018-12-21 04:59:09', 980190962)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 04:59:09', '2018-12-21 04:59:09', 298486374)[0m
  [1m[35mFixture Delete (1.2ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 04:59:09', '2018-12-21 04:59:09', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 04:59:09', '2018-12-21 04:59:09', 298486374)
  [1m[36m (1.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 12:59:09 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 40ms (ActiveRecord: 0.3ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-21 12:59:09 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:59:09 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (12.5ms)
  Rendered homes/home.html.erb within layouts/application (36.6ms)
  Rendered layouts/_login_panel.html.erb (13.7ms)
  Rendered layouts/_header.html.erb (25.7ms)
  Rendered layouts/_content.html.erb (1.3ms)
Completed 200 OK in 153ms (Views: 152.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsControllerTest: test_should_create_chat
--------------------------------------------
  [1m[36mChat Load (0.3ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "chats"
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsControllerTest: test_should_update_chat
--------------------------------------------
  [1m[35mChat Load (0.2ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by ChatsController#update as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}, "id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
ChatsControllerTest: test_should_destroy_chat
---------------------------------------------
  [1m[36mChat Load (0.4ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "chats"
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
FriendshipStateTest: test_delete_a_friend
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 12:59:10 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/3" for 127.0.0.1 at 2018-12-21 12:59:10 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"3"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:59:10 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.7ms)
  Rendered homes/home.html.erb within layouts/application (2.9ms)
  Rendered layouts/_login_panel.html.erb (1.3ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 8ms (Views: 7.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------
FriendshipStateTest: test_test_show_information_of_friend
---------------------------------------------------------
Started GET "/users/9" for 127.0.0.1 at 2018-12-21 12:59:10 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 9]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.3ms)
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 12:59:10 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:59:10 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.1ms)
  Rendered homes/home.html.erb within layouts/application (2.5ms)
  Rendered layouts/_login_panel.html.erb (1.3ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 7ms (Views: 6.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 12:59:10 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$r93QD0zgWOFzO33yp.6yne9FvTxC6uFz5bgbsd8OENx2o81UeNjCe"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-21 04:59:10.311340"], ["updated_at", "2018-12-21 04:59:10.311340"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 63ms (ActiveRecord: 1.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started GET "/" for 127.0.0.1 at 2018-12-21 12:59:10 +0800
Processing by HomesController#home as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  Rendered homes/home.html.erb within layouts/application (0.6ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (2.5ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 0.1ms)
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-21 12:59:10 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 825ms (ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-21 12:59:11 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 10ms (ActiveRecord: 0.4ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:59:11 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.5ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 12:59:11 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:59:11 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.6ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 5.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 12:59:11 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 12:59:11 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:59:11 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.5ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.1ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 4ms (Views: 3.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 12:59:11 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-21 12:59:11 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:59:11 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.1ms)
  Rendered homes/home.html.erb within layouts/application (2.6ms)
  Rendered layouts/_login_panel.html.erb (3.0ms)
  Rendered layouts/_header.html.erb (3.7ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 10ms (Views: 8.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 12:59:11 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-21 12:59:11 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:59:11 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (0.9ms)
  Rendered homes/home.html.erb within layouts/application (1.2ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.2ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 5.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 12:59:11 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-21 12:59:11 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:59:11 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.0ms)
  Rendered homes/home.html.erb within layouts/application (1.3ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.1ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------
ChatsStateTest: test_delete_chat
--------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 12:59:11 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started DELETE "/chats/8" for 127.0.0.1 at 2018-12-21 12:59:11 +0800
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:59:11 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.3ms)
  Rendered homes/home.html.erb within layouts/application (1.6ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 5ms (Views: 4.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("name", "email", "sex", "password_digest", "phonenumber", "role", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$2ffPuYX2J8t4OPwU2S4nHeF6tgSPZepXIcNtX/8steB2PCSZa9lkm"], ["phonenumber", ""], ["role", 1], ["status", "user"], ["created_at", "2018-12-21 04:59:11.404522"], ["updated_at", "2018-12-21 04:59:11.404522"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 13ms (ActiveRecord: 1.2ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "chats_users" WHERE "chats_users"."user_id" = ?  [["user_id", 980190962]]
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users?new=false
Completed 302 Found in 58ms (ActiveRecord: 1.5ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"980190962"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user1@test.com') AND "users"."id" != 980190962) LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  UPDATE "users" SET "name" = ?, "email" = ?, "sex" = ?, "password_digest" = ?, "phonenumber" = ?, "updated_at" = ? WHERE "users"."id" = ?  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$Rx6.QV0nkdTxqjqUBgm/fOov8N.xbJHsbuTgHQyHxSY377ts9mEK2"], ["phonenumber", "123456677777"], ["updated_at", "2018-12-21 04:59:11.499883"], ["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 12ms (ActiveRecord: 1.1ms)
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 12:59:11 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:59:11 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.4ms)
  Rendered homes/home.html.erb within layouts/application (2.0ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 5.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 12:59:11 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 2ms (ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$5im5bE9/MX/Pp48JS6tm3Os7ZAy4tY6FvPZQ9AHTelNjr9z1x9Wf."], ["created_at", "2018-12-21 04:59:11.610842"], ["updated_at", "2018-12-21 04:59:11.610842"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$0Obp2AVULgB8M16E5ADTiOdnny1zBqQJI0DpT4ga3MaGhz1sn1S0i"], ["created_at", "2018-12-21 04:59:11.672072"], ["updated_at", "2018-12-21 04:59:11.672072"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 12:59:11 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 12:59:11 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.7ms)
  Rendered homes/home.html.erb within layouts/application (2.6ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 8ms (Views: 7.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  begin transaction
  [1m[36mFixture Delete (6.2ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (39.9ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:01:04', '2018-12-21 05:01:04', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:01:04', '2018-12-21 05:01:04', 298486374)[0m
  [1m[35mFixture Delete (4.3ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (3.0ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:01:04', '2018-12-21 05:01:04', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:01:04', '2018-12-21 05:01:04', 298486374)
  [1m[36m (34.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 13:01:05 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 63ms (ActiveRecord: 0.4ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-21 13:01:05 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:01:05 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (19.6ms)
  Rendered homes/home.html.erb within layouts/application (52.9ms)
  Rendered layouts/_login_panel.html.erb (20.3ms)
  Rendered layouts/_header.html.erb (27.9ms)
  Rendered layouts/_content.html.erb (2.5ms)
Completed 200 OK in 157ms (Views: 155.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-21 13:01:05 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 2796ms (ActiveRecord: 1.4ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-21 13:01:08 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 24ms (ActiveRecord: 0.7ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:01:08 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.5ms)
  Rendered homes/home.html.erb within layouts/application (3.4ms)
  Rendered layouts/_login_panel.html.erb (4.9ms)
  Rendered layouts/_header.html.erb (8.5ms)
  Rendered layouts/_content.html.erb (0.4ms)
Completed 200 OK in 18ms (Views: 16.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-21 13:01:08 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (20.9ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$HF/SV.JTCgoXsM9swIvrWuZlNif.TvlQ7MpME8YueCxVWbHFTW0li"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-21 05:01:08.521886"], ["updated_at", "2018-12-21 05:01:08.521886"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 55ms (ActiveRecord: 21.3ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started GET "/" for 127.0.0.1 at 2018-12-21 13:01:08 +0800
Processing by HomesController#home as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  Rendered homes/home.html.erb within layouts/application (0.9ms)
  Rendered layouts/_login_panel.html.erb (1.8ms)
  Rendered layouts/_header.html.erb (3.9ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 11ms (Views: 10.0ms | ActiveRecord: 0.1ms)
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 13:01:08 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.9ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 4ms (ActiveRecord: 0.9ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:01:08 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-21 13:01:08 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:01:08 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.3ms)
  Rendered homes/home.html.erb within layouts/application (1.7ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 5.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:01:08 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-21 13:01:08 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:01:08 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.1ms)
  Rendered homes/home.html.erb within layouts/application (3.5ms)
  Rendered layouts/_login_panel.html.erb (1.7ms)
  Rendered layouts/_header.html.erb (2.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 9ms (Views: 8.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (8.8ms)[0m  begin transaction
--------------------------------
ChatsStateTest: test_delete_chat
--------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:01:08 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 4ms (ActiveRecord: 0.0ms)
Started DELETE "/chats/8" for 127.0.0.1 at 2018-12-21 13:01:08 +0800
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:01:08 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.4ms)
  Rendered homes/home.html.erb within layouts/application (3.4ms)
  Rendered layouts/_login_panel.html.erb (2.6ms)
  Rendered layouts/_header.html.erb (3.7ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 13ms (Views: 12.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:01:08 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-21 13:01:08 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:01:08 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.6ms)
  Rendered layouts/_login_panel.html.erb (1.6ms)
  Rendered layouts/_header.html.erb (2.7ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 8ms (Views: 6.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 13:01:08 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:01:08 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (23.5ms)
  Rendered homes/home.html.erb within layouts/application (24.0ms)
  Rendered layouts/_login_panel.html.erb (1.6ms)
  Rendered layouts/_header.html.erb (2.4ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 30ms (Views: 29.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 13:01:08 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:01:08 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (3.6ms)
  Rendered homes/home.html.erb within layouts/application (4.3ms)
  Rendered layouts/_login_panel.html.erb (1.6ms)
  Rendered layouts/_header.html.erb (2.3ms)
  Rendered layouts/_content.html.erb (0.4ms)
Completed 200 OK in 15ms (Views: 14.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (5.3ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$c50q/5MwZwSAgZYSjO1FJ.lgFwcgD1FscSD.bHT51qB4dubVgzo8u"], ["created_at", "2018-12-21 05:01:09.117337"], ["updated_at", "2018-12-21 05:01:09.117337"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36m (1.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$dgUT6LD04vWjDXCT00n57.175KyK8WvndbMN2fGnnjciGYY72Y2Q2"], ["created_at", "2018-12-21 05:01:09.157854"], ["updated_at", "2018-12-21 05:01:09.157854"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (1.4ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 13:01:09 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:01:09 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.5ms)
  Rendered homes/home.html.erb within layouts/application (2.1ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 7ms (Views: 5.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 13:01:09 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 13:01:09 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:01:09 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.0ms)
  Rendered homes/home.html.erb within layouts/application (2.5ms)
  Rendered layouts/_login_panel.html.erb (3.9ms)
  Rendered layouts/_header.html.erb (4.8ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 12ms (Views: 11.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
--------------------------------------------
ChatsControllerTest: test_should_create_chat
--------------------------------------------
  [1m[36mChat Load (0.4ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "chats"
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
---------------------------------------------
ChatsControllerTest: test_should_destroy_chat
---------------------------------------------
  [1m[35mChat Load (0.5ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "chats"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsControllerTest: test_should_update_chat
--------------------------------------------
  [1m[36mChat Load (0.3ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
Processing by ChatsController#update as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}, "id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"980190962"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user1@test.com') AND "users"."id" != 980190962) LIMIT 1[0m
  [1m[35mSQL (1.3ms)[0m  UPDATE "users" SET "name" = ?, "email" = ?, "sex" = ?, "password_digest" = ?, "phonenumber" = ?, "updated_at" = ? WHERE "users"."id" = ?  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$dXrj04FsIhYRqQtn1UNdeOEDpnR9mGKE5klEXZDFhMYwJ68CbCzK2"], ["phonenumber", "123456677777"], ["updated_at", "2018-12-21 05:01:09.407939"], ["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 19ms (ActiveRecord: 1.9ms)
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  INSERT INTO "users" ("name", "email", "sex", "password_digest", "phonenumber", "role", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$OaZ3jGNL8ZsvXHxOsmK20u9cL6uaZfx3zpdws2mp9cv1ofaEOSTxu"], ["phonenumber", ""], ["role", 1], ["status", "user"], ["created_at", "2018-12-21 05:01:09.436738"], ["updated_at", "2018-12-21 05:01:09.436738"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 13ms (ActiveRecord: 2.1ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mDELETE FROM "chats_users" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 980190962]]
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "users" WHERE "users"."id" = ?  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users?new=false
Completed 302 Found in 61ms (ActiveRecord: 2.5ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
FriendshipStateTest: test_delete_a_friend
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 13:01:09 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/3" for 127.0.0.1 at 2018-12-21 13:01:09 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"3"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:01:09 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.3ms)
  Rendered homes/home.html.erb within layouts/application (2.1ms)
  Rendered layouts/_login_panel.html.erb (5.4ms)
  Rendered layouts/_header.html.erb (8.6ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 14ms (Views: 13.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------
FriendshipStateTest: test_test_show_information_of_friend
---------------------------------------------------------
Started GET "/users/9" for 127.0.0.1 at 2018-12-21 13:01:09 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 9]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 13:01:09 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 4ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:01:09 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.5ms)
  Rendered layouts/_login_panel.html.erb (1.4ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 5.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (1.0ms)[0m  begin transaction
  [1m[36mFixture Delete (1.2ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.8ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:01:49', '2018-12-21 05:01:49', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:01:49', '2018-12-21 05:01:49', 298486374)[0m
  [1m[35mFixture Delete (2.3ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:01:49', '2018-12-21 05:01:49', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:01:49', '2018-12-21 05:01:49', 298486374)
  [1m[36m (2.4ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.4ms)[0m  begin transaction
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 13:01:49 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 54ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 13:01:50 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:01:50 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (25.3ms)
  Rendered homes/home.html.erb within layouts/application (49.9ms)
  Rendered layouts/_login_panel.html.erb (15.7ms)
  Rendered layouts/_header.html.erb (27.2ms)
  Rendered layouts/_content.html.erb (2.4ms)
Completed 200 OK in 172ms (Views: 169.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 13:01:50 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:01:50 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.2ms)
  Rendered homes/home.html.erb within layouts/application (3.1ms)
  Rendered layouts/_login_panel.html.erb (1.9ms)
  Rendered layouts/_header.html.erb (2.7ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 10ms (Views: 9.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-21 13:01:50 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 1332ms (ActiveRecord: 0.4ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:01:51 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.6ms)
  Rendered homes/home.html.erb within layouts/application (2.1ms)
  Rendered layouts/_login_panel.html.erb (1.2ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 7ms (Views: 6.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 13:01:51 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 10ms (ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-21 13:01:52 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$KYvU1ujlU7FalprHPya/XeGTbtbUogO3U7XefUMmwNWYpyp8t3OIC"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-21 05:01:52.017034"], ["updated_at", "2018-12-21 05:01:52.017034"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 13ms (ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started GET "/" for 127.0.0.1 at 2018-12-21 13:01:52 +0800
Processing by HomesController#home as HTML
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  Rendered homes/home.html.erb within layouts/application (36.7ms)
  Rendered layouts/_login_panel.html.erb (10.3ms)
  Rendered layouts/_header.html.erb (13.1ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 53ms (Views: 51.8ms | ActiveRecord: 0.5ms)
  [1m[35m (2.5ms)[0m  rollback transaction
  [1m[36m (5.7ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsControllerTest: test_should_create_chat
--------------------------------------------
  [1m[35mChat Load (1.3ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "chats"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------
ChatsControllerTest: test_should_update_chat
--------------------------------------------
  [1m[36mChat Load (0.2ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
Processing by ChatsController#update as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}, "id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
ChatsControllerTest: test_should_destroy_chat
---------------------------------------------
  [1m[35mChat Load (0.3ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "chats"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 13:01:52 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:01:52 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.5ms)
  Rendered homes/home.html.erb within layouts/application (2.0ms)
  Rendered layouts/_login_panel.html.erb (2.7ms)
  Rendered layouts/_header.html.erb (4.4ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 10ms (Views: 9.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("name", "email", "sex", "password_digest", "phonenumber", "role", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$q1KZ3zQ8iR0gCbualk9tquKhGUgk/j3FGI1sUk16zt2d.hHEfK6T6"], ["phonenumber", ""], ["role", 1], ["status", "user"], ["created_at", "2018-12-21 05:01:52.281020"], ["updated_at", "2018-12-21 05:01:52.281020"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 13ms (ActiveRecord: 1.3ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (1.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"980190962"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user1@test.com') AND "users"."id" != 980190962) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  UPDATE "users" SET "name" = ?, "email" = ?, "sex" = ?, "password_digest" = ?, "phonenumber" = ?, "updated_at" = ? WHERE "users"."id" = ?  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$.us4n9BAZjr1jw/M0sItruuVCB/mJdKeyTwhCtCxW/yPMoPSk0Ctu"], ["phonenumber", "123456677777"], ["updated_at", "2018-12-21 05:01:52.316574"], ["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 25ms (ActiveRecord: 2.0ms)
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "chats_users" WHERE "chats_users"."user_id" = ?  [["user_id", 980190962]]
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users?new=false
Completed 302 Found in 53ms (ActiveRecord: 2.1ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------
FriendshipStateTest: test_delete_a_friend
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 13:01:52 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/3" for 127.0.0.1 at 2018-12-21 13:01:52 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"3"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:01:52 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.3ms)
  Rendered homes/home.html.erb within layouts/application (3.0ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.6ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 8ms (Views: 7.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------
FriendshipStateTest: test_test_show_information_of_friend
---------------------------------------------------------
Started GET "/users/9" for 127.0.0.1 at 2018-12-21 13:01:52 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 9]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 13:01:52 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:01:52 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.6ms)
  Rendered layouts/_login_panel.html.erb (1.6ms)
  Rendered layouts/_header.html.erb (2.4ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 7ms (Views: 6.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 13:01:52 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (1.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 4ms (ActiveRecord: 1.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$dEusGhuzNc8npYXCLgt6b.bh3XEh6VPkJZXt75lFWGj0a5M9jvYgm"], ["created_at", "2018-12-21 05:01:52.567926"], ["updated_at", "2018-12-21 05:01:52.567926"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$u8VjygkLrIfRY3Cf2GN.Xebu9FuNKoe4XCO/9Lo98tV1MquwxJn2a"], ["created_at", "2018-12-21 05:01:52.642375"], ["updated_at", "2018-12-21 05:01:52.642375"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36m (5.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 13:01:52 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-21 13:01:52 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:01:52 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.3ms)
  Rendered homes/home.html.erb within layouts/application (1.7ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 6ms (Views: 5.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 13:01:52 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:01:52 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.0ms)
  Rendered homes/home.html.erb within layouts/application (1.4ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.4ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:01:52 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-21 13:01:52 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:01:52 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.5ms)
  Rendered homes/home.html.erb within layouts/application (2.1ms)
  Rendered layouts/_login_panel.html.erb (2.0ms)
  Rendered layouts/_header.html.erb (2.7ms)
  Rendered layouts/_content.html.erb (0.4ms)
Completed 200 OK in 9ms (Views: 8.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------
ChatsStateTest: test_delete_chat
--------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:01:52 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started DELETE "/chats/8" for 127.0.0.1 at 2018-12-21 13:01:52 +0800
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:01:52 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.9ms)
  Rendered homes/home.html.erb within layouts/application (2.3ms)
  Rendered layouts/_login_panel.html.erb (1.7ms)
  Rendered layouts/_header.html.erb (2.5ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 7ms (Views: 6.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:01:52 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-21 13:01:52 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:01:52 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (3.9ms)
  Rendered homes/home.html.erb within layouts/application (4.6ms)
  Rendered layouts/_login_panel.html.erb (1.8ms)
  Rendered layouts/_header.html.erb (2.5ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 13ms (Views: 10.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:01:52 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-21 13:01:52 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:01:52 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.0ms)
  Rendered homes/home.html.erb within layouts/application (2.6ms)
  Rendered layouts/_login_panel.html.erb (3.0ms)
  Rendered layouts/_header.html.erb (3.7ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 10ms (Views: 9.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (1.9ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (2.0ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:02:20', '2018-12-21 05:02:20', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:02:20', '2018-12-21 05:02:20', 298486374)[0m
  [1m[35mFixture Delete (1.6ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:02:20', '2018-12-21 05:02:20', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:02:20', '2018-12-21 05:02:20', 298486374)
  [1m[36m (1.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-21 13:02:20 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 1279ms (ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 13:02:21 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$2d8ROW0h8EGByHIxzD3b5OswQknrsv/eBADk3v.hcoEjZ1UA.2pqe"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-21 05:02:21.913073"], ["updated_at", "2018-12-21 05:02:21.913073"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 11ms (ActiveRecord: 0.9ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started GET "/" for 127.0.0.1 at 2018-12-21 13:02:21 +0800
Processing by HomesController#home as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  Rendered homes/home.html.erb within layouts/application (61.3ms)
  Rendered layouts/_login_panel.html.erb (22.1ms)
  Rendered layouts/_header.html.erb (30.2ms)
  Rendered layouts/_content.html.erb (1.6ms)
Completed 200 OK in 192ms (Views: 191.0ms | ActiveRecord: 0.3ms)
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-21 13:02:22 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 11ms (ActiveRecord: 0.4ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:02:22 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (3.2ms)
  Rendered homes/home.html.erb within layouts/application (14.3ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (1.6ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 19ms (Views: 17.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 13:02:22 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:02:22 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (10.6ms)
  Rendered homes/home.html.erb within layouts/application (11.2ms)
  Rendered layouts/_login_panel.html.erb (1.7ms)
  Rendered layouts/_header.html.erb (2.7ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 19ms (Views: 18.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 13:02:22 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 13:02:22 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:02:22 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.5ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (2.3ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 10ms (Views: 9.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 13:02:22 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 2ms (ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 13:02:22 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:02:22 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.1ms)
  Rendered homes/home.html.erb within layouts/application (2.9ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.4ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 7ms (Views: 6.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------------------
FriendshipStateTest: test_test_show_information_of_friend
---------------------------------------------------------
Started GET "/users/9" for 127.0.0.1 at 2018-12-21 13:02:22 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 9]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.3ms)
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 13:02:22 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:02:22 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.7ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (1.6ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------
FriendshipStateTest: test_delete_a_friend
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 13:02:22 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/3" for 127.0.0.1 at 2018-12-21 13:02:22 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"3"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:02:22 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.0ms)
  Rendered homes/home.html.erb within layouts/application (2.6ms)
  Rendered layouts/_login_panel.html.erb (2.3ms)
  Rendered layouts/_header.html.erb (3.3ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 10ms (Views: 8.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
ChatsControllerTest: test_should_destroy_chat
---------------------------------------------
  [1m[36mChat Load (0.4ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "chats"
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsControllerTest: test_should_create_chat
--------------------------------------------
  [1m[35mChat Load (0.3ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "chats"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------
ChatsControllerTest: test_should_update_chat
--------------------------------------------
  [1m[36mChat Load (0.2ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
Processing by ChatsController#update as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}, "id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("name", "email", "sex", "password_digest", "phonenumber", "role", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$bha5gN8hyP.3.QnwFxbgy.dLz3UJLEX3a7ytmSaRI5lNTOUEcE.t6"], ["phonenumber", ""], ["role", 1], ["status", "user"], ["created_at", "2018-12-21 05:02:22.530326"], ["updated_at", "2018-12-21 05:02:22.530326"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 15ms (ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (5.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mDELETE FROM "chats_users" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 980190962]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "users" WHERE "users"."id" = ?  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users?new=false
Completed 302 Found in 62ms (ActiveRecord: 1.8ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[36mUser Load (1.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"980190962"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user1@test.com') AND "users"."id" != 980190962) LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "users" SET "name" = ?, "email" = ?, "sex" = ?, "password_digest" = ?, "phonenumber" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$7YsXiRPgMv3fKRS.bOqYQ.UWpyorw0CGxyf.ki0wVgIgiul54bX4e"], ["phonenumber", "123456677777"], ["updated_at", "2018-12-21 05:02:22.631908"], ["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 12ms (ActiveRecord: 1.0ms)
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 13:02:22 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-21 13:02:22 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:02:22 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.9ms)
  Rendered homes/home.html.erb within layouts/application (2.6ms)
  Rendered layouts/_login_panel.html.erb (1.8ms)
  Rendered layouts/_header.html.erb (2.6ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 9ms (Views: 8.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$LReAJNK6UwdEF4hGbiVo9ORqZQN.wVY9GWlffnBEecPaj3chQ0jcG"], ["created_at", "2018-12-21 05:02:22.764817"], ["updated_at", "2018-12-21 05:02:22.764817"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (1.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.9ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$erqJcMlrCKAUklwtsn/GAOPvHHcSc2VDqokd7gF..m9CahBVFj.x."], ["created_at", "2018-12-21 05:02:22.826238"], ["updated_at", "2018-12-21 05:02:22.826238"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 13:02:22 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:02:22 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.6ms)
  Rendered layouts/_login_panel.html.erb (2.4ms)
  Rendered layouts/_header.html.erb (3.6ms)
  Rendered layouts/_content.html.erb (0.4ms)
Completed 200 OK in 8ms (Views: 7.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.4ms)[0m  begin transaction
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:02:22 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-21 13:02:22 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:02:22 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (3.6ms)
  Rendered homes/home.html.erb within layouts/application (4.1ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.4ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 8ms (Views: 7.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------
ChatsStateTest: test_delete_chat
--------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:02:22 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/chats/8" for 127.0.0.1 at 2018-12-21 13:02:22 +0800
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:02:22 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.6ms)
  Rendered layouts/_login_panel.html.erb (1.9ms)
  Rendered layouts/_header.html.erb (2.4ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 6ms (Views: 5.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:02:22 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-21 13:02:22 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:02:22 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.9ms)
  Rendered homes/home.html.erb within layouts/application (2.5ms)
  Rendered layouts/_login_panel.html.erb (2.4ms)
  Rendered layouts/_header.html.erb (3.0ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 8ms (Views: 7.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:02:22 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-21 13:02:22 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:02:22 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.4ms)
  Rendered homes/home.html.erb within layouts/application (2.3ms)
  Rendered layouts/_login_panel.html.erb (1.8ms)
  Rendered layouts/_header.html.erb (2.8ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 10ms (Views: 9.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.9ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (1.3ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:02:57', '2018-12-21 05:02:57', 980190962)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:02:57', '2018-12-21 05:02:57', 298486374)[0m
  [1m[35mFixture Delete (1.8ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:02:57', '2018-12-21 05:02:57', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:02:57', '2018-12-21 05:02:57', 298486374)
  [1m[36m (2.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 13:02:57 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 27ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:02:57 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (22.6ms)
  Rendered homes/home.html.erb within layouts/application (48.9ms)
  Rendered layouts/_login_panel.html.erb (8.5ms)
  Rendered layouts/_header.html.erb (13.5ms)
  Rendered layouts/_content.html.erb (1.1ms)
Completed 200 OK in 120ms (Views: 118.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 13:02:57 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 13:02:58 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:02:58 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.7ms)
  Rendered homes/home.html.erb within layouts/application (7.9ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 12ms (Views: 11.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 13:02:58 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 35ms (ActiveRecord: 0.4ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-21 13:02:58 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:02:58 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.3ms)
  Rendered homes/home.html.erb within layouts/application (1.7ms)
  Rendered layouts/_login_panel.html.erb (1.6ms)
  Rendered layouts/_header.html.erb (2.4ms)
  Rendered layouts/_content.html.erb (3.3ms)
Completed 200 OK in 10ms (Views: 9.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 13:02:58 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:02:58 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.5ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.1ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 6ms (Views: 4.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 13:02:58 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 2ms (ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$2cXxBNxVLdA4g7E2XWfWheveztots3euEyvCplo5r1jRgLDjuCGbO"], ["created_at", "2018-12-21 05:02:59.220028"], ["updated_at", "2018-12-21 05:02:59.220028"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35m (0.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$.mnSPXZmKJyeB.Ku5dfm3OMwoySYVyAuw1KyOEPioS.a4CeTc4xPm"], ["created_at", "2018-12-21 05:02:59.253345"], ["updated_at", "2018-12-21 05:02:59.253345"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("name", "email", "sex", "password_digest", "phonenumber", "role", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$u9GI2A4Jo0wbWKxMdDf2BunDCZB8PWHj1aD22uXAcR4TzOXfP5b6."], ["phonenumber", ""], ["role", 1], ["status", "user"], ["created_at", "2018-12-21 05:02:59.284867"], ["updated_at", "2018-12-21 05:02:59.284867"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 8ms (ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "chats_users" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 980190962]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "users" WHERE "users"."id" = ?  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users?new=false
Completed 302 Found in 38ms (ActiveRecord: 1.6ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"980190962"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user1@test.com') AND "users"."id" != 980190962) LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "users" SET "name" = ?, "email" = ?, "sex" = ?, "password_digest" = ?, "phonenumber" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$fjjA9CRKmbjHwtMaCaltUOpQ1KCPuIImYTFhw3PYRUEVfhzMSstiG"], ["phonenumber", "123456677777"], ["updated_at", "2018-12-21 05:02:59.352292"], ["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 13ms (ActiveRecord: 1.0ms)
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
FriendshipStateTest: test_delete_a_friend
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 13:02:59 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/3" for 127.0.0.1 at 2018-12-21 13:02:59 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"3"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:02:59 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.8ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------
FriendshipStateTest: test_test_show_information_of_friend
---------------------------------------------------------
Started GET "/users/9" for 127.0.0.1 at 2018-12-21 13:02:59 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 9]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 13:02:59 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:02:59 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.6ms)
  Rendered homes/home.html.erb within layouts/application (3.2ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (2.3ms)
Completed 200 OK in 10ms (Views: 9.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------
ChatsStateTest: test_delete_chat
--------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:02:59 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/chats/8" for 127.0.0.1 at 2018-12-21 13:02:59 +0800
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:02:59 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.2ms)
  Rendered homes/home.html.erb within layouts/application (2.9ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.4ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 9ms (Views: 8.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:02:59 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-21 13:02:59 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:02:59 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.8ms)
  Rendered homes/home.html.erb within layouts/application (2.3ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.6ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 5.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:02:59 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-21 13:02:59 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:02:59 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.3ms)
  Rendered homes/home.html.erb within layouts/application (3.1ms)
  Rendered layouts/_login_panel.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (1.1ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 5.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:02:59 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-21 13:02:59 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:02:59 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.8ms)
  Rendered homes/home.html.erb within layouts/application (2.5ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 7ms (Views: 6.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 13:02:59 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:02:59 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (0.9ms)
  Rendered homes/home.html.erb within layouts/application (1.2ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.4ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-21 13:02:59 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 12ms (ActiveRecord: 0.4ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-21 13:02:59 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 11ms (ActiveRecord: 0.6ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:02:59 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.5ms)
  Rendered layouts/_login_panel.html.erb (2.4ms)
  Rendered layouts/_header.html.erb (3.5ms)
  Rendered layouts/_content.html.erb (0.5ms)
Completed 200 OK in 8ms (Views: 7.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-21 13:02:59 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$l7EgnwoOQec1sM5.G0950ewM/pBh8Q75rifaLpTn.3llMTB2EcVzi"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-21 05:02:59.661820"], ["updated_at", "2018-12-21 05:02:59.661820"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 12ms (ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started GET "/" for 127.0.0.1 at 2018-12-21 13:02:59 +0800
Processing by HomesController#home as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  Rendered homes/home.html.erb within layouts/application (0.8ms)
  Rendered layouts/_login_panel.html.erb (2.5ms)
  Rendered layouts/_header.html.erb (4.0ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 7ms (Views: 6.6ms | ActiveRecord: 0.1ms)
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsControllerTest: test_should_create_chat
--------------------------------------------
  [1m[35mChat Load (0.3ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "chats"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
ChatsControllerTest: test_should_destroy_chat
---------------------------------------------
  [1m[36mChat Load (0.2ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "chats"
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsControllerTest: test_should_update_chat
--------------------------------------------
  [1m[35mChat Load (0.2ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by ChatsController#update as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}, "id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.8ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:03:33', '2018-12-21 05:03:33', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:03:33', '2018-12-21 05:03:33', 298486374)[0m
  [1m[35mFixture Delete (0.9ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:03:33', '2018-12-21 05:03:33', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:03:33', '2018-12-21 05:03:33', 298486374)
  [1m[36m (1.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:03:33 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 27ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-21 13:03:33 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:03:33 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (14.9ms)
  Rendered homes/home.html.erb within layouts/application (34.0ms)
  Rendered layouts/_login_panel.html.erb (7.2ms)
  Rendered layouts/_header.html.erb (12.3ms)
  Rendered layouts/_content.html.erb (1.4ms)
Completed 200 OK in 96ms (Views: 95.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:03:33 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-21 13:03:33 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:03:33 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.5ms)
  Rendered homes/home.html.erb within layouts/application (2.0ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.4ms)
  Rendered layouts/_content.html.erb (0.4ms)
Completed 200 OK in 6ms (Views: 5.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------
ChatsStateTest: test_delete_chat
--------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:03:33 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/chats/8" for 127.0.0.1 at 2018-12-21 13:03:33 +0800
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:03:33 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.6ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.4ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 5ms (Views: 4.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:03:33 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-21 13:03:33 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:03:33 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.9ms)
  Rendered homes/home.html.erb within layouts/application (2.3ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 6ms (Views: 5.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (1.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "chats_users" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 980190962]]
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "users" WHERE "users"."id" = ?  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users?new=false
Completed 302 Found in 90ms (ActiveRecord: 1.9ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (1.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"980190962"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user1@test.com') AND "users"."id" != 980190962) LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "users" SET "name" = ?, "email" = ?, "sex" = ?, "password_digest" = ?, "phonenumber" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$HisCT/P0WDh9kJaIyW49LOlaFCHPAHhoGsF91ZV8gsDsVE8uECptu"], ["phonenumber", "123456677777"], ["updated_at", "2018-12-21 05:03:33.911343"], ["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 52ms (ActiveRecord: 1.0ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("name", "email", "sex", "password_digest", "phonenumber", "role", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$cq7bZP00EjTLfjdmyLiQMuXPNL9Td0FhvqatSrgwl38dNgqV3dm1K"], ["phonenumber", ""], ["role", 1], ["status", "user"], ["created_at", "2018-12-21 05:03:33.934555"], ["updated_at", "2018-12-21 05:03:33.934555"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 10ms (ActiveRecord: 1.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 13:03:33 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:03:33 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.7ms)
  Rendered homes/home.html.erb within layouts/application (3.9ms)
  Rendered layouts/_login_panel.html.erb (2.2ms)
  Rendered layouts/_header.html.erb (3.0ms)
  Rendered layouts/_content.html.erb (0.5ms)
Completed 200 OK in 10ms (Views: 9.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-21 13:03:33 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 1133ms (ActiveRecord: 0.5ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:03:35 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.5ms)
  Rendered homes/home.html.erb within layouts/application (2.0ms)
  Rendered layouts/_login_panel.html.erb (1.5ms)
  Rendered layouts/_header.html.erb (2.5ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 7ms (Views: 6.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-21 13:03:35 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$aSrpaCpEuUVuvmrdHzSTTeqVlFJoWZg24.ixCY5JYPYVV7PwiZGhS"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-21 05:03:35.152998"], ["updated_at", "2018-12-21 05:03:35.152998"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 14ms (ActiveRecord: 1.2ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
Started GET "/" for 127.0.0.1 at 2018-12-21 13:03:35 +0800
Processing by HomesController#home as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  Rendered homes/home.html.erb within layouts/application (0.8ms)
  Rendered layouts/_login_panel.html.erb (1.7ms)
  Rendered layouts/_header.html.erb (3.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 7ms (Views: 6.5ms | ActiveRecord: 0.1ms)
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 13:03:35 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 10ms (ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 13:03:35 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 2ms (ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 13:03:35 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:03:35 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.9ms)
  Rendered homes/home.html.erb within layouts/application (2.5ms)
  Rendered layouts/_login_panel.html.erb (3.0ms)
  Rendered layouts/_header.html.erb (4.2ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 11ms (Views: 10.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------
FriendshipStateTest: test_test_show_information_of_friend
---------------------------------------------------------
Started GET "/users/9" for 127.0.0.1 at 2018-12-21 13:03:35 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 9]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 13:03:35 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:03:35 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.9ms)
  Rendered homes/home.html.erb within layouts/application (2.5ms)
  Rendered layouts/_login_panel.html.erb (1.7ms)
  Rendered layouts/_header.html.erb (2.3ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 8ms (Views: 6.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------
FriendshipStateTest: test_delete_a_friend
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 13:03:35 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/3" for 127.0.0.1 at 2018-12-21 13:03:35 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"3"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:03:35 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.5ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.6ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 9ms (Views: 8.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 13:03:35 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:03:35 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.9ms)
  Rendered homes/home.html.erb within layouts/application (2.6ms)
  Rendered layouts/_login_panel.html.erb (1.5ms)
  Rendered layouts/_header.html.erb (2.2ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 9ms (Views: 7.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 13:03:35 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 13:03:35 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:03:35 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.6ms)
  Rendered homes/home.html.erb within layouts/application (2.0ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 5.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 13:03:35 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-21 13:03:35 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:03:35 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.5ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 5ms (Views: 4.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsControllerTest: test_should_create_chat
--------------------------------------------
  [1m[35mChat Load (0.3ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "chats"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------
ChatsControllerTest: test_should_destroy_chat
---------------------------------------------
  [1m[36mChat Load (0.6ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "chats"
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsControllerTest: test_should_update_chat
--------------------------------------------
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by ChatsController#update as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}, "id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$KMocSQ2ZkdmQPKcHHVAJFObExFtwLBL38XZ15l2pI0rWV5/3Y0nkW"], ["created_at", "2018-12-21 05:03:35.562112"], ["updated_at", "2018-12-21 05:03:35.562112"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36m (1.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$UbEawED7KG7TK8n02ffZbu4cfcVsafhNyFQSRl5JJR39qi3Sjl.1G"], ["created_at", "2018-12-21 05:03:35.614963"], ["updated_at", "2018-12-21 05:03:35.614963"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.8ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:04:26', '2018-12-21 05:04:26', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:04:26', '2018-12-21 05:04:26', 298486374)[0m
  [1m[35mFixture Delete (1.0ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:04:26', '2018-12-21 05:04:26', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:04:26', '2018-12-21 05:04:26', 298486374)
  [1m[36m (1.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsControllerTest: test_should_create_chat
--------------------------------------------
  [1m[36mChat Load (0.4ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "chats"
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 16ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
ChatsControllerTest: test_should_destroy_chat
---------------------------------------------
  [1m[35mChat Load (0.7ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "chats"
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsControllerTest: test_should_update_chat
--------------------------------------------
  [1m[36mChat Load (0.2ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
Processing by ChatsController#update as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}, "id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-21 13:04:26 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 928ms (ActiveRecord: 0.4ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:04:27 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (17.1ms)
  Rendered homes/home.html.erb within layouts/application (30.8ms)
  Rendered layouts/_login_panel.html.erb (7.0ms)
  Rendered layouts/_header.html.erb (13.8ms)
  Rendered layouts/_content.html.erb (1.7ms)
Completed 200 OK in 97ms (Views: 96.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-21 13:04:28 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$f.CoxMYn5PQbxIIW952gauhZOkDoglLXLWLbynXLjB6HjCsMN2DE6"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-21 05:04:28.099800"], ["updated_at", "2018-12-21 05:04:28.099800"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 12ms (ActiveRecord: 1.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Started GET "/" for 127.0.0.1 at 2018-12-21 13:04:28 +0800
Processing by HomesController#home as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  Rendered homes/home.html.erb within layouts/application (5.9ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 10ms (Views: 9.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 13:04:28 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 7ms (ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$z1NzH8feJXxoKhbyLnbl2uBSmwaT9h5r7XZ9DkFTVgRqdBn.PwIgG"], ["created_at", "2018-12-21 05:04:28.210611"], ["updated_at", "2018-12-21 05:04:28.210611"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$VMXGwOAYiO.hhW.CHpw6S.ttJN3.n0tb.S3f.03mvYz1B9eZnNzPO"], ["created_at", "2018-12-21 05:04:28.239015"], ["updated_at", "2018-12-21 05:04:28.239015"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 13:04:28 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:04:28 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.5ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.2ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 13:04:28 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 13:04:28 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:04:28 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.8ms)
  Rendered homes/home.html.erb within layouts/application (2.5ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.6ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 7ms (Views: 6.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 13:04:28 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:04:28 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.4ms)
  Rendered layouts/_login_panel.html.erb (1.4ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 6ms (Views: 5.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 13:04:28 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 2ms (ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:04:28 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-21 13:04:28 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:04:28 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.0ms)
  Rendered homes/home.html.erb within layouts/application (1.7ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.2ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 6ms (Views: 5.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------
ChatsStateTest: test_delete_chat
--------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:04:28 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started DELETE "/chats/8" for 127.0.0.1 at 2018-12-21 13:04:28 +0800
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:04:28 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.3ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.1ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 4ms (Views: 3.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:04:28 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-21 13:04:28 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:04:28 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.7ms)
  Rendered homes/home.html.erb within layouts/application (2.3ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.3ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 5.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:04:28 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-21 13:04:28 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:04:28 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.0ms)
  Rendered homes/home.html.erb within layouts/application (1.3ms)
  Rendered layouts/_login_panel.html.erb (1.3ms)
  Rendered layouts/_header.html.erb (2.5ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 6ms (Views: 5.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}}
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("name", "email", "sex", "password_digest", "phonenumber", "role", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$WWXJpAmrtc9Pitd6Tr3JW.Arn.dF.17c5BJ/KijMEBAhnOZqtTBTS"], ["phonenumber", ""], ["role", 1], ["status", "user"], ["created_at", "2018-12-21 05:04:28.483832"], ["updated_at", "2018-12-21 05:04:28.483832"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 13ms (ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (1.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"980190962"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user1@test.com') AND "users"."id" != 980190962) LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "users" SET "name" = ?, "email" = ?, "sex" = ?, "password_digest" = ?, "phonenumber" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$KMB2/ULLbd5JNiRJu3ndeuDdmqOZfRT6R1d80TjVSB4z7wjmkCdUG"], ["phonenumber", "123456677777"], ["updated_at", "2018-12-21 05:04:28.506280"], ["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 13ms (ActiveRecord: 0.9ms)
  [1m[36m (1.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "chats_users" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 980190962]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "users" WHERE "users"."id" = ?  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users?new=false
Completed 302 Found in 43ms (ActiveRecord: 1.4ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------
FriendshipStateTest: test_delete_a_friend
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 13:04:28 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/3" for 127.0.0.1 at 2018-12-21 13:04:28 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"3"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:04:28 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.3ms)
  Rendered homes/home.html.erb within layouts/application (1.9ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 6ms (Views: 5.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.6ms)[0m  begin transaction
---------------------------------------------------------
FriendshipStateTest: test_test_show_information_of_friend
---------------------------------------------------------
Started GET "/users/9" for 127.0.0.1 at 2018-12-21 13:04:28 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 9]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 13:04:28 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:04:28 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.6ms)
  Rendered homes/home.html.erb within layouts/application (2.2ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.2ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 6ms (Views: 5.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 13:04:28 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 4ms (ActiveRecord: 0.3ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-21 13:04:28 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:04:28 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.6ms)
  Rendered homes/home.html.erb within layouts/application (2.0ms)
  Rendered layouts/_login_panel.html.erb (2.1ms)
  Rendered layouts/_header.html.erb (3.2ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 8ms (Views: 7.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 13:04:28 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:04:28 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.1ms)
  Rendered homes/home.html.erb within layouts/application (2.8ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (1.6ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 7ms (Views: 6.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.8ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (2.9ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:05:13', '2018-12-21 05:05:13', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:05:13', '2018-12-21 05:05:13', 298486374)[0m
  [1m[35mFixture Delete (1.0ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:05:13', '2018-12-21 05:05:13', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:05:13', '2018-12-21 05:05:13', 298486374)
  [1m[36m (6.4ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 13:05:13 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 27ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:05:13 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (22.2ms)
  Rendered homes/home.html.erb within layouts/application (37.9ms)
  Rendered layouts/_login_panel.html.erb (8.3ms)
  Rendered layouts/_header.html.erb (13.1ms)
  Rendered layouts/_content.html.erb (1.0ms)
Completed 200 OK in 103ms (Views: 101.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 13:05:13 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 13:05:13 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:05:13 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.5ms)
  Rendered layouts/_login_panel.html.erb (4.6ms)
  Rendered layouts/_header.html.erb (5.0ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 9ms (Views: 8.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 13:05:13 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:05:13 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (3.0ms)
  Rendered homes/home.html.erb within layouts/application (4.7ms)
  Rendered layouts/_login_panel.html.erb (1.6ms)
  Rendered layouts/_header.html.erb (2.4ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 11ms (Views: 10.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
FriendshipStateTest: test_delete_a_friend
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 13:05:13 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/3" for 127.0.0.1 at 2018-12-21 13:05:13 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"3"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:05:13 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.8ms)
  Rendered homes/home.html.erb within layouts/application (3.7ms)
  Rendered layouts/_login_panel.html.erb (1.6ms)
  Rendered layouts/_header.html.erb (2.5ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 11ms (Views: 10.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------
FriendshipStateTest: test_test_show_information_of_friend
---------------------------------------------------------
Started GET "/users/9" for 127.0.0.1 at 2018-12-21 13:05:13 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 9]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 18ms (ActiveRecord: 0.3ms)
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 13:05:13 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:05:13 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (4.7ms)
  Rendered homes/home.html.erb within layouts/application (5.2ms)
  Rendered layouts/_login_panel.html.erb (1.6ms)
  Rendered layouts/_header.html.erb (2.3ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 10ms (Views: 9.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 13:05:13 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:05:13 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.3ms)
  Rendered homes/home.html.erb within layouts/application (1.6ms)
  Rendered layouts/_login_panel.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (1.1ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$ch9D5ew34gcsxswcFUTv6.G0u0YnYV.s8ks6wOG3YFYw37qryd3T6"], ["created_at", "2018-12-21 05:05:14.602510"], ["updated_at", "2018-12-21 05:05:14.602510"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$aLi.w4.DkRhhGW6FWj4CH.b2lct8qauJqz3gV/Z9IAteI1TBJdkLm"], ["created_at", "2018-12-21 05:05:14.637577"], ["updated_at", "2018-12-21 05:05:14.637577"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 13:05:14 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-21 13:05:14 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:05:14 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.1ms)
  Rendered homes/home.html.erb within layouts/application (2.8ms)
  Rendered layouts/_login_panel.html.erb (1.4ms)
  Rendered layouts/_header.html.erb (4.4ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 10ms (Views: 9.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "users" ("name", "email", "sex", "password_digest", "phonenumber", "role", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$cdUC5EDtEiYVresoCJ0GseUvO0ii2kaP1vSZaFXJVk/mqgY/nI.s."], ["phonenumber", ""], ["role", 1], ["status", "user"], ["created_at", "2018-12-21 05:05:14.766513"], ["updated_at", "2018-12-21 05:05:14.766513"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 11ms (ActiveRecord: 1.2ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"980190962"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user1@test.com') AND "users"."id" != 980190962) LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  UPDATE "users" SET "name" = ?, "email" = ?, "sex" = ?, "password_digest" = ?, "phonenumber" = ?, "updated_at" = ? WHERE "users"."id" = ?  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$64EhtA/4UbrVXAYyZjo5iOQlNpb38WIbuUVnLr0rcjGrOmwTfSrxO"], ["phonenumber", "123456677777"], ["updated_at", "2018-12-21 05:05:14.791633"], ["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 16ms (ActiveRecord: 1.0ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "chats_users" WHERE "chats_users"."user_id" = ?  [["user_id", 980190962]]
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users?new=false
Completed 302 Found in 41ms (ActiveRecord: 1.6ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 13:05:14 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 15ms (ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-21 13:05:14 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 7ms (ActiveRecord: 0.3ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:05:14 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.6ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.2ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 13:05:14 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$iS3GniXgQYfE2OBpWRy4vOcpHh6aQOOs8rqmL9n49vIDX.mMfKXx."], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-21 05:05:14.928633"], ["updated_at", "2018-12-21 05:05:14.928633"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 8ms (ActiveRecord: 0.7ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started GET "/" for 127.0.0.1 at 2018-12-21 13:05:14 +0800
Processing by HomesController#home as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  Rendered homes/home.html.erb within layouts/application (1.3ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (2.5ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 8ms (Views: 6.8ms | ActiveRecord: 0.2ms)
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:05:14 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-21 13:05:14 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:05:14 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.6ms)
  Rendered homes/home.html.erb within layouts/application (2.0ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.4ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 6ms (Views: 5.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:05:14 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-21 13:05:14 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:05:15 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.7ms)
  Rendered homes/home.html.erb within layouts/application (3.4ms)
  Rendered layouts/_login_panel.html.erb (1.6ms)
  Rendered layouts/_header.html.erb (2.5ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 10ms (Views: 8.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------
ChatsStateTest: test_delete_chat
--------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:05:15 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started DELETE "/chats/8" for 127.0.0.1 at 2018-12-21 13:05:15 +0800
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:05:15 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.8ms)
  Rendered homes/home.html.erb within layouts/application (2.3ms)
  Rendered layouts/_login_panel.html.erb (11.0ms)
  Rendered layouts/_header.html.erb (15.1ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 23ms (Views: 22.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:05:15 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-21 13:05:15 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 5ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:05:15 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.4ms)
  Rendered homes/home.html.erb within layouts/application (1.8ms)
  Rendered layouts/_login_panel.html.erb (1.4ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 6ms (Views: 5.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
ChatsControllerTest: test_should_destroy_chat
---------------------------------------------
  [1m[36mChat Load (0.3ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "chats"
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsControllerTest: test_should_update_chat
--------------------------------------------
  [1m[35mChat Load (0.6ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by ChatsController#update as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}, "id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------
ChatsControllerTest: test_should_create_chat
--------------------------------------------
  [1m[36mChat Load (0.8ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "chats"
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 13:05:15 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 3ms (ActiveRecord: 0.4ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (3.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.9ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.7ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:05:58', '2018-12-21 05:05:58', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:05:58', '2018-12-21 05:05:58', 298486374)[0m
  [1m[35mFixture Delete (1.2ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:05:58', '2018-12-21 05:05:58', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:05:58', '2018-12-21 05:05:58', 298486374)
  [1m[36m (1.4ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 13:05:58 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (1.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 47ms (ActiveRecord: 1.1ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 13:05:58 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 941ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-21 13:05:59 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 8ms (ActiveRecord: 0.4ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:05:59 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (25.0ms)
  Rendered homes/home.html.erb within layouts/application (49.7ms)
  Rendered layouts/_login_panel.html.erb (9.2ms)
  Rendered layouts/_header.html.erb (13.9ms)
  Rendered layouts/_content.html.erb (1.1ms)
Completed 200 OK in 171ms (Views: 170.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 13:06:00 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$zv74S1GI6pAlMWDvzyjSIea4l4hDJ.ySvxGBlKsXbPsIrGMi4ow86"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-21 05:06:00.180124"], ["updated_at", "2018-12-21 05:06:00.180124"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 17ms (ActiveRecord: 1.2ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started GET "/" for 127.0.0.1 at 2018-12-21 13:06:00 +0800
Processing by HomesController#home as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  Rendered homes/home.html.erb within layouts/application (2.5ms)
  Rendered layouts/_login_panel.html.erb (1.7ms)
  Rendered layouts/_header.html.erb (3.9ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 11ms (Views: 9.4ms | ActiveRecord: 0.4ms)
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "chats_users" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 980190962]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "users" WHERE "users"."id" = ?  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users?new=false
Completed 302 Found in 42ms (ActiveRecord: 1.4ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "sex", "password_digest", "phonenumber", "role", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$g5XtfkbhKsnqMVq.VwV1TuHj23ouIg0mekza33d4s1VDKGtqwII1S"], ["phonenumber", ""], ["role", 1], ["status", "user"], ["created_at", "2018-12-21 05:06:00.300917"], ["updated_at", "2018-12-21 05:06:00.300917"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 9ms (ActiveRecord: 0.8ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"980190962"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user1@test.com') AND "users"."id" != 980190962) LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  UPDATE "users" SET "name" = ?, "email" = ?, "sex" = ?, "password_digest" = ?, "phonenumber" = ?, "updated_at" = ? WHERE "users"."id" = ?  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$dGiiZ4PAJOg.nE1y8iCcxu4hpPV8ZafWVoqhUCowp.yjJPCiMRtDe"], ["phonenumber", "123456677777"], ["updated_at", "2018-12-21 05:06:00.345462"], ["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 24ms (ActiveRecord: 2.3ms)
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 13:06:00 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 13:06:00 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:06:00 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (3.4ms)
  Rendered homes/home.html.erb within layouts/application (6.5ms)
  Rendered layouts/_login_panel.html.erb (1.4ms)
  Rendered layouts/_header.html.erb (2.1ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 14ms (Views: 12.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 13:06:00 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:06:00 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.5ms)
  Rendered layouts/_login_panel.html.erb (2.6ms)
  Rendered layouts/_header.html.erb (3.8ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 10ms (Views: 9.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
ChatsControllerTest: test_should_destroy_chat
---------------------------------------------
  [1m[35mChat Load (0.4ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "chats"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsControllerTest: test_should_update_chat
--------------------------------------------
  [1m[36mChat Load (0.5ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
Processing by ChatsController#update as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}, "id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsControllerTest: test_should_create_chat
--------------------------------------------
  [1m[35mChat Load (0.3ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "chats"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 13:06:00 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:06:00 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (3.0ms)
  Rendered homes/home.html.erb within layouts/application (3.6ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 15ms (Views: 12.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 13:06:00 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:06:00 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.0ms)
  Rendered homes/home.html.erb within layouts/application (1.4ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.3ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:06:00 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-21 13:06:00 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:06:00 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.5ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.3ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 5ms (Views: 4.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:06:00 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 4ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-21 13:06:00 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:06:00 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.5ms)
  Rendered layouts/_login_panel.html.erb (1.3ms)
  Rendered layouts/_header.html.erb (2.0ms)
  Rendered layouts/_content.html.erb (0.4ms)
Completed 200 OK in 14ms (Views: 13.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------
ChatsStateTest: test_delete_chat
--------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:06:00 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/chats/8" for 127.0.0.1 at 2018-12-21 13:06:00 +0800
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:06:00 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.3ms)
  Rendered homes/home.html.erb within layouts/application (1.6ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.4ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 4.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:06:00 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-21 13:06:00 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:06:00 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (4.3ms)
  Rendered homes/home.html.erb within layouts/application (4.6ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 8ms (Views: 8.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 13:06:00 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-21 13:06:00 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:06:00 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.3ms)
  Rendered homes/home.html.erb within layouts/application (1.8ms)
  Rendered layouts/_login_panel.html.erb (1.4ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 6ms (Views: 5.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------------------
FriendshipStateTest: test_test_show_information_of_friend
---------------------------------------------------------
Started GET "/users/9" for 127.0.0.1 at 2018-12-21 13:06:00 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 9]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 13:06:00 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:06:00 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (0.9ms)
  Rendered homes/home.html.erb within layouts/application (1.2ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.2ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 8ms (Views: 7.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
FriendshipStateTest: test_delete_a_friend
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 13:06:00 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/3" for 127.0.0.1 at 2018-12-21 13:06:00 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"3"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:06:00 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.3ms)
  Rendered homes/home.html.erb within layouts/application (1.9ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.6ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 7ms (Views: 6.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$7Eatn4yfvo0xh4I/ySjg7eRWaqKY9Cx6WX.QtLVUw/yQhnH5TO7xS"], ["created_at", "2018-12-21 05:06:00.914828"], ["updated_at", "2018-12-21 05:06:00.914828"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$RHmnnMZVQUKGhtp6Kf6K9uBViS1O62KhgZb2ckhjqNO9wNrRCkyXS"], ["created_at", "2018-12-21 05:06:00.932922"], ["updated_at", "2018-12-21 05:06:00.932922"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (1.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (1.3ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:09:49', '2018-12-21 05:09:49', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:09:49', '2018-12-21 05:09:49', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "messages"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "created_at", "updated_at", "id") VALUES ('MyText', NULL, '2018-12-21 05:09:49', '2018-12-21 05:09:49', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "messages" ("body", "user_id", "created_at", "updated_at", "id") VALUES ('MyText', NULL, '2018-12-21 05:09:49', '2018-12-21 05:09:49', 298486374)
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:09:49', '2018-12-21 05:09:49', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:09:49', '2018-12-21 05:09:49', 298486374)[0m
  [1m[35m (1.9ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 13:09:49 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 26ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:09:49 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (16.0ms)
  Rendered homes/home.html.erb within layouts/application (30.3ms)
  Rendered layouts/_login_panel.html.erb (11.2ms)
  Rendered layouts/_header.html.erb (16.4ms)
  Rendered layouts/_content.html.erb (1.4ms)
Completed 200 OK in 102ms (Views: 101.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 13:09:49 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 13:09:49 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:09:49 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.4ms)
  Rendered homes/home.html.erb within layouts/application (3.0ms)
  Rendered layouts/_login_panel.html.erb (1.3ms)
  Rendered layouts/_header.html.erb (2.0ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 8ms (Views: 7.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 13:09:49 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 18ms (ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-21 13:09:49 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 1030ms (ActiveRecord: 0.4ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 13:09:50 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$sIMQ0keZk.TAOLTn6KuUa.2nVjDYkaGS8JaBeuaq88fLKMR8IkUyO"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-21 05:09:50.978467"], ["updated_at", "2018-12-21 05:09:50.978467"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 9ms (ActiveRecord: 0.7ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started GET "/" for 127.0.0.1 at 2018-12-21 13:09:50 +0800
Processing by HomesController#home as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  Rendered homes/home.html.erb within layouts/application (1.1ms)
  Rendered layouts/_login_panel.html.erb (1.6ms)
  Rendered layouts/_header.html.erb (4.7ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 8ms (Views: 7.5ms | ActiveRecord: 0.2ms)
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-21 13:09:51 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 17ms (ActiveRecord: 0.6ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:09:51 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.3ms)
  Rendered homes/home.html.erb within layouts/application (3.1ms)
  Rendered layouts/_login_panel.html.erb (1.7ms)
  Rendered layouts/_header.html.erb (2.6ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 9ms (Views: 8.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------
FriendshipStateTest: test_delete_a_friend
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 13:09:51 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/3" for 127.0.0.1 at 2018-12-21 13:09:51 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"3"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:09:51 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.6ms)
  Rendered homes/home.html.erb within layouts/application (2.0ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.6ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 9ms (Views: 8.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------
FriendshipStateTest: test_test_show_information_of_friend
---------------------------------------------------------
Started GET "/users/9" for 127.0.0.1 at 2018-12-21 13:09:51 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 9]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 13:09:51 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:09:51 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.1ms)
  Rendered homes/home.html.erb within layouts/application (2.8ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 8ms (Views: 6.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 13:09:51 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:09:51 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.3ms)
  Rendered homes/home.html.erb within layouts/application (1.8ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.2ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (1.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$wv2vA2kQVVVgS3nd31j/FetoBXUzAQWaaf/sZpAvEDXi.sk8OE8Hu"], ["created_at", "2018-12-21 05:09:51.266212"], ["updated_at", "2018-12-21 05:09:51.266212"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (1.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$tEewCZNZJDEEhO5vufu6OumzZnHm.lT4FCV5E1/0Ft2XVad0AGuCm"], ["created_at", "2018-12-21 05:09:51.284382"], ["updated_at", "2018-12-21 05:09:51.284382"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35m (1.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.6ms)[0m  [1mbegin transaction[0m
-------------------------------------------
MessagesControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mMessage Load (0.3ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
MessagesControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
MessagesControllerTest: test_should_destroy_message
---------------------------------------------------
  [1m[35mMessage Load (0.2ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "messages"[0m
Processing by MessagesController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36mMessage Load (0.3ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35mChat Load (0.2ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "messages" WHERE "messages"."id" = ?  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 11435ms (ActiveRecord: 1.1ms)
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
MessagesControllerTest: test_should_create_message
--------------------------------------------------
  [1m[35mMessage Load (0.6ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "messages"[0m
Processing by MessagesController#create as HTML
  Parameters: {"message"=>{}}
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
MessagesControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------
MessagesControllerTest: test_should_update_message
--------------------------------------------------
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------
MessagesControllerTest: test_should_show_message
------------------------------------------------
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
---------------------------------------------
ChatsControllerTest: test_should_destroy_chat
---------------------------------------------
  [1m[36mChat Load (0.6ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "chats"
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsControllerTest: test_should_create_chat
--------------------------------------------
  [1m[35mChat Load (0.2ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "chats"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------
ChatsControllerTest: test_should_update_chat
--------------------------------------------
  [1m[36mChat Load (0.7ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
Processing by ChatsController#update as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}, "id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[35mUser Load (2.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "chats_users" WHERE "chats_users"."user_id" = ?  [["user_id", 980190962]]
  [1m[36mSQL (0.9ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users?new=false
Completed 302 Found in 50ms (ActiveRecord: 2.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"980190962"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user1@test.com') AND "users"."id" != 980190962) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  UPDATE "users" SET "name" = ?, "email" = ?, "sex" = ?, "password_digest" = ?, "phonenumber" = ?, "updated_at" = ? WHERE "users"."id" = ?  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$9q6y2v7CfitWVkBO0.YV2.wkWsSczZMbVpgNj9PtM9pcqusLuKz8S"], ["phonenumber", "123456677777"], ["updated_at", "2018-12-21 05:10:04.180592"], ["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 20ms (ActiveRecord: 1.6ms)
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("name", "email", "sex", "password_digest", "phonenumber", "role", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$NZ39uIASDpvu7ZAOBngFZOdjbY6UFD7iXPyZucz5UpooYm/lZGy6y"], ["phonenumber", ""], ["role", 1], ["status", "user"], ["created_at", "2018-12-21 05:10:04.208236"], ["updated_at", "2018-12-21 05:10:04.208236"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 12ms (ActiveRecord: 1.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 13:10:04 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-21 13:10:04 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:10:04 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.3ms)
  Rendered homes/home.html.erb within layouts/application (2.8ms)
  Rendered layouts/_login_panel.html.erb (1.2ms)
  Rendered layouts/_header.html.erb (2.2ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 8ms (Views: 7.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 13:10:04 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:10:04 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.7ms)
  Rendered homes/home.html.erb within layouts/application (2.2ms)
  Rendered layouts/_login_panel.html.erb (1.8ms)
  Rendered layouts/_header.html.erb (2.6ms)
  Rendered layouts/_content.html.erb (0.4ms)
Completed 200 OK in 8ms (Views: 7.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:10:04 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-21 13:10:04 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:10:04 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.1ms)
  Rendered homes/home.html.erb within layouts/application (3.1ms)
  Rendered layouts/_login_panel.html.erb (1.6ms)
  Rendered layouts/_header.html.erb (2.2ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 12ms (Views: 10.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------
ChatsStateTest: test_delete_chat
--------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:10:04 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/chats/8" for 127.0.0.1 at 2018-12-21 13:10:04 +0800
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:10:04 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.6ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 6ms (Views: 5.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:10:04 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-21 13:10:04 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:10:04 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.6ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.6ms)
Completed 200 OK in 7ms (Views: 6.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:10:04 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-21 13:10:04 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:10:04 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.0ms)
  Rendered homes/home.html.erb within layouts/application (1.3ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  begin transaction
  [1m[36mFixture Delete (2.1ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.7ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:14:23', '2018-12-21 05:14:23', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:14:23', '2018-12-21 05:14:23', 298486374)[0m
  [1m[35mFixture Delete (3.5ms)[0m  DELETE FROM "messages"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "created_at", "updated_at", "id") VALUES ('MyText', NULL, '2018-12-21 05:14:23', '2018-12-21 05:14:23', 980190962)[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "messages" ("body", "user_id", "created_at", "updated_at", "id") VALUES ('MyText', NULL, '2018-12-21 05:14:23', '2018-12-21 05:14:23', 298486374)
  [1m[36mFixture Delete (1.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:14:23', '2018-12-21 05:14:23', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:14:23', '2018-12-21 05:14:23', 298486374)[0m
  [1m[35m (1.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 13:14:23 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 29ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:14:23 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (32.0ms)
  Rendered homes/home.html.erb within layouts/application (52.7ms)
  Rendered layouts/_login_panel.html.erb (8.8ms)
  Rendered layouts/_header.html.erb (17.2ms)
  Rendered layouts/_content.html.erb (1.3ms)
Completed 200 OK in 135ms (Views: 134.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 13:14:23 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 13:14:23 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:14:23 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (5.1ms)
  Rendered homes/home.html.erb within layouts/application (5.7ms)
  Rendered layouts/_login_panel.html.erb (1.2ms)
  Rendered layouts/_header.html.erb (1.6ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 10ms (Views: 9.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:14:23 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-21 13:14:23 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:14:23 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.4ms)
  Rendered homes/home.html.erb within layouts/application (1.9ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (1.6ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 6ms (Views: 5.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:14:23 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-21 13:14:23 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:14:23 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.8ms)
  Rendered homes/home.html.erb within layouts/application (5.7ms)
  Rendered layouts/_login_panel.html.erb (1.6ms)
  Rendered layouts/_header.html.erb (2.3ms)
  Rendered layouts/_content.html.erb (3.7ms)
Completed 200 OK in 18ms (Views: 16.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------
ChatsStateTest: test_delete_chat
--------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:14:23 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/chats/8" for 127.0.0.1 at 2018-12-21 13:14:23 +0800
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:14:23 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.4ms)
  Rendered homes/home.html.erb within layouts/application (1.8ms)
  Rendered layouts/_login_panel.html.erb (1.2ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 6ms (Views: 5.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:14:23 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-21 13:14:23 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:14:23 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.6ms)
  Rendered homes/home.html.erb within layouts/application (3.2ms)
  Rendered layouts/_login_panel.html.erb (9.0ms)
  Rendered layouts/_header.html.erb (9.8ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 20ms (Views: 19.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 13:14:23 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:14:23 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.4ms)
  Rendered homes/home.html.erb within layouts/application (1.9ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.6ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 6ms (Views: 5.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------
FriendshipStateTest: test_test_show_information_of_friend
---------------------------------------------------------
Started GET "/users/9" for 127.0.0.1 at 2018-12-21 13:14:23 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 9]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 38ms (ActiveRecord: 0.6ms)
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 13:14:23 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 6ms (ActiveRecord: 0.2ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:14:23 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.0ms)
  Rendered homes/home.html.erb within layouts/application (2.5ms)
  Rendered layouts/_login_panel.html.erb (5.2ms)
  Rendered layouts/_header.html.erb (5.7ms)
  Rendered layouts/_content.html.erb (1.8ms)
Completed 200 OK in 14ms (Views: 12.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
FriendshipStateTest: test_delete_a_friend
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 13:14:23 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/3" for 127.0.0.1 at 2018-12-21 13:14:23 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"3"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 7ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:14:23 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.5ms)
  Rendered homes/home.html.erb within layouts/application (2.2ms)
  Rendered layouts/_login_panel.html.erb (1.3ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (2.3ms)
Completed 200 OK in 10ms (Views: 9.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 13:14:23 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-21 13:14:23 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.4ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:14:23 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.4ms)
  Rendered homes/home.html.erb within layouts/application (6.0ms)
  Rendered layouts/_login_panel.html.erb (6.7ms)
  Rendered layouts/_header.html.erb (9.4ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 24ms (Views: 23.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 13:14:23 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:14:23 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.4ms)
  Rendered homes/home.html.erb within layouts/application (1.8ms)
  Rendered layouts/_login_panel.html.erb (1.7ms)
  Rendered layouts/_header.html.erb (2.7ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 7ms (Views: 6.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------
MessagesControllerTest: test_should_show_message
------------------------------------------------
  [1m[35mMessage Load (0.9ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------
MessagesControllerTest: test_should_update_message
--------------------------------------------------
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
MessagesControllerTest: test_should_create_message
--------------------------------------------------
  [1m[35mMessage Load (0.7ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "messages"[0m
Processing by MessagesController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
MessagesControllerTest: test_should_destroy_message
---------------------------------------------------
  [1m[35mMessage Load (0.2ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "messages"[0m
Processing by MessagesController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35mChat Load (0.2ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "messages" WHERE "messages"."id" = ?  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 19384ms (ActiveRecord: 1.3ms)
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
--------------------------------------------
MessagesControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mMessage Load (0.3ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------
ChatsControllerTest: test_should_destroy_chat
---------------------------------------------
  [1m[36mChat Load (0.3ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "chats"
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 0ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsControllerTest: test_should_update_chat
--------------------------------------------
  [1m[35mChat Load (0.2ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by ChatsController#update as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}, "id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsControllerTest: test_should_create_chat
--------------------------------------------
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "chats"
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-21 13:14:44 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 1118ms (ActiveRecord: 0.4ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:14:45 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.7ms)
  Rendered layouts/_login_panel.html.erb (2.1ms)
  Rendered layouts/_header.html.erb (2.7ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 7ms (Views: 6.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-21 13:14:45 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 9ms (ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 13:14:45 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$nSdzL4bVVeZp/j9dfsRa7OIHyKyE8J6.P9WQgDaKKGPimQibhawMS"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-21 05:14:45.520771"], ["updated_at", "2018-12-21 05:14:45.520771"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 10ms (ActiveRecord: 0.8ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started GET "/" for 127.0.0.1 at 2018-12-21 13:14:45 +0800
Processing by HomesController#home as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  Rendered homes/home.html.erb within layouts/application (0.8ms)
  Rendered layouts/_login_panel.html.erb (1.2ms)
  Rendered layouts/_header.html.erb (2.5ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 0.1ms)
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.4ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "sex", "password_digest", "phonenumber", "role", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$NqLXCMq3vhvNreXUnp2HVOfgc1BIEZecLrQK42IqHPXe96tHexkpe"], ["phonenumber", ""], ["role", 1], ["status", "user"], ["created_at", "2018-12-21 05:14:45.555788"], ["updated_at", "2018-12-21 05:14:45.555788"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 8ms (ActiveRecord: 0.8ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "chats_users" WHERE "chats_users"."user_id" = ?  [["user_id", 980190962]]
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users?new=false
Completed 302 Found in 40ms (ActiveRecord: 1.6ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"980190962"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user1@test.com') AND "users"."id" != 980190962) LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  UPDATE "users" SET "name" = ?, "email" = ?, "sex" = ?, "password_digest" = ?, "phonenumber" = ?, "updated_at" = ? WHERE "users"."id" = ?  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$Kil9/5ocgjRXaKBpnuUAwug7CPAaOXoSr7bmA0ske6oSDNM5WeCh2"], ["phonenumber", "123456677777"], ["updated_at", "2018-12-21 05:14:45.628460"], ["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 21ms (ActiveRecord: 1.4ms)
  [1m[35m (1.5ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$CVt0nLNsdqQbFXIrbO46HOciP815F8ks.XpFC0kiDxg/jNwSuiIRO"], ["created_at", "2018-12-21 05:14:45.698676"], ["updated_at", "2018-12-21 05:14:45.698676"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$ZqHADpCIznnxu2B6eqtvneuwVlMwCfkHr7jkXah3CWz.1Vt5fxPzi"], ["created_at", "2018-12-21 05:14:45.772062"], ["updated_at", "2018-12-21 05:14:45.772062"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35m (0.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 13:14:45 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 2ms (ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (1.0ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (4.6ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:15:13', '2018-12-21 05:15:13', 980190962)
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:15:13', '2018-12-21 05:15:13', 298486374)[0m
  [1m[35mFixture Delete (2.3ms)[0m  DELETE FROM "messages"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:15:13', '2018-12-21 05:15:13', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:15:13', '2018-12-21 05:15:13', 298486374)
  [1m[36mFixture Delete (4.5ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:15:13', '2018-12-21 05:15:13', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:15:13', '2018-12-21 05:15:13', 298486374)[0m
  [1m[35m (2.1ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 13:15:13 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 52ms (ActiveRecord: 0.3ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-21 13:15:13 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:15:13 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (23.2ms)
  Rendered homes/home.html.erb within layouts/application (49.9ms)
  Rendered layouts/_login_panel.html.erb (13.0ms)
  Rendered layouts/_header.html.erb (23.3ms)
  Rendered layouts/_content.html.erb (3.4ms)
Completed 200 OK in 130ms (Views: 129.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 13:15:13 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 9ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:15:13 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.5ms)
  Rendered layouts/_login_panel.html.erb (4.7ms)
  Rendered layouts/_header.html.erb (5.3ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 19ms (Views: 18.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 13:15:13 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 13:15:13 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:15:13 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.5ms)
  Rendered homes/home.html.erb within layouts/application (2.0ms)
  Rendered layouts/_login_panel.html.erb (1.2ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 9ms (Views: 7.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 13:15:13 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 2ms (ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "sex", "password_digest", "phonenumber", "role", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$Nm.5GBJSuqy7N059kjjcTOMNvmdFVKvv/Yjso.Aw2aLhM/7EPoymG"], ["phonenumber", ""], ["role", 1], ["status", "user"], ["created_at", "2018-12-21 05:15:13.881109"], ["updated_at", "2018-12-21 05:15:13.881109"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 55ms (ActiveRecord: 1.6ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "chats_users" WHERE "chats_users"."user_id" = ?  [["user_id", 980190962]]
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users?new=false
Completed 302 Found in 45ms (ActiveRecord: 1.5ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"980190962"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user1@test.com') AND "users"."id" != 980190962) LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  UPDATE "users" SET "name" = ?, "email" = ?, "sex" = ?, "password_digest" = ?, "phonenumber" = ?, "updated_at" = ? WHERE "users"."id" = ?  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$J27rLwamR0m7M8eXOIz7y.x1jkzxul5RfvcDaCEa3J0D1Zy.5b3MK"], ["phonenumber", "123456677777"], ["updated_at", "2018-12-21 05:15:13.962968"], ["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 12ms (ActiveRecord: 1.0ms)
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------
FriendshipStateTest: test_delete_a_friend
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 13:15:13 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/3" for 127.0.0.1 at 2018-12-21 13:15:13 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"3"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:15:13 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.7ms)
  Rendered homes/home.html.erb within layouts/application (2.6ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 7ms (Views: 6.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------
FriendshipStateTest: test_test_show_information_of_friend
---------------------------------------------------------
Started GET "/users/9" for 127.0.0.1 at 2018-12-21 13:15:14 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 9]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 13:15:14 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:15:14 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.2ms)
  Rendered homes/home.html.erb within layouts/application (2.7ms)
  Rendered layouts/_login_panel.html.erb (1.4ms)
  Rendered layouts/_header.html.erb (2.0ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 8ms (Views: 7.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------
MessagesControllerTest: test_should_show_message
------------------------------------------------
  [1m[35mMessage Load (0.2ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
MessagesControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
MessagesControllerTest: test_should_create_message
--------------------------------------------------
  [1m[35mMessage Load (0.3ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "messages"[0m
Processing by MessagesController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
MessagesControllerTest: test_should_destroy_message
---------------------------------------------------
  [1m[35mMessage Load (0.2ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "messages"[0m
Processing by MessagesController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35mChat Load (0.3ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "messages" WHERE "messages"."id" = ?  [["id", 980190962]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 35101ms (ActiveRecord: 0.9ms)
  [1m[35m (2.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
MessagesControllerTest: test_should_update_message
--------------------------------------------------
  [1m[35mMessage Load (0.2ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.4ms)[0m  begin transaction
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 13:15:49 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:15:49 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.5ms)
  Rendered homes/home.html.erb within layouts/application (2.0ms)
  Rendered layouts/_login_panel.html.erb (1.3ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 19ms (Views: 18.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 13:15:49 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:15:49 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.0ms)
  Rendered homes/home.html.erb within layouts/application (1.5ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (3.2ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 15ms (Views: 14.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
ChatsControllerTest: test_should_destroy_chat
---------------------------------------------
  [1m[36mChat Load (0.3ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "chats"
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsControllerTest: test_should_create_chat
--------------------------------------------
  [1m[35mChat Load (0.6ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "chats"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsControllerTest: test_should_update_chat
--------------------------------------------
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
Processing by ChatsController#update as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}, "id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$Z2ll8nHB1enQN1OqnDt4fuBSGxow90tmPAKzYeQYybN.zlxyKVzZa"], ["created_at", "2018-12-21 05:15:51.054315"], ["updated_at", "2018-12-21 05:15:51.054315"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$CDVhIO6LDB4fiwsslliFn.Wy2wDO5Aty9nuPiSCcoRCpRA0eSVS16"], ["created_at", "2018-12-21 05:15:51.151036"], ["updated_at", "2018-12-21 05:15:51.151036"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------
ChatsStateTest: test_delete_chat
--------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:15:51 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/chats/8" for 127.0.0.1 at 2018-12-21 13:15:51 +0800
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:15:51 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.0ms)
  Rendered homes/home.html.erb within layouts/application (1.5ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.4ms)
Completed 200 OK in 6ms (Views: 5.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:15:51 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-21 13:15:51 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:15:51 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.3ms)
  Rendered homes/home.html.erb within layouts/application (1.8ms)
  Rendered layouts/_login_panel.html.erb (1.2ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:15:51 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-21 13:15:51 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:15:51 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.3ms)
  Rendered homes/home.html.erb within layouts/application (1.7ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.6ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:15:51 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-21 13:15:51 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:15:51 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.5ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 4.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 13:15:51 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$SbshQ.2LJvi/jAbUOCQJ/.m.W8OTv41AcQUop8id.AUJG4I.InpHS"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-21 05:15:51.309489"], ["updated_at", "2018-12-21 05:15:51.309489"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 12ms (ActiveRecord: 0.9ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started GET "/" for 127.0.0.1 at 2018-12-21 13:15:51 +0800
Processing by HomesController#home as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  Rendered homes/home.html.erb within layouts/application (0.7ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.0ms | ActiveRecord: 0.1ms)
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-21 13:15:51 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 8ms (ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-21 13:15:51 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 10ms (ActiveRecord: 0.5ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:15:51 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.8ms)
  Rendered homes/home.html.erb within layouts/application (2.2ms)
  Rendered layouts/_login_panel.html.erb (1.7ms)
  Rendered layouts/_header.html.erb (2.5ms)
  Rendered layouts/_content.html.erb (0.9ms)
Completed 200 OK in 9ms (Views: 8.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  begin transaction
  [1m[36mFixture Delete (26.0ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:57', '2018-12-21 05:17:57', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:57', '2018-12-21 05:17:57', 298486374)[0m
  [1m[35mFixture Delete (1.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:57', '2018-12-21 05:17:57', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:57', '2018-12-21 05:17:57', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36m (3.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (1.5ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:57', '2018-12-21 05:17:57', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:57', '2018-12-21 05:17:57', 298486374)[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.4ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:57', '2018-12-21 05:17:57', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:57', '2018-12-21 05:17:57', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (4.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:57', '2018-12-21 05:17:57', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:57', '2018-12-21 05:17:57', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:57', '2018-12-21 05:17:57', 980190962)
  [1m[36mFixture Insert (2.5ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:57', '2018-12-21 05:17:57', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:57', '2018-12-21 05:17:57', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:57', '2018-12-21 05:17:57', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (2.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:57', '2018-12-21 05:17:57', 980190962)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:57', '2018-12-21 05:17:57', 298486374)[0m
  [1m[35mFixture Delete (0.8ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:57', '2018-12-21 05:17:57', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:57', '2018-12-21 05:17:57', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (15.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:57', '2018-12-21 05:17:57', 980190962)
  [1m[36mFixture Insert (7.4ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:57', '2018-12-21 05:17:57', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (6.9ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:58', '2018-12-21 05:17:58', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:58', '2018-12-21 05:17:58', 298486374)[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "friendships"
  [1m[36m (1.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (1.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:58', '2018-12-21 05:17:58', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:58', '2018-12-21 05:17:58', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:58', '2018-12-21 05:17:58', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:58', '2018-12-21 05:17:58', 298486374)[0m
  [1m[35mFixture Delete (1.7ms)[0m  DELETE FROM "friendships"
  [1m[36m (1.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:58', '2018-12-21 05:17:58', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:58', '2018-12-21 05:17:58', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (1.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:58', '2018-12-21 05:17:58', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:58', '2018-12-21 05:17:58', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:58', '2018-12-21 05:17:58', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:58', '2018-12-21 05:17:58', 298486374)[0m
  [1m[35mFixture Delete (1.4ms)[0m  DELETE FROM "friendships"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (1.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:58', '2018-12-21 05:17:58', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:58', '2018-12-21 05:17:58', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36m (4.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:58', '2018-12-21 05:17:58', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:58', '2018-12-21 05:17:58', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36m (4.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:58', '2018-12-21 05:17:58', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:58', '2018-12-21 05:17:58', 298486374)[0m
  [1m[35mFixture Delete (2.4ms)[0m  DELETE FROM "friendships"
  [1m[36m (6.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:58', '2018-12-21 05:17:58', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:58', '2018-12-21 05:17:58', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (1.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:58', '2018-12-21 05:17:58', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:58', '2018-12-21 05:17:58', 298486374)[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "friendships"
  [1m[36m (7.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (2.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:58', '2018-12-21 05:17:58', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:58', '2018-12-21 05:17:58', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36m (6.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:58', '2018-12-21 05:17:58', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:58', '2018-12-21 05:17:58', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.4ms)[0m  begin transaction
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:58', '2018-12-21 05:17:58', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:58', '2018-12-21 05:17:58', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (2.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:58', '2018-12-21 05:17:58', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:58', '2018-12-21 05:17:58', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (4.0ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:58', '2018-12-21 05:17:58', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:58', '2018-12-21 05:17:58', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36m (3.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:58', '2018-12-21 05:17:58', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:58', '2018-12-21 05:17:58', 298486374)[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:58', '2018-12-21 05:17:58', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:58', '2018-12-21 05:17:58', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.7ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:58', '2018-12-21 05:17:58', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:58', '2018-12-21 05:17:58', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (7.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:58', '2018-12-21 05:17:58', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:58', '2018-12-21 05:17:58', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:58', '2018-12-21 05:17:58', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:58', '2018-12-21 05:17:58', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:58', '2018-12-21 05:17:58', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:58', '2018-12-21 05:17:58', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:58', '2018-12-21 05:17:58', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:58', '2018-12-21 05:17:58', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36m (1.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (9.4ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:59', '2018-12-21 05:17:59', 980190962)
  [1m[36mFixture Insert (6.0ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:59', '2018-12-21 05:17:59', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36m (11.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.9ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:59', '2018-12-21 05:17:59', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:59', '2018-12-21 05:17:59', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36m (8.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:59', '2018-12-21 05:17:59', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:59', '2018-12-21 05:17:59', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36m (1.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:59', '2018-12-21 05:17:59', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:59', '2018-12-21 05:17:59', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:59', '2018-12-21 05:17:59', 980190962)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:17:59', '2018-12-21 05:17:59', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36m (1.6ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (1.7ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:20', '2018-12-21 05:18:20', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:20', '2018-12-21 05:18:20', 298486374)[0m
  [1m[35mFixture Delete (1.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:20', '2018-12-21 05:18:20', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:20', '2018-12-21 05:18:20', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:20', '2018-12-21 05:18:20', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:20', '2018-12-21 05:18:20', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:20', '2018-12-21 05:18:20', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:20', '2018-12-21 05:18:20', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:20', '2018-12-21 05:18:20', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:20', '2018-12-21 05:18:20', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 980190962)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "friendships"
  [1m[36m (2.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 298486374)[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36m (1.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 298486374)[0m
  [1m[35mFixture Delete (0.7ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.9ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36m (1.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 298486374)[0m
  [1m[35mFixture Delete (1.0ms)[0m  DELETE FROM "friendships"
  [1m[36m (1.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.8ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 298486374)[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "friendships"
  [1m[36m (1.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "friendships"
  [1m[36m (1.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.8ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.8ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 298486374)[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "friendships"
  [1m[36m (1.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36m (1.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (1.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  begin transaction
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "friendships"
  [1m[36m (1.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (2.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 298486374)[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "friendships"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 980190962)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 298486374)[0m
  [1m[35mFixture Delete (1.0ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (1.9ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 298486374)[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (1.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 980190962)
  [1m[36mFixture Insert (4.8ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:18:21', '2018-12-21 05:18:21', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.8ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (1.0ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:45', '2018-12-21 05:24:45', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:45', '2018-12-21 05:24:45', 298486374)[0m
  [1m[35mFixture Delete (1.4ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:45', '2018-12-21 05:24:45', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:45', '2018-12-21 05:24:45', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:45', '2018-12-21 05:24:45', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:45', '2018-12-21 05:24:45', 298486374)[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "friendships"
  [1m[36m (1.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:45', '2018-12-21 05:24:45', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:45', '2018-12-21 05:24:45', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.4ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:45', '2018-12-21 05:24:45', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:45', '2018-12-21 05:24:45', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:45', '2018-12-21 05:24:45', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:45', '2018-12-21 05:24:45', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:45', '2018-12-21 05:24:45', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:45', '2018-12-21 05:24:45', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:45', '2018-12-21 05:24:45', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:45', '2018-12-21 05:24:45', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:45', '2018-12-21 05:24:45', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:45', '2018-12-21 05:24:45', 298486374)[0m
  [1m[35mFixture Delete (1.0ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.9ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:45', '2018-12-21 05:24:45', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:45', '2018-12-21 05:24:45', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:45', '2018-12-21 05:24:45', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:45', '2018-12-21 05:24:45', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:45', '2018-12-21 05:24:45', 980190962)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:45', '2018-12-21 05:24:45', 298486374)[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:45', '2018-12-21 05:24:45', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:45', '2018-12-21 05:24:45', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:45', '2018-12-21 05:24:45', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:45', '2018-12-21 05:24:45', 298486374)[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.8ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:45', '2018-12-21 05:24:45', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:45', '2018-12-21 05:24:45', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:45', '2018-12-21 05:24:45', 980190962)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:45', '2018-12-21 05:24:45', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:45', '2018-12-21 05:24:45', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:45', '2018-12-21 05:24:45', 298486374)[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "friendships"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:45', '2018-12-21 05:24:45', 980190962)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:45', '2018-12-21 05:24:45', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:45', '2018-12-21 05:24:45', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:45', '2018-12-21 05:24:45', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:45', '2018-12-21 05:24:45', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:45', '2018-12-21 05:24:45', 298486374)[0m
  [1m[35mFixture Delete (0.7ms)[0m  DELETE FROM "friendships"
  [1m[36m (1.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:45', '2018-12-21 05:24:45', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:45', '2018-12-21 05:24:45', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:45', '2018-12-21 05:24:45', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:45', '2018-12-21 05:24:45', 298486374)[0m
  [1m[35mFixture Delete (1.0ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.4ms)[0m  begin transaction
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:45', '2018-12-21 05:24:45', 980190962)
  [1m[36mFixture Insert (0.8ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:45', '2018-12-21 05:24:45', 298486374)[0m
  [1m[35mFixture Delete (6.8ms)[0m  DELETE FROM "friendships"
  [1m[36m (5.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:46', '2018-12-21 05:24:46', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:46', '2018-12-21 05:24:46', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:46', '2018-12-21 05:24:46', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:46', '2018-12-21 05:24:46', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (1.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:46', '2018-12-21 05:24:46', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:46', '2018-12-21 05:24:46', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36m (1.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:46', '2018-12-21 05:24:46', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:46', '2018-12-21 05:24:46', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:46', '2018-12-21 05:24:46', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:46', '2018-12-21 05:24:46', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:46', '2018-12-21 05:24:46', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:46', '2018-12-21 05:24:46', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:46', '2018-12-21 05:24:46', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:46', '2018-12-21 05:24:46', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:46', '2018-12-21 05:24:46', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:46', '2018-12-21 05:24:46', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:46', '2018-12-21 05:24:46', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:46', '2018-12-21 05:24:46', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:46', '2018-12-21 05:24:46', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:46', '2018-12-21 05:24:46', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:46', '2018-12-21 05:24:46', 980190962)
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:46', '2018-12-21 05:24:46', 298486374)[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "friendships"
  [1m[36m (1.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:46', '2018-12-21 05:24:46', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:46', '2018-12-21 05:24:46', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:46', '2018-12-21 05:24:46', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:46', '2018-12-21 05:24:46', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:46', '2018-12-21 05:24:46', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:46', '2018-12-21 05:24:46', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:46', '2018-12-21 05:24:46', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:24:46', '2018-12-21 05:24:46', 298486374)[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (1.6ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:36', '2018-12-21 05:25:36', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:36', '2018-12-21 05:25:36', 298486374)[0m
  [1m[35mFixture Delete (1.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:36', '2018-12-21 05:25:36', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:36', '2018-12-21 05:25:36', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:36', '2018-12-21 05:25:36', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:36', '2018-12-21 05:25:36', 298486374)[0m
  [1m[35mFixture Delete (2.1ms)[0m  DELETE FROM "friendships"
  [1m[36m (23.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.8ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:36', '2018-12-21 05:25:36', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:36', '2018-12-21 05:25:36', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36m (1.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:36', '2018-12-21 05:25:36', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:36', '2018-12-21 05:25:36', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36m (1.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:36', '2018-12-21 05:25:36', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:36', '2018-12-21 05:25:36', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36m (1.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:36', '2018-12-21 05:25:36', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:36', '2018-12-21 05:25:36', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (2.6ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:36', '2018-12-21 05:25:36', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:36', '2018-12-21 05:25:36', 298486374)[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "friendships"
  [1m[36m (1.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:36', '2018-12-21 05:25:36', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:36', '2018-12-21 05:25:36', 298486374)[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "friendships"
  [1m[36m (1.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:36', '2018-12-21 05:25:36', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:36', '2018-12-21 05:25:36', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (1.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:36', '2018-12-21 05:25:36', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:36', '2018-12-21 05:25:36', 298486374)[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:36', '2018-12-21 05:25:36', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:36', '2018-12-21 05:25:36', 298486374)[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "friendships"
  [1m[36m (1.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:36', '2018-12-21 05:25:36', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:36', '2018-12-21 05:25:36', 298486374)[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:36', '2018-12-21 05:25:36', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:36', '2018-12-21 05:25:36', 298486374)[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:37', '2018-12-21 05:25:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:37', '2018-12-21 05:25:37', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:37', '2018-12-21 05:25:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:37', '2018-12-21 05:25:37', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:37', '2018-12-21 05:25:37', 980190962)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:37', '2018-12-21 05:25:37', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:37', '2018-12-21 05:25:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:37', '2018-12-21 05:25:37', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:37', '2018-12-21 05:25:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:37', '2018-12-21 05:25:37', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  begin transaction
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:37', '2018-12-21 05:25:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:37', '2018-12-21 05:25:37', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:37', '2018-12-21 05:25:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:37', '2018-12-21 05:25:37', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (4.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:37', '2018-12-21 05:25:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:37', '2018-12-21 05:25:37', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:37', '2018-12-21 05:25:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:37', '2018-12-21 05:25:37', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36m (1.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:37', '2018-12-21 05:25:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:37', '2018-12-21 05:25:37', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36m (2.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:37', '2018-12-21 05:25:37', 980190962)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:37', '2018-12-21 05:25:37', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:37', '2018-12-21 05:25:37', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:37', '2018-12-21 05:25:37', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (1.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:37', '2018-12-21 05:25:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:37', '2018-12-21 05:25:37', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "friendships"
  [1m[36m (1.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:37', '2018-12-21 05:25:37', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:37', '2018-12-21 05:25:37', 298486374)[0m
  [1m[35mFixture Delete (3.3ms)[0m  DELETE FROM "friendships"
  [1m[36m (4.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:37', '2018-12-21 05:25:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:37', '2018-12-21 05:25:37', 298486374)[0m
  [1m[35mFixture Delete (1.3ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:37', '2018-12-21 05:25:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:37', '2018-12-21 05:25:37', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:37', '2018-12-21 05:25:37', 980190962)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:37', '2018-12-21 05:25:37', 298486374)[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:37', '2018-12-21 05:25:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:37', '2018-12-21 05:25:37', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:37', '2018-12-21 05:25:37', 980190962)
  [1m[36mFixture Insert (1.6ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:37', '2018-12-21 05:25:37', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36m (12.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:37', '2018-12-21 05:25:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:37', '2018-12-21 05:25:37', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:37', '2018-12-21 05:25:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:37', '2018-12-21 05:25:37', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (1.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:37', '2018-12-21 05:25:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:37', '2018-12-21 05:25:37', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:37', '2018-12-21 05:25:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:37', '2018-12-21 05:25:37', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:37', '2018-12-21 05:25:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:25:37', '2018-12-21 05:25:37', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (1.8ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (1.4ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:49', '2018-12-21 05:32:49', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:49', '2018-12-21 05:32:49', 298486374)[0m
  [1m[35mFixture Delete (4.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (3.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (1.7ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:49', '2018-12-21 05:32:49', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:49', '2018-12-21 05:32:49', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (2.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (1.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (4.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (1.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (2.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.6ms)[0m  begin transaction
  [1m[36mFixture Delete (0.9ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36m (3.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "friendships"
  [1m[36m (3.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (3.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.9ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 980190962)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 298486374)[0m
  [1m[35mFixture Delete (1.0ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.8ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "friendships"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 298486374)[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "friendships"
  [1m[36m (1.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 298486374)[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 298486374)[0m
  [1m[35mFixture Delete (0.9ms)[0m  DELETE FROM "friendships"
  [1m[36m (1.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 980190962)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 298486374)[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "friendships"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36m (2.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36m (2.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.4ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 298486374)[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.4ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 298486374)[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "friendships"
  [1m[36m (1.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (1.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (2.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 298486374)[0m
  [1m[35mFixture Delete (1.8ms)[0m  DELETE FROM "friendships"
  [1m[36m (2.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 980190962)
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:50', '2018-12-21 05:32:50', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:51', '2018-12-21 05:32:51', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:51', '2018-12-21 05:32:51', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (2.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.8ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:51', '2018-12-21 05:32:51', 980190962)
  [1m[36mFixture Insert (1.3ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:51', '2018-12-21 05:32:51', 298486374)[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:51', '2018-12-21 05:32:51', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:51', '2018-12-21 05:32:51', 298486374)[0m
  [1m[35mFixture Delete (18.3ms)[0m  DELETE FROM "friendships"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:51', '2018-12-21 05:32:51', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:32:51', '2018-12-21 05:32:51', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36m (1.5ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (2.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.9ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.7ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:34:53', '2018-12-21 05:34:53', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:34:53', '2018-12-21 05:34:53', 298486374)[0m
  [1m[35mFixture Delete (1.4ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "friendships" ("user_id", "friend_id", "created_at", "updated_at", "id") VALUES (1, 1, '2018-12-21 05:34:53', '2018-12-21 05:34:53', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "friendships" ("user_id", "friend_id", "created_at", "updated_at", "id") VALUES (1, 1, '2018-12-21 05:34:53', '2018-12-21 05:34:53', 298486374)
  [1m[36mFixture Delete (1.0ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:34:53', '2018-12-21 05:34:53', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:34:53', '2018-12-21 05:34:53', 298486374)[0m
  [1m[35m (2.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-21 13:34:53 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (3.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 1063ms (ActiveRecord: 3.6ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:34:54 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (23.4ms)
  Rendered homes/home.html.erb within layouts/application (55.7ms)
  Rendered layouts/_login_panel.html.erb (7.6ms)
  Rendered layouts/_header.html.erb (13.5ms)
  Rendered layouts/_content.html.erb (5.2ms)
Completed 200 OK in 158ms (Views: 150.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-21 13:34:54 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 7ms (ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 13:34:54 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$xZ68dG94FnGyhz3jsB0RTuw5Lsisr2hqbIH1nMZNpazyprMzxbuO2"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-21 05:34:54.869608"], ["updated_at", "2018-12-21 05:34:54.869608"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 17ms (ActiveRecord: 0.9ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started GET "/" for 127.0.0.1 at 2018-12-21 13:34:54 +0800
Processing by HomesController#home as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  Rendered homes/home.html.erb within layouts/application (15.9ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (2.0ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 20ms (Views: 19.2ms | ActiveRecord: 0.6ms)
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.4ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 13:34:54 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 2ms (ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (1.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$qcnlqD2Pa4BOrh/1ysnk7.V60ai/dpFC82yyYNPFi5PJjul/1EUeC"], ["created_at", "2018-12-21 05:34:54.959759"], ["updated_at", "2018-12-21 05:34:54.959759"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$nvRvMeGSQQ6lLEVuvDAA8ePv7DyAxhwtFj8pzxYiX.ylaQp5Zngra"], ["created_at", "2018-12-21 05:34:55.022909"], ["updated_at", "2018-12-21 05:34:55.022909"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.5ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 13:34:55 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:34:55 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.0ms)
  Rendered homes/home.html.erb within layouts/application (1.3ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.3ms)
  Rendered layouts/_content.html.erb (7.8ms)
Completed 200 OK in 415ms (Views: 414.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 13:34:55 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 13:34:55 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:34:55 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.0ms)
  Rendered homes/home.html.erb within layouts/application (1.4ms)
  Rendered layouts/_login_panel.html.erb (2.4ms)
  Rendered layouts/_header.html.erb (2.9ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 7ms (Views: 6.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 13:34:55 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:34:55 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.8ms)
  Rendered layouts/_login_panel.html.erb (1.7ms)
  Rendered layouts/_header.html.erb (2.6ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 7ms (Views: 6.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------
ChatsStateTest: test_delete_chat
--------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:34:55 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/chats/8" for 127.0.0.1 at 2018-12-21 13:34:55 +0800
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:34:55 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.5ms)
  Rendered homes/home.html.erb within layouts/application (2.0ms)
  Rendered layouts/_login_panel.html.erb (1.5ms)
  Rendered layouts/_header.html.erb (2.0ms)
  Rendered layouts/_content.html.erb (0.4ms)
Completed 200 OK in 7ms (Views: 6.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:34:55 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-21 13:34:55 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:34:55 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.8ms)
  Rendered homes/home.html.erb within layouts/application (2.7ms)
  Rendered layouts/_login_panel.html.erb (1.4ms)
  Rendered layouts/_header.html.erb (2.1ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 9ms (Views: 8.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:34:55 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-21 13:34:55 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:34:55 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.6ms)
  Rendered homes/home.html.erb within layouts/application (2.1ms)
  Rendered layouts/_login_panel.html.erb (3.4ms)
  Rendered layouts/_header.html.erb (5.6ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 13ms (Views: 12.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:34:55 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-21 13:34:55 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:34:55 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.9ms)
  Rendered homes/home.html.erb within layouts/application (2.5ms)
  Rendered layouts/_login_panel.html.erb (1.7ms)
  Rendered layouts/_header.html.erb (2.6ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 14ms (Views: 11.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
FriendshipStateTest: test_delete_a_friend
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 13:34:55 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/3" for 127.0.0.1 at 2018-12-21 13:34:55 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"3"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:34:55 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.3ms)
  Rendered homes/home.html.erb within layouts/application (2.0ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (1.6ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 5.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------
FriendshipStateTest: test_test_show_information_of_friend
---------------------------------------------------------
Started GET "/users/9" for 127.0.0.1 at 2018-12-21 13:34:55 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 9]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 4ms (ActiveRecord: 0.5ms)
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 13:34:55 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:34:55 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.4ms)
  Rendered homes/home.html.erb within layouts/application (5.6ms)
  Rendered layouts/_login_panel.html.erb (1.4ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 10ms (Views: 9.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 13:34:55 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-21 13:34:55 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 4ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:34:55 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.3ms)
  Rendered homes/home.html.erb within layouts/application (1.7ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------
FriendshipsControllerTest: test_should_update_friendship
--------------------------------------------------------
  [1m[35mFriendship Load (0.3ms)[0m  SELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------
FriendshipsControllerTest: test_should_show_friendship
------------------------------------------------------
  [1m[36mFriendship Load (0.2ms)[0m  [1mSELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------
FriendshipsControllerTest: test_should_create_friendship
--------------------------------------------------------
  [1m[35mFriendship Load (0.2ms)[0m  SELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "friendships"[0m
Processing by FriendshipsController#create as HTML
  Parameters: {"friendship"=>{}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "friendships"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
FriendshipsControllerTest: test_should_get_new
----------------------------------------------
  [1m[36mFriendship Load (0.2ms)[0m  [1mSELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------
FriendshipsControllerTest: test_should_destroy_friendship
---------------------------------------------------------
  [1m[35mFriendship Load (0.1ms)[0m  SELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "friendships"[0m
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "friendships"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  begin transaction
-----------------------------------------------
FriendshipsControllerTest: test_should_get_edit
-----------------------------------------------
  [1m[36mFriendship Load (0.1ms)[0m  [1mSELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------
FriendshipsControllerTest: test_should_get_index
------------------------------------------------
  [1m[35mFriendship Load (0.1ms)[0m  SELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsControllerTest: test_should_create_chat
--------------------------------------------
  [1m[36mChat Load (0.3ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "chats"
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsControllerTest: test_should_update_chat
--------------------------------------------
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by ChatsController#update as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}, "id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
ChatsControllerTest: test_should_destroy_chat
---------------------------------------------
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "chats"
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 13:34:57 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:34:57 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.4ms)
  Rendered homes/home.html.erb within layouts/application (2.0ms)
  Rendered layouts/_login_panel.html.erb (1.9ms)
  Rendered layouts/_header.html.erb (2.6ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 22ms (Views: 7.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("name", "email", "sex", "password_digest", "phonenumber", "role", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$X3Zkn24.q9q3q03TEHwY1u/EDSBVzrhsFp3t5kfxpWrxragNJc6Q6"], ["phonenumber", ""], ["role", 1], ["status", "user"], ["created_at", "2018-12-21 05:34:57.334676"], ["updated_at", "2018-12-21 05:34:57.334676"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 18ms (ActiveRecord: 1.6ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.4ms)[0m  [1mDELETE FROM "chats_users" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 980190962]]
  [1m[35mSQL (1.7ms)[0m  DELETE FROM "users" WHERE "users"."id" = ?  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users?new=false
Completed 302 Found in 85ms (ActiveRecord: 3.7ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"980190962"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user1@test.com') AND "users"."id" != 980190962) LIMIT 1
  [1m[36mSQL (1.3ms)[0m  [1mUPDATE "users" SET "name" = ?, "email" = ?, "sex" = ?, "password_digest" = ?, "phonenumber" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$7kxplpXKTRQQVHdMfg9UY.JpQesPhJTu2OrS648eZTCSFGFF5v8AG"], ["phonenumber", "123456677777"], ["updated_at", "2018-12-21 05:34:57.463504"], ["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 13ms (ActiveRecord: 1.7ms)
  [1m[36m (1.2ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (4.2ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (1.5ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:37:44', '2018-12-21 05:37:44', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:37:44', '2018-12-21 05:37:44', 298486374)[0m
  [1m[35mFixture Delete (3.7ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "friendships" ("user_id", "friend_id", "created_at", "updated_at", "id") VALUES (1, 1, '2018-12-21 05:37:44', '2018-12-21 05:37:44', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "friendships" ("user_id", "friend_id", "created_at", "updated_at", "id") VALUES (1, 1, '2018-12-21 05:37:44', '2018-12-21 05:37:44', 298486374)
  [1m[36mFixture Delete (3.2ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "messages" ("body", "user_id", "created_at", "updated_at", "id") VALUES ('MyText', NULL, '2018-12-21 05:37:44', '2018-12-21 05:37:44', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "created_at", "updated_at", "id") VALUES ('MyText', NULL, '2018-12-21 05:37:44', '2018-12-21 05:37:44', 298486374)[0m
  [1m[35mFixture Delete (2.3ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:37:44', '2018-12-21 05:37:44', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:37:44', '2018-12-21 05:37:44', 298486374)
  [1m[36m (9.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 13:37:44 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 42ms (ActiveRecord: 0.3ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-21 13:37:44 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:37:44 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (30.7ms)
  Rendered homes/home.html.erb within layouts/application (64.7ms)
  Rendered layouts/_login_panel.html.erb (12.2ms)
  Rendered layouts/_header.html.erb (21.5ms)
  Rendered layouts/_content.html.erb (1.2ms)
Completed 200 OK in 148ms (Views: 147.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
MessagesControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mMessage Load (0.4ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
MessagesControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mMessage Load (0.2ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
MessagesControllerTest: test_should_destroy_message
---------------------------------------------------
  [1m[36mMessage Load (0.3ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "messages"
Processing by MessagesController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36mChat Load (0.2ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "messages" WHERE "messages"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 500 Internal Server Error in 61185ms (ActiveRecord: 1.0ms)
  [1m[36m (22.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (6.1ms)[0m  begin transaction
--------------------------------------------------
MessagesControllerTest: test_should_create_message
--------------------------------------------------
  [1m[36mMessage Load (10.2ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (4.9ms)[0m  SELECT COUNT(*) FROM "messages"
Processing by MessagesController#create as HTML
  Parameters: {"message"=>{}}
Completed 500 Internal Server Error in 47ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------------
MessagesControllerTest: test_should_show_message
------------------------------------------------
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
MessagesControllerTest: test_should_update_message
--------------------------------------------------
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
MessagesControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 13:38:48 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (18.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 40ms (ActiveRecord: 18.4ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 13:38:48 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:38:49 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (15.3ms)
  Rendered homes/home.html.erb within layouts/application (16.6ms)
  Rendered layouts/_login_panel.html.erb (10.9ms)
  Rendered layouts/_header.html.erb (11.9ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 59ms (Views: 55.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 13:38:49 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 11ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 13:38:49 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 14ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:38:49 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (12.9ms)
  Rendered homes/home.html.erb within layouts/application (22.9ms)
  Rendered layouts/_login_panel.html.erb (43.6ms)
  Rendered layouts/_header.html.erb (44.1ms)
  Rendered layouts/_content.html.erb (4.0ms)
Completed 200 OK in 88ms (Views: 87.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (2.9ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.5ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (3.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$M6uZtoa/B6vGWB.TBi/Om.FwhXjzjPJDjzjMBwgse4HrMctjKaOY2"], ["created_at", "2018-12-21 05:38:54.107101"], ["updated_at", "2018-12-21 05:38:54.107101"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$lcsgjq6SSkEoOpa0vfssKOLY7iLmzA3JVdvrWFuYstaYQxL6cSqci"], ["created_at", "2018-12-21 05:38:54.130345"], ["updated_at", "2018-12-21 05:38:54.130345"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.9ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------
FriendshipsControllerTest: test_should_show_friendship
------------------------------------------------------
  [1m[36mFriendship Load (0.3ms)[0m  [1mSELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------
FriendshipsControllerTest: test_should_create_friendship
--------------------------------------------------------
  [1m[35mFriendship Load (0.2ms)[0m  SELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "friendships"[0m
Processing by FriendshipsController#create as HTML
  Parameters: {"friendship"=>{}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "friendships"
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
FriendshipsControllerTest: test_should_get_index
------------------------------------------------
  [1m[36mFriendship Load (0.2ms)[0m  [1mSELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
FriendshipsControllerTest: test_should_get_edit
-----------------------------------------------
  [1m[35mFriendship Load (0.2ms)[0m  SELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
FriendshipsControllerTest: test_should_get_new
----------------------------------------------
  [1m[36mFriendship Load (4.2ms)[0m  [1mSELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------
FriendshipsControllerTest: test_should_update_friendship
--------------------------------------------------------
  [1m[35mFriendship Load (0.3ms)[0m  SELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (2.0ms)[0m  begin transaction
---------------------------------------------------------
FriendshipsControllerTest: test_should_destroy_friendship
---------------------------------------------------------
  [1m[36mFriendship Load (0.3ms)[0m  [1mSELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "friendships"
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "friendships"[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (150.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------
FriendshipStateTest: test_delete_a_friend
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 13:38:55 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/3" for 127.0.0.1 at 2018-12-21 13:38:55 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"3"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:38:55 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.1ms)
  Rendered homes/home.html.erb within layouts/application (3.2ms)
  Rendered layouts/_login_panel.html.erb (1.3ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 8ms (Views: 7.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------
FriendshipStateTest: test_test_show_information_of_friend
---------------------------------------------------------
Started GET "/users/9" for 127.0.0.1 at 2018-12-21 13:38:55 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 9]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 13:38:55 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:38:55 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.5ms)
  Rendered homes/home.html.erb within layouts/application (1.9ms)
  Rendered layouts/_login_panel.html.erb (1.6ms)
  Rendered layouts/_header.html.erb (2.6ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 12ms (Views: 11.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 13:38:55 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:38:55 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (3.4ms)
  Rendered homes/home.html.erb within layouts/application (3.9ms)
  Rendered layouts/_login_panel.html.erb (3.6ms)
  Rendered layouts/_header.html.erb (5.4ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 13ms (Views: 12.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 13:38:55 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:38:55 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.6ms)
  Rendered homes/home.html.erb within layouts/application (2.2ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.4ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 5.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.8ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  DELETE FROM "chats_users" WHERE "chats_users"."user_id" = ?  [["user_id", 980190962]]
  [1m[36mSQL (7.5ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users?new=false
Completed 302 Found in 1354ms (ActiveRecord: 37.5ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (7.4ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"980190962"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user1@test.com') AND "users"."id" != 980190962) LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  UPDATE "users" SET "name" = ?, "email" = ?, "sex" = ?, "password_digest" = ?, "phonenumber" = ?, "updated_at" = ? WHERE "users"."id" = ?  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$WF8bcSw9MqhvKddbPEGyyO/hryh8kYlW0/wXVMlAZMnKHd6vHFt26"], ["phonenumber", "123456677777"], ["updated_at", "2018-12-21 05:38:57.877852"], ["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 87ms (ActiveRecord: 2.1ms)
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("name", "email", "sex", "password_digest", "phonenumber", "role", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$1/iZOkanr0f97vglXpaLP.5L3z1oARBIGYI2OKUrnxOIgDAFPtmvm"], ["phonenumber", ""], ["role", 1], ["status", "user"], ["created_at", "2018-12-21 05:38:58.096625"], ["updated_at", "2018-12-21 05:38:58.096625"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 105ms (ActiveRecord: 1.6ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-21 13:38:58 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$CR1kOvqUOg3X5CmGLzQfn.QnPvxSBgIybo7LaAtpPxq5piTnR/q9O"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-21 05:38:58.353936"], ["updated_at", "2018-12-21 05:38:58.353936"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 27ms (ActiveRecord: 1.2ms)
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "users"
Started GET "/" for 127.0.0.1 at 2018-12-21 13:38:58 +0800
Processing by HomesController#home as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  Rendered homes/home.html.erb within layouts/application (1.6ms)
  Rendered layouts/_login_panel.html.erb (4.1ms)
  Rendered layouts/_header.html.erb (7.0ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 16ms (Views: 14.5ms | ActiveRecord: 0.1ms)
  [1m[35m (1.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-21 13:38:58 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 33ms (ActiveRecord: 1.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:38:58 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.9ms)
  Rendered homes/home.html.erb within layouts/application (3.7ms)
  Rendered layouts/_login_panel.html.erb (7.2ms)
  Rendered layouts/_header.html.erb (8.3ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 17ms (Views: 15.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-21 13:38:58 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 38ms (ActiveRecord: 0.7ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:38:58 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-21 13:38:58 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:38:58 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (4.4ms)
  Rendered homes/home.html.erb within layouts/application (4.9ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 380ms (Views: 379.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------
ChatsStateTest: test_delete_chat
--------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:38:59 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started DELETE "/chats/8" for 127.0.0.1 at 2018-12-21 13:38:59 +0800
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:38:59 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.8ms)
  Rendered homes/home.html.erb within layouts/application (2.9ms)
  Rendered layouts/_login_panel.html.erb (1.3ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 8ms (Views: 7.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:38:59 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-21 13:38:59 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:38:59 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.9ms)
  Rendered homes/home.html.erb within layouts/application (3.6ms)
  Rendered layouts/_login_panel.html.erb (1.3ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.4ms)
Completed 200 OK in 8ms (Views: 7.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:38:59 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-21 13:38:59 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:38:59 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (10.2ms)
  Rendered homes/home.html.erb within layouts/application (11.0ms)
  Rendered layouts/_login_panel.html.erb (5.3ms)
  Rendered layouts/_header.html.erb (6.1ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 25ms (Views: 24.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsControllerTest: test_should_update_chat
--------------------------------------------
  [1m[35mChat Load (0.5ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by ChatsController#update as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}, "id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsControllerTest: test_should_create_chat
--------------------------------------------
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "chats"
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
ChatsControllerTest: test_should_destroy_chat
---------------------------------------------
  [1m[35mChat Load (0.4ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (5.1ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "chats"
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  begin transaction
  [1m[36mFixture Delete (19.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (16.7ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:45:04', '2018-12-21 05:45:04', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:45:04', '2018-12-21 05:45:04', 298486374)[0m
  [1m[35mFixture Delete (14.0ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (15.5ms)[0m  [1mINSERT INTO "friendships" ("user_id", "friend_id", "created_at", "updated_at", "id") VALUES (1, 1, '2018-12-21 05:45:04', '2018-12-21 05:45:04', 980190962)[0m
  [1m[35mFixture Insert (3.6ms)[0m  INSERT INTO "friendships" ("user_id", "friend_id", "created_at", "updated_at", "id") VALUES (1, 1, '2018-12-21 05:45:04', '2018-12-21 05:45:04', 298486374)
  [1m[36mFixture Delete (18.3ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "messages" ("body", "user_id", "created_at", "updated_at", "id") VALUES ('MyText', NULL, '2018-12-21 05:45:05', '2018-12-21 05:45:05', 980190962)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "created_at", "updated_at", "id") VALUES ('MyText', NULL, '2018-12-21 05:45:05', '2018-12-21 05:45:05', 298486374)[0m
  [1m[35mFixture Delete (3.4ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:45:05', '2018-12-21 05:45:05', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:45:05', '2018-12-21 05:45:05', 298486374)
  [1m[36m (5.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------------
MessagesControllerTest: test_should_create_message
--------------------------------------------------
  [1m[36mMessage Load (0.4ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "messages"
Processing by MessagesController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Completed 500 Internal Server Error in 66ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
MessagesControllerTest: test_should_destroy_message
---------------------------------------------------
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "messages"
Processing by MessagesController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35mMessage Load (0.2ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36mChat Load (0.3ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.1ms)[0m  [1mDELETE FROM "messages" WHERE "messages"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 500 Internal Server Error in 60479ms (ActiveRecord: 5.3ms)
  [1m[36m (9.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 13:46:07 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 37ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:46:07 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (110.1ms)
  Rendered homes/home.html.erb within layouts/application (261.6ms)
  Rendered layouts/_login_panel.html.erb (43.5ms)
  Rendered layouts/_header.html.erb (63.7ms)
  Rendered layouts/_content.html.erb (3.5ms)
Completed 200 OK in 792ms (Views: 787.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------
ChatsStateTest: test_delete_chat
--------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:46:08 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/chats/8" for 127.0.0.1 at 2018-12-21 13:46:08 +0800
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:46:08 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (3.5ms)
  Rendered homes/home.html.erb within layouts/application (9.0ms)
  Rendered layouts/_login_panel.html.erb (4.1ms)
  Rendered layouts/_header.html.erb (5.5ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 22ms (Views: 21.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:46:08 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-21 13:46:08 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:46:08 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (14.2ms)
  Rendered homes/home.html.erb within layouts/application (14.7ms)
  Rendered layouts/_login_panel.html.erb (4.0ms)
  Rendered layouts/_header.html.erb (5.6ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 24ms (Views: 23.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:46:08 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-21 13:46:08 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:46:08 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (7.7ms)
  Rendered homes/home.html.erb within layouts/application (8.2ms)
  Rendered layouts/_login_panel.html.erb (2.6ms)
  Rendered layouts/_header.html.erb (5.0ms)
  Rendered layouts/_content.html.erb (2.2ms)
Completed 200 OK in 29ms (Views: 28.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:46:08 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-21 13:46:08 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:46:08 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.4ms)
  Rendered homes/home.html.erb within layouts/application (3.2ms)
  Rendered layouts/_login_panel.html.erb (6.9ms)
  Rendered layouts/_header.html.erb (8.4ms)
  Rendered layouts/_content.html.erb (1.8ms)
Completed 200 OK in 20ms (Views: 19.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 13:46:08 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (4.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 15ms (ActiveRecord: 4.4ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
---------------------------------------------
ChatsControllerTest: test_should_destroy_chat
---------------------------------------------
  [1m[35mChat Load (0.3ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "chats"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (3.5ms)[0m  begin transaction
--------------------------------------------
ChatsControllerTest: test_should_update_chat
--------------------------------------------
  [1m[36mChat Load (0.2ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
Processing by ChatsController#update as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}, "id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 8ms (ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsControllerTest: test_should_create_chat
--------------------------------------------
  [1m[35mChat Load (0.5ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (7.7ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "chats"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (6.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (1.6ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$kBzL2vjapaE2LCVezFA2IeEPkn8a9gcQQ23EvtWd5V2RIWWF8IBly"], ["created_at", "2018-12-21 05:46:10.870476"], ["updated_at", "2018-12-21 05:46:10.870476"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$Utn8eGX7FmtmWa71E0aeOOWq1sGoPknf8jflGqZR1S1AT5pLPCWpm"], ["created_at", "2018-12-21 05:46:10.996986"], ["updated_at", "2018-12-21 05:46:10.996986"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (1.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}}
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("name", "email", "sex", "password_digest", "phonenumber", "role", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$Ec22pjQoiTdNAi9B3XlMtOLkgiFoGZUiCBpbBMRcRB6kx4IFvv9dm"], ["phonenumber", ""], ["role", 1], ["status", "user"], ["created_at", "2018-12-21 05:46:11.075303"], ["updated_at", "2018-12-21 05:46:11.075303"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 16ms (ActiveRecord: 1.6ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[35mUser Load (1.9ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (6.5ms)[0m  DELETE FROM "chats_users" WHERE "chats_users"."user_id" = ?  [["user_id", 980190962]]
  [1m[36mSQL (2.3ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users?new=false
Completed 302 Found in 160ms (ActiveRecord: 9.6ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (1.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"980190962"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user1@test.com') AND "users"."id" != 980190962) LIMIT 1[0m
  [1m[35mSQL (2.2ms)[0m  UPDATE "users" SET "name" = ?, "email" = ?, "sex" = ?, "password_digest" = ?, "phonenumber" = ?, "updated_at" = ? WHERE "users"."id" = ?  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$X6lvUoy3r48aPCdZxXAuKeZm3WxS4z.j5XdaU45Li0WgN8l0X/6Eu"], ["phonenumber", "123456677777"], ["updated_at", "2018-12-21 05:46:11.308592"], ["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 49ms (ActiveRecord: 4.1ms)
  [1m[35m (1.1ms)[0m  rollback transaction
  [1m[36m (4.3ms)[0m  [1mbegin transaction[0m
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 13:46:11 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 4ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:46:11 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.9ms)
  Rendered homes/home.html.erb within layouts/application (2.5ms)
  Rendered layouts/_login_panel.html.erb (3.3ms)
  Rendered layouts/_header.html.erb (5.6ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 15ms (Views: 12.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 13:46:11 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 13:46:11 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:46:11 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.3ms)
  Rendered homes/home.html.erb within layouts/application (2.9ms)
  Rendered layouts/_login_panel.html.erb (2.4ms)
  Rendered layouts/_header.html.erb (3.1ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 10ms (Views: 8.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------
FriendshipStateTest: test_test_show_information_of_friend
---------------------------------------------------------
Started GET "/users/9" for 127.0.0.1 at 2018-12-21 13:46:11 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 9]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 4ms (ActiveRecord: 0.3ms)
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 13:46:11 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:46:11 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.5ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.4ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
FriendshipStateTest: test_delete_a_friend
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 13:46:11 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/3" for 127.0.0.1 at 2018-12-21 13:46:11 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"3"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:46:11 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.2ms)
  Rendered homes/home.html.erb within layouts/application (2.8ms)
  Rendered layouts/_login_panel.html.erb (2.2ms)
  Rendered layouts/_header.html.erb (3.1ms)
  Rendered layouts/_content.html.erb (0.5ms)
Completed 200 OK in 10ms (Views: 9.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------
FriendshipsControllerTest: test_should_create_friendship
--------------------------------------------------------
  [1m[35mFriendship Load (0.4ms)[0m  SELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "friendships"[0m
Processing by FriendshipsController#create as HTML
  Parameters: {"friendship"=>{}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "friendships"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
FriendshipsControllerTest: test_should_get_edit
-----------------------------------------------
  [1m[36mFriendship Load (0.3ms)[0m  [1mSELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
FriendshipsControllerTest: test_should_get_new
----------------------------------------------
  [1m[35mFriendship Load (0.1ms)[0m  SELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------------------
FriendshipsControllerTest: test_should_show_friendship
------------------------------------------------------
  [1m[36mFriendship Load (0.2ms)[0m  [1mSELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------
FriendshipsControllerTest: test_should_update_friendship
--------------------------------------------------------
  [1m[35mFriendship Load (0.2ms)[0m  SELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------------
FriendshipsControllerTest: test_should_get_index
------------------------------------------------
  [1m[36mFriendship Load (0.2ms)[0m  [1mSELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------
FriendshipsControllerTest: test_should_destroy_friendship
---------------------------------------------------------
  [1m[35mFriendship Load (6.0ms)[0m  SELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "friendships"[0m
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "friendships"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  begin transaction
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 13:46:13 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:46:13 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (4.9ms)
  Rendered homes/home.html.erb within layouts/application (7.1ms)
  Rendered layouts/_login_panel.html.erb (2.2ms)
  Rendered layouts/_header.html.erb (3.0ms)
  Rendered layouts/_content.html.erb (0.4ms)
Completed 200 OK in 17ms (Views: 15.9ms | ActiveRecord: 0.0ms)
  [1m[36m (1.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-21 13:46:13 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 18ms (ActiveRecord: 0.5ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (3.1ms)[0m  [1mbegin transaction[0m
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-21 13:46:13 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 11ms (ActiveRecord: 0.5ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:46:13 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.5ms)
  Rendered homes/home.html.erb within layouts/application (1.9ms)
  Rendered layouts/_login_panel.html.erb (4.9ms)
  Rendered layouts/_header.html.erb (5.8ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 12ms (Views: 10.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-21 13:46:13 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$znLwaOsOXjJ8gF58f3zn2.JqdiHdjPG0KpwKpWyVqWNtPvenJDOiy"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-21 05:46:14.016945"], ["updated_at", "2018-12-21 05:46:14.016945"]]
  [1m[36m (0.7ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 119ms (ActiveRecord: 2.2ms)
  [1m[35m (1.1ms)[0m  SELECT COUNT(*) FROM "users"
Started GET "/" for 127.0.0.1 at 2018-12-21 13:46:14 +0800
Processing by HomesController#home as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  Rendered homes/home.html.erb within layouts/application (1.7ms)
  Rendered layouts/_login_panel.html.erb (4.9ms)
  Rendered layouts/_header.html.erb (18.2ms)
  Rendered layouts/_content.html.erb (2.4ms)
Completed 200 OK in 30ms (Views: 29.2ms | ActiveRecord: 0.2ms)
  [1m[35m (19.9ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 13:46:14 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 4ms (ActiveRecord: 0.2ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-21 13:46:14 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:46:14 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (4.8ms)
  Rendered homes/home.html.erb within layouts/application (5.8ms)
  Rendered layouts/_login_panel.html.erb (2.6ms)
  Rendered layouts/_header.html.erb (17.5ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 201ms (Views: 199.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (1.1ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.9ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:47:58', '2018-12-21 05:47:58', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:47:58', '2018-12-21 05:47:58', 298486374)[0m
  [1m[35mFixture Delete (1.7ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "friendships" ("user_id", "friend_id", "created_at", "updated_at", "id") VALUES (1, 1, '2018-12-21 05:47:58', '2018-12-21 05:47:58', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "friendships" ("user_id", "friend_id", "created_at", "updated_at", "id") VALUES (1, 1, '2018-12-21 05:47:58', '2018-12-21 05:47:58', 298486374)
  [1m[36mFixture Delete (1.6ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "messages" ("body", "user_id", "created_at", "updated_at", "id") VALUES ('MyText', NULL, '2018-12-21 05:47:58', '2018-12-21 05:47:58', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "created_at", "updated_at", "id") VALUES ('MyText', NULL, '2018-12-21 05:47:58', '2018-12-21 05:47:58', 298486374)[0m
  [1m[35mFixture Delete (2.5ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:47:58', '2018-12-21 05:47:58', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:47:58', '2018-12-21 05:47:58', 298486374)
  [1m[36m (9.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------
FriendshipsControllerTest: test_should_create_friendship
--------------------------------------------------------
  [1m[36mFriendship Load (0.3ms)[0m  [1mSELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "friendships"
Processing by FriendshipsController#create as HTML
  Parameters: {"friendship"=>{}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 40ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "friendships"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------
FriendshipsControllerTest: test_should_destroy_friendship
---------------------------------------------------------
  [1m[35mFriendship Load (0.2ms)[0m  SELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "friendships"[0m
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "friendships"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------
FriendshipsControllerTest: test_should_update_friendship
--------------------------------------------------------
  [1m[36mFriendship Load (0.1ms)[0m  [1mSELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (1.7ms)[0m  [1mbegin transaction[0m
--------------------------------
ChatsStateTest: test_delete_chat
--------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:47:59 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 17ms (ActiveRecord: 0.0ms)
Started DELETE "/chats/8" for 127.0.0.1 at 2018-12-21 13:47:59 +0800
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:47:59 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (197.3ms)
  Rendered homes/home.html.erb within layouts/application (226.0ms)
  Rendered layouts/_login_panel.html.erb (10.7ms)
  Rendered layouts/_header.html.erb (17.1ms)
  Rendered layouts/_content.html.erb (1.2ms)
Completed 200 OK in 316ms (Views: 315.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:47:59 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-21 13:47:59 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:47:59 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.3ms)
  Rendered homes/home.html.erb within layouts/application (1.6ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (1.6ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 5.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:47:59 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-21 13:47:59 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 8ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:47:59 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.6ms)
  Rendered layouts/_login_panel.html.erb (4.7ms)
  Rendered layouts/_header.html.erb (6.4ms)
  Rendered layouts/_content.html.erb (0.6ms)
Completed 200 OK in 11ms (Views: 10.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:47:59 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-21 13:47:59 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:47:59 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.8ms)
  Rendered homes/home.html.erb within layouts/application (2.3ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 9ms (Views: 5.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsControllerTest: test_should_create_chat
--------------------------------------------
  [1m[35mChat Load (0.3ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "chats"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
ChatsControllerTest: test_should_destroy_chat
---------------------------------------------
  [1m[36mChat Load (0.3ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "chats"
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsControllerTest: test_should_update_chat
--------------------------------------------
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by ChatsController#update as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}, "id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 13:47:59 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:47:59 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.9ms)
  Rendered homes/home.html.erb within layouts/application (6.0ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 17ms (Views: 15.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 13:47:59 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 10ms (ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 13:47:59 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:47:59 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.6ms)
  Rendered homes/home.html.erb within layouts/application (2.0ms)
  Rendered layouts/_login_panel.html.erb (1.5ms)
  Rendered layouts/_header.html.erb (4.2ms)
  Rendered layouts/_content.html.erb (2.0ms)
Completed 200 OK in 11ms (Views: 9.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.5ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$FG7q0JH4O6fXpPOfrlt1QuZW8Puy/bzwNkJVeOdLeoMITz6VV1uT6"], ["created_at", "2018-12-21 05:48:00.770108"], ["updated_at", "2018-12-21 05:48:00.770108"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$lMqrAu3NQ8ONY8psK2SkO.bdAY49vWZBWRW3OuJvhf0.bYqfqVGtW"], ["created_at", "2018-12-21 05:48:00.860127"], ["updated_at", "2018-12-21 05:48:00.860127"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 13:48:00 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 13:48:00 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:48:00 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (4.1ms)
  Rendered homes/home.html.erb within layouts/application (4.7ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.4ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 8ms (Views: 8.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 13:48:00 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:48:00 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.5ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (1.6ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 6ms (Views: 5.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 13:48:00 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 14ms (ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-21 13:48:00 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 8ms (ActiveRecord: 0.3ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:48:00 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.7ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.2ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 7ms (Views: 5.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 13:48:01 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$3TZHIFsEzzpvTn3RyPL.4O9l0rV.zh4RZM7U9zKpBftM4MqJkcOkW"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-21 05:48:01.021466"], ["updated_at", "2018-12-21 05:48:01.021466"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 10ms (ActiveRecord: 1.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started GET "/" for 127.0.0.1 at 2018-12-21 13:48:01 +0800
Processing by HomesController#home as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  Rendered homes/home.html.erb within layouts/application (1.4ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (2.3ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 6ms (Views: 5.6ms | ActiveRecord: 0.1ms)
  [1m[36m (134.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------
MessagesControllerTest: test_should_create_message
--------------------------------------------------
  [1m[36mMessage Load (0.4ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "messages"
Processing by MessagesController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
MessagesControllerTest: test_should_destroy_message
---------------------------------------------------
  [1m[36mMessage Load (0.3ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "messages"
Processing by MessagesController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36mChat Load (0.4ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "messages" WHERE "messages"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 500 Internal Server Error in 60104ms (ActiveRecord: 1.7ms)
  [1m[36m (4.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.8ms)[0m  begin transaction
-----------------------------------------
FriendshipStateTest: test_delete_a_friend
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 13:49:01 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 4ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/3" for 127.0.0.1 at 2018-12-21 13:49:01 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"3"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:49:01 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (4.5ms)
  Rendered homes/home.html.erb within layouts/application (6.2ms)
  Rendered layouts/_login_panel.html.erb (2.8ms)
  Rendered layouts/_header.html.erb (5.1ms)
  Rendered layouts/_content.html.erb (2.4ms)
Completed 200 OK in 31ms (Views: 29.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------
FriendshipStateTest: test_test_show_information_of_friend
---------------------------------------------------------
Started GET "/users/9" for 127.0.0.1 at 2018-12-21 13:49:01 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 9]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 4ms (ActiveRecord: 0.3ms)
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 13:49:01 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 4ms (ActiveRecord: 0.2ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:49:01 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.4ms)
  Rendered homes/home.html.erb within layouts/application (2.0ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.6ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 5.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 13:49:01 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 4ms (ActiveRecord: 0.3ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-21 13:49:01 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:49:01 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.7ms)
  Rendered homes/home.html.erb within layouts/application (3.3ms)
  Rendered layouts/_login_panel.html.erb (2.7ms)
  Rendered layouts/_header.html.erb (3.4ms)
  Rendered layouts/_content.html.erb (0.4ms)
Completed 200 OK in 10ms (Views: 9.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("name", "email", "sex", "password_digest", "phonenumber", "role", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$xVW7xH81RukeXldKFIWpGOZ73pTQeZGRKofwEs390Yvfzm4FWbcA2"], ["phonenumber", ""], ["role", 1], ["status", "user"], ["created_at", "2018-12-21 05:49:01.839082"], ["updated_at", "2018-12-21 05:49:01.839082"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 21ms (ActiveRecord: 1.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (1.9ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.8ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.0ms)[0m  DELETE FROM "chats_users" WHERE "chats_users"."user_id" = ?  [["user_id", 980190962]]
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users?new=false
Completed 302 Found in 137ms (ActiveRecord: 2.9ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"980190962"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user1@test.com') AND "users"."id" != 980190962) LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  UPDATE "users" SET "name" = ?, "email" = ?, "sex" = ?, "password_digest" = ?, "phonenumber" = ?, "updated_at" = ? WHERE "users"."id" = ?  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$ft1MOnemISpiJyN9.segPeTVf/Y1FgianPFrNvYmZS5ItH40mMUh2"], ["phonenumber", "123456677777"], ["updated_at", "2018-12-21 05:49:02.015578"], ["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 22ms (ActiveRecord: 1.1ms)
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.9ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:50:00', '2018-12-21 05:50:00', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:50:00', '2018-12-21 05:50:00', 298486374)[0m
  [1m[35mFixture Delete (1.9ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "friendships" ("user_id", "friend_id", "created_at", "updated_at", "id") VALUES (1, 1, '2018-12-21 05:50:00', '2018-12-21 05:50:00', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "friendships" ("user_id", "friend_id", "created_at", "updated_at", "id") VALUES (1, 1, '2018-12-21 05:50:00', '2018-12-21 05:50:00', 298486374)
  [1m[36mFixture Delete (5.6ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "messages" ("body", "user_id", "created_at", "updated_at", "id") VALUES ('MyText', NULL, '2018-12-21 05:50:00', '2018-12-21 05:50:00', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "created_at", "updated_at", "id") VALUES ('MyText', NULL, '2018-12-21 05:50:00', '2018-12-21 05:50:00', 298486374)[0m
  [1m[35mFixture Delete (4.3ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:50:00', '2018-12-21 05:50:00', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:50:00', '2018-12-21 05:50:00', 298486374)
  [1m[36m (1.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$j50Q34oecp3PKffHrzZXsOo/Nrl14/XndOFfRWvv1aT.cP5Br9Vim"], ["created_at", "2018-12-21 05:50:02.069683"], ["updated_at", "2018-12-21 05:50:02.069683"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$/b24YC2.uqWCfcU6.Z3YjeJTWJEe5V2NT2ACHmEv.YQuy8Yk7889e"], ["created_at", "2018-12-21 05:50:02.153051"], ["updated_at", "2018-12-21 05:50:02.153051"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 13:50:02 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 27ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:50:02 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (12.7ms)
  Rendered homes/home.html.erb within layouts/application (30.5ms)
  Rendered layouts/_login_panel.html.erb (8.7ms)
  Rendered layouts/_header.html.erb (17.2ms)
  Rendered layouts/_content.html.erb (1.0ms)
Completed 200 OK in 111ms (Views: 110.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 13:50:02 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:50:02 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.0ms)
  Rendered homes/home.html.erb within layouts/application (1.3ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.3ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------
ChatsStateTest: test_delete_chat
--------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:50:02 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/chats/8" for 127.0.0.1 at 2018-12-21 13:50:02 +0800
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 4ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:50:02 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.0ms)
  Rendered homes/home.html.erb within layouts/application (1.3ms)
  Rendered layouts/_login_panel.html.erb (1.7ms)
  Rendered layouts/_header.html.erb (2.1ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 5ms (Views: 5.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:50:02 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-21 13:50:02 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:50:02 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.9ms)
  Rendered homes/home.html.erb within layouts/application (3.2ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.4ms)
  Rendered layouts/_content.html.erb (5.5ms)
Completed 200 OK in 17ms (Views: 12.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:50:02 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-21 13:50:02 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:50:02 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (0.9ms)
  Rendered homes/home.html.erb within layouts/application (1.3ms)
  Rendered layouts/_login_panel.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (1.1ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 4ms (Views: 3.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:50:02 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-21 13:50:02 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:50:02 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (6.7ms)
  Rendered homes/home.html.erb within layouts/application (7.7ms)
  Rendered layouts/_login_panel.html.erb (1.8ms)
  Rendered layouts/_header.html.erb (2.6ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 13ms (Views: 12.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------
FriendshipStateTest: test_test_show_information_of_friend
---------------------------------------------------------
Started GET "/users/9" for 127.0.0.1 at 2018-12-21 13:50:02 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 9]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 16ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 13:50:02 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:50:02 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.0ms)
  Rendered homes/home.html.erb within layouts/application (1.3ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.6ms)
  Rendered layouts/_content.html.erb (0.5ms)
Completed 200 OK in 10ms (Views: 9.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------
FriendshipStateTest: test_delete_a_friend
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 13:50:02 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/3" for 127.0.0.1 at 2018-12-21 13:50:02 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"3"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:50:02 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.4ms)
  Rendered homes/home.html.erb within layouts/application (1.8ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.4ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 13:50:02 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:50:02 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (0.9ms)
  Rendered homes/home.html.erb within layouts/application (1.2ms)
  Rendered layouts/_login_panel.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (1.2ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 4ms (Views: 3.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 13:50:02 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 13:50:02 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:50:02 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.3ms)
  Rendered layouts/_login_panel.html.erb (1.5ms)
  Rendered layouts/_header.html.erb (2.4ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 7ms (Views: 7.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------------------
FriendshipsControllerTest: test_should_update_friendship
--------------------------------------------------------
  [1m[36mFriendship Load (0.2ms)[0m  [1mSELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------
FriendshipsControllerTest: test_should_create_friendship
--------------------------------------------------------
  [1m[35mFriendship Load (1.2ms)[0m  SELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "friendships"[0m
Processing by FriendshipsController#create as HTML
  Parameters: {"friendship"=>{}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "friendships"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------
FriendshipsControllerTest: test_should_destroy_friendship
---------------------------------------------------------
  [1m[36mFriendship Load (0.8ms)[0m  [1mSELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "friendships"
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "friendships"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 13:50:03 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 5ms (ActiveRecord: 0.5ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 13:50:03 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-21 13:50:03 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:50:03 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.4ms)
  Rendered layouts/_login_panel.html.erb (2.9ms)
  Rendered layouts/_header.html.erb (3.8ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 11ms (Views: 10.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "chats_users" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 980190962]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "users" WHERE "users"."id" = ?  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users?new=false
Completed 302 Found in 58ms (ActiveRecord: 1.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"980190962"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user1@test.com') AND "users"."id" != 980190962) LIMIT 1
  [1m[36mSQL (2.3ms)[0m  [1mUPDATE "users" SET "name" = ?, "email" = ?, "sex" = ?, "password_digest" = ?, "phonenumber" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$05EJOdDBYRv03kprj7.v.unABNAA87Xw9z8j2UJjr6atjLIAEhh1m"], ["phonenumber", "123456677777"], ["updated_at", "2018-12-21 05:50:03.189898"], ["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 14ms (ActiveRecord: 2.7ms)
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.5ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "sex", "password_digest", "phonenumber", "role", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$GQAgrGoLiTBt4TVD9sj13OX8B.89HIZh7.kQU0TzTfpFXLdQm/hf2"], ["phonenumber", ""], ["role", 1], ["status", "user"], ["created_at", "2018-12-21 05:50:03.211680"], ["updated_at", "2018-12-21 05:50:03.211680"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 8ms (ActiveRecord: 0.7ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (1.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
MessagesControllerTest: test_should_destroy_message
---------------------------------------------------
  [1m[35mMessage Load (0.3ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "messages"[0m
Processing by MessagesController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35mChat Load (0.4ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "messages" WHERE "messages"."id" = ?  [["id", 980190962]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 19056ms (ActiveRecord: 1.3ms)
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (1.0ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.7ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:52:04', '2018-12-21 05:52:04', 980190962)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:52:04', '2018-12-21 05:52:04', 298486374)[0m
  [1m[35mFixture Delete (3.5ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "friendships" ("user_id", "friend_id", "created_at", "updated_at", "id") VALUES (1, 1, '2018-12-21 05:52:04', '2018-12-21 05:52:04', 980190962)[0m
  [1m[35mFixture Insert (4.9ms)[0m  INSERT INTO "friendships" ("user_id", "friend_id", "created_at", "updated_at", "id") VALUES (1, 1, '2018-12-21 05:52:04', '2018-12-21 05:52:04', 298486374)
  [1m[36mFixture Delete (1.8ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "messages" ("body", "user_id", "created_at", "updated_at", "id") VALUES ('MyText', NULL, '2018-12-21 05:52:04', '2018-12-21 05:52:04', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "created_at", "updated_at", "id") VALUES ('MyText', NULL, '2018-12-21 05:52:04', '2018-12-21 05:52:04', 298486374)[0m
  [1m[35mFixture Delete (0.9ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:52:04', '2018-12-21 05:52:04', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:52:04', '2018-12-21 05:52:04', 298486374)
  [1m[36m (1.4ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------
ChatsStateTest: test_delete_chat
--------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:52:04 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 60ms (ActiveRecord: 0.0ms)
Started DELETE "/chats/8" for 127.0.0.1 at 2018-12-21 13:52:04 +0800
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:52:04 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (24.6ms)
  Rendered homes/home.html.erb within layouts/application (57.9ms)
  Rendered layouts/_login_panel.html.erb (12.9ms)
  Rendered layouts/_header.html.erb (24.9ms)
  Rendered layouts/_content.html.erb (2.1ms)
Completed 200 OK in 173ms (Views: 171.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:52:05 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-21 13:52:05 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:52:05 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.8ms)
  Rendered homes/home.html.erb within layouts/application (2.3ms)
  Rendered layouts/_login_panel.html.erb (5.5ms)
  Rendered layouts/_header.html.erb (6.9ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 13ms (Views: 12.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:52:05 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-21 13:52:05 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:52:05 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.3ms)
  Rendered homes/home.html.erb within layouts/application (1.7ms)
  Rendered layouts/_login_panel.html.erb (2.3ms)
  Rendered layouts/_header.html.erb (2.8ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 7ms (Views: 6.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:52:05 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-21 13:52:05 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 4ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:52:05 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (3.8ms)
  Rendered homes/home.html.erb within layouts/application (11.0ms)
  Rendered layouts/_login_panel.html.erb (3.1ms)
  Rendered layouts/_header.html.erb (4.2ms)
  Rendered layouts/_content.html.erb (0.5ms)
Completed 200 OK in 29ms (Views: 28.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------
ChatsControllerTest: test_should_create_chat
--------------------------------------------
  [1m[36mChat Load (0.4ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "chats"
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
---------------------------------------------
ChatsControllerTest: test_should_destroy_chat
---------------------------------------------
  [1m[35mChat Load (0.2ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "chats"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsControllerTest: test_should_update_chat
--------------------------------------------
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
Processing by ChatsController#update as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}, "id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (1.9ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$BSkHDqiu6nOCXxYDx0PhmOCQflZ5tgkdWNU80S3nA5zoHxvAS478G"], ["created_at", "2018-12-21 05:52:07.349896"], ["updated_at", "2018-12-21 05:52:07.349896"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$ocBbeIVAqTziTTbWl1d1V.QnIXel21I7VcA3qI1IxFJWINcWO5bf2"], ["created_at", "2018-12-21 05:52:07.370645"], ["updated_at", "2018-12-21 05:52:07.370645"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 13:52:07 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 7ms (ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------------
MessagesControllerTest: test_should_create_message
--------------------------------------------------
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "messages"
Processing by MessagesController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
MessagesControllerTest: test_should_destroy_message
---------------------------------------------------
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "messages"
Processing by MessagesController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mMessage Load (0.3ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36mChat Load (0.2ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.3ms)[0m  [1mDELETE FROM "messages" WHERE "messages"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 500 Internal Server Error in 60445ms (ActiveRecord: 2.0ms)
  [1m[36m (2.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 13:53:08 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:53:08 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (13.1ms)
  Rendered homes/home.html.erb within layouts/application (15.7ms)
  Rendered layouts/_login_panel.html.erb (3.2ms)
  Rendered layouts/_header.html.erb (4.5ms)
  Rendered layouts/_content.html.erb (0.5ms)
Completed 200 OK in 48ms (Views: 44.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 13:53:08 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:53:08 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (14.3ms)
  Rendered homes/home.html.erb within layouts/application (14.7ms)
  Rendered layouts/_login_panel.html.erb (1.3ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 20ms (Views: 18.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.4ms)[0m  begin transaction
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 13:53:08 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:53:08 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.3ms)
  Rendered homes/home.html.erb within layouts/application (1.6ms)
  Rendered layouts/_login_panel.html.erb (1.8ms)
  Rendered layouts/_header.html.erb (2.3ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 5.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 13:53:08 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 13:53:08 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:53:08 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.9ms)
  Rendered homes/home.html.erb within layouts/application (4.0ms)
  Rendered layouts/_login_panel.html.erb (3.2ms)
  Rendered layouts/_header.html.erb (4.0ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 12ms (Views: 10.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 13:53:08 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 7ms (ActiveRecord: 0.3ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-21 13:53:08 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:53:08 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (3.1ms)
  Rendered homes/home.html.erb within layouts/application (3.5ms)
  Rendered layouts/_login_panel.html.erb (2.2ms)
  Rendered layouts/_header.html.erb (2.6ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 9ms (Views: 7.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"980190962"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user1@test.com') AND "users"."id" != 980190962) LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "users" SET "name" = ?, "email" = ?, "sex" = ?, "password_digest" = ?, "phonenumber" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$BWJRgmNmX5HSu0yoWv1BfOulkJfwMVWcvUkjT5Lo1Ml6YbOQMqmWK"], ["phonenumber", "123456677777"], ["updated_at", "2018-12-21 05:53:08.473908"], ["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 35ms (ActiveRecord: 1.1ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "sex", "password_digest", "phonenumber", "role", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$sENQruBdANu.Qky3XnDZAO8Hh6x27DobJZvGudv9eBp//RR//rYmC"], ["phonenumber", ""], ["role", 1], ["status", "user"], ["created_at", "2018-12-21 05:53:08.510280"], ["updated_at", "2018-12-21 05:53:08.510280"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 8ms (ActiveRecord: 0.8ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (2.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "chats_users" WHERE "chats_users"."user_id" = ?  [["user_id", 980190962]]
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users?new=false
Completed 302 Found in 92ms (ActiveRecord: 1.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-21 13:53:08 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 14ms (ActiveRecord: 0.4ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:53:08 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.0ms)
  Rendered homes/home.html.erb within layouts/application (1.6ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.4ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-21 13:53:08 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 7ms (ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 13:53:08 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$zUO/6D.JwKn0D1esNQVtv..D2OM68bdxpXh0yQQFnf2C1sLidEebG"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-21 05:53:08.703053"], ["updated_at", "2018-12-21 05:53:08.703053"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 14ms (ActiveRecord: 2.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started GET "/" for 127.0.0.1 at 2018-12-21 13:53:08 +0800
Processing by HomesController#home as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  Rendered homes/home.html.erb within layouts/application (1.4ms)
  Rendered layouts/_login_panel.html.erb (1.5ms)
  Rendered layouts/_header.html.erb (3.9ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 12ms (Views: 10.9ms | ActiveRecord: 0.1ms)
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
-----------------------------------------
FriendshipStateTest: test_delete_a_friend
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 13:53:08 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/3" for 127.0.0.1 at 2018-12-21 13:53:08 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"3"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:53:08 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.4ms)
  Rendered homes/home.html.erb within layouts/application (1.9ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.3ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 11ms (Views: 10.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------
FriendshipStateTest: test_test_show_information_of_friend
---------------------------------------------------------
Started GET "/users/9" for 127.0.0.1 at 2018-12-21 13:53:08 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 9]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 13:53:08 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:53:08 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.5ms)
  Rendered homes/home.html.erb within layouts/application (5.1ms)
  Rendered layouts/_login_panel.html.erb (3.0ms)
  Rendered layouts/_header.html.erb (3.9ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 12ms (Views: 11.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------------------
FriendshipsControllerTest: test_should_destroy_friendship
---------------------------------------------------------
  [1m[36mFriendship Load (0.9ms)[0m  [1mSELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "friendships"
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "friendships"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------
FriendshipsControllerTest: test_should_create_friendship
--------------------------------------------------------
  [1m[35mFriendship Load (0.7ms)[0m  SELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "friendships"[0m
Processing by FriendshipsController#create as HTML
  Parameters: {"friendship"=>{"friend_id"=>"1"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "friendships"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (1.1ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (1.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:54:09', '2018-12-21 05:54:09', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:54:09', '2018-12-21 05:54:09', 298486374)[0m
  [1m[35mFixture Delete (1.5ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "friendships" ("user_id", "friend_id", "created_at", "updated_at", "id") VALUES (1, 1, '2018-12-21 05:54:09', '2018-12-21 05:54:09', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "friendships" ("user_id", "friend_id", "created_at", "updated_at", "id") VALUES (1, 1, '2018-12-21 05:54:09', '2018-12-21 05:54:09', 298486374)
  [1m[36mFixture Delete (1.2ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "messages" ("body", "user_id", "created_at", "updated_at", "id") VALUES ('MyText', NULL, '2018-12-21 05:54:09', '2018-12-21 05:54:09', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "created_at", "updated_at", "id") VALUES ('MyText', NULL, '2018-12-21 05:54:09', '2018-12-21 05:54:09', 298486374)[0m
  [1m[35mFixture Delete (1.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:54:09', '2018-12-21 05:54:09', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:54:09', '2018-12-21 05:54:09', 298486374)
  [1m[36m (1.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 13:54:09 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 56ms (ActiveRecord: 0.3ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-21 13:54:09 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:54:09 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (15.9ms)
  Rendered homes/home.html.erb within layouts/application (60.7ms)
  Rendered layouts/_login_panel.html.erb (13.8ms)
  Rendered layouts/_header.html.erb (20.3ms)
  Rendered layouts/_content.html.erb (1.0ms)
Completed 200 OK in 133ms (Views: 132.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 13:54:09 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:54:09 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.6ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.4ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 7ms (Views: 6.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------------
MessagesControllerTest: test_should_create_message
--------------------------------------------------
  [1m[36mMessage Load (0.3ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "messages"
Processing by MessagesController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Completed 500 Internal Server Error in 7ms (ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
MessagesControllerTest: test_should_destroy_message
---------------------------------------------------
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "messages"
Processing by MessagesController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35mMessage Load (0.0ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "messages" WHERE "messages"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 500 Internal Server Error in 27728ms (ActiveRecord: 0.8ms)
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.9ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.7ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:54:51', '2018-12-21 05:54:51', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:54:51', '2018-12-21 05:54:51', 298486374)[0m
  [1m[35mFixture Delete (1.9ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "friendships" ("user_id", "friend_id", "created_at", "updated_at", "id") VALUES (1, 1, '2018-12-21 05:54:52', '2018-12-21 05:54:52', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "friendships" ("user_id", "friend_id", "created_at", "updated_at", "id") VALUES (1, 1, '2018-12-21 05:54:52', '2018-12-21 05:54:52', 298486374)
  [1m[36mFixture Delete (1.8ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "messages" ("body", "user_id", "created_at", "updated_at", "id") VALUES ('MyText', NULL, '2018-12-21 05:54:52', '2018-12-21 05:54:52', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "created_at", "updated_at", "id") VALUES ('MyText', NULL, '2018-12-21 05:54:52', '2018-12-21 05:54:52', 298486374)[0m
  [1m[35mFixture Delete (1.8ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:54:52', '2018-12-21 05:54:52', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:54:52', '2018-12-21 05:54:52', 298486374)
  [1m[36m (1.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 13:54:52 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 26ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:54:52 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (26.2ms)
  Rendered homes/home.html.erb within layouts/application (50.8ms)
  Rendered layouts/_login_panel.html.erb (10.9ms)
  Rendered layouts/_header.html.erb (18.9ms)
  Rendered layouts/_content.html.erb (1.0ms)
Completed 200 OK in 124ms (Views: 123.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 13:54:52 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 13:54:52 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:54:52 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.4ms)
  Rendered homes/home.html.erb within layouts/application (1.7ms)
  Rendered layouts/_login_panel.html.erb (2.8ms)
  Rendered layouts/_header.html.erb (3.3ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 11ms (Views: 10.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------
ChatsControllerTest: test_should_create_chat
--------------------------------------------
  [1m[36mChat Load (0.4ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "chats"
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
ChatsControllerTest: test_should_destroy_chat
---------------------------------------------
  [1m[35mChat Load (0.2ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "chats"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsControllerTest: test_should_update_chat
--------------------------------------------
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
Processing by ChatsController#update as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}, "id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.8ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$CcexEB5DmIBPgAf/Opunyu937L2dl9.ESheFaXd5Mpuxx6DuiOfRq"], ["created_at", "2018-12-21 05:54:53.652035"], ["updated_at", "2018-12-21 05:54:53.652035"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$VAHQXo5t5oeipIY2HTJQKe15isYt5V6EP/Oi0mQZmgyMQlCKGRwLG"], ["created_at", "2018-12-21 05:54:53.668547"], ["updated_at", "2018-12-21 05:54:53.668547"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (1.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------
FriendshipStateTest: test_delete_a_friend
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 13:54:53 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/3" for 127.0.0.1 at 2018-12-21 13:54:53 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"3"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 4ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:54:53 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (4.7ms)
  Rendered homes/home.html.erb within layouts/application (5.1ms)
  Rendered layouts/_login_panel.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (1.1ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 8ms (Views: 7.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------
FriendshipStateTest: test_test_show_information_of_friend
---------------------------------------------------------
Started GET "/users/9" for 127.0.0.1 at 2018-12-21 13:54:53 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 9]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 5ms (ActiveRecord: 0.1ms)
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 13:54:53 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:54:53 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.4ms)
  Rendered homes/home.html.erb within layouts/application (1.8ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.4ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
MessagesControllerTest: test_should_destroy_message
---------------------------------------------------
  [1m[35mMessage Load (0.3ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "messages"[0m
Processing by MessagesController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36mMessage Load (0.0ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35mChat Load (0.2ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "messages" WHERE "messages"."id" = ?  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 60766ms (ActiveRecord: 1.0ms)
  [1m[35m (18.3ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[35m (8.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 13:55:54 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[36m (0.7ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$jJl.OxlUcntj6UVgpYLcXepqcQY/kmQNYemVHqzUXjunzT7sJHiq."], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-21 05:55:55.021596"], ["updated_at", "2018-12-21 05:55:55.021596"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 40ms (ActiveRecord: 2.4ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started GET "/" for 127.0.0.1 at 2018-12-21 13:55:55 +0800
Processing by HomesController#home as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  Rendered homes/home.html.erb within layouts/application (4.1ms)
  Rendered layouts/_login_panel.html.erb (5.0ms)
  Rendered layouts/_header.html.erb (138.0ms)
  Rendered layouts/_content.html.erb (0.9ms)
Completed 200 OK in 151ms (Views: 149.9ms | ActiveRecord: 0.2ms)
  [1m[36m (2.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-21 13:55:55 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 27ms (ActiveRecord: 0.9ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:55:55 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (6.0ms)
  Rendered homes/home.html.erb within layouts/application (6.9ms)
  Rendered layouts/_login_panel.html.erb (3.2ms)
  Rendered layouts/_header.html.erb (4.3ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 15ms (Views: 14.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 13:55:55 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 40ms (ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------
FriendshipsControllerTest: test_should_destroy_friendship
---------------------------------------------------------
  [1m[36mFriendship Load (0.7ms)[0m  [1mSELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "friendships"
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "friendships"[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------
FriendshipsControllerTest: test_should_create_friendship
--------------------------------------------------------
  [1m[35mFriendship Load (0.5ms)[0m  SELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "friendships"[0m
Processing by FriendshipsController#create as HTML
  Parameters: {"friendship"=>{"id"=>"1"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (1.5ms)[0m  SELECT COUNT(*) FROM "friendships"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 13:55:55 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-21 13:55:55 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:55:55 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.4ms)
  Rendered homes/home.html.erb within layouts/application (3.0ms)
  Rendered layouts/_login_panel.html.erb (2.5ms)
  Rendered layouts/_header.html.erb (3.8ms)
  Rendered layouts/_content.html.erb (0.4ms)
Completed 200 OK in 12ms (Views: 10.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 13:55:55 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (2.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 23ms (ActiveRecord: 2.6ms)
  [1m[35m (3.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:55:55 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 5ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-21 13:55:55 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:55:55 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.9ms)
  Rendered homes/home.html.erb within layouts/application (3.5ms)
  Rendered layouts/_login_panel.html.erb (3.2ms)
  Rendered layouts/_header.html.erb (4.3ms)
  Rendered layouts/_content.html.erb (1.1ms)
Completed 200 OK in 19ms (Views: 15.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:55:55 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-21 13:55:55 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 9ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:55:55 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (4.2ms)
  Rendered homes/home.html.erb within layouts/application (5.2ms)
  Rendered layouts/_login_panel.html.erb (2.8ms)
  Rendered layouts/_header.html.erb (7.7ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 18ms (Views: 16.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:55:55 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-21 13:55:55 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:55:55 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.1ms)
  Rendered homes/home.html.erb within layouts/application (6.4ms)
  Rendered layouts/_login_panel.html.erb (1.5ms)
  Rendered layouts/_header.html.erb (2.3ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 12ms (Views: 11.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------
ChatsStateTest: test_delete_chat
--------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:55:55 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/chats/8" for 127.0.0.1 at 2018-12-21 13:55:55 +0800
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:55:55 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.4ms)
  Rendered homes/home.html.erb within layouts/application (3.0ms)
  Rendered layouts/_login_panel.html.erb (1.5ms)
  Rendered layouts/_header.html.erb (2.4ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 10ms (Views: 8.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 13:55:55 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:55:55 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (3.7ms)
  Rendered homes/home.html.erb within layouts/application (4.4ms)
  Rendered layouts/_login_panel.html.erb (1.9ms)
  Rendered layouts/_header.html.erb (2.8ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 11ms (Views: 10.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("name", "email", "sex", "password_digest", "phonenumber", "role", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$b5VBYQPS/Rfw.f8R2d0SSuwyrvmjLw9pmiXZUbglvl7TfgWhpjAKq"], ["phonenumber", ""], ["role", 1], ["status", "user"], ["created_at", "2018-12-21 05:55:56.004240"], ["updated_at", "2018-12-21 05:55:56.004240"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 25ms (ActiveRecord: 1.6ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (2.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mDELETE FROM "chats_users" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 980190962]]
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "users" WHERE "users"."id" = ?  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users?new=false
Completed 302 Found in 127ms (ActiveRecord: 5.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"980190962"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user1@test.com') AND "users"."id" != 980190962) LIMIT 1
  [1m[36mSQL (3.9ms)[0m  [1mUPDATE "users" SET "name" = ?, "email" = ?, "sex" = ?, "password_digest" = ?, "phonenumber" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$2jwhY7JJQo.xCjS8RNt0Qubx5IYFU3b4QD/eieyCYmVIFuQp3/ipG"], ["phonenumber", "123456677777"], ["updated_at", "2018-12-21 05:55:56.208369"], ["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 38ms (ActiveRecord: 4.8ms)
  [1m[36m (1.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 13:55:56 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 6ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:55:56 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (5.4ms)
  Rendered homes/home.html.erb within layouts/application (6.1ms)
  Rendered layouts/_login_panel.html.erb (1.6ms)
  Rendered layouts/_header.html.erb (2.1ms)
  Rendered layouts/_content.html.erb (2.5ms)
Completed 200 OK in 15ms (Views: 13.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.8ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:58:03', '2018-12-21 05:58:03', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:58:03', '2018-12-21 05:58:03', 298486374)[0m
  [1m[35mFixture Delete (1.6ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:58:03', '2018-12-21 05:58:03', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:58:03', '2018-12-21 05:58:03', 298486374)
  [1m[36mFixture Delete (1.5ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "messages" ("body", "user_id", "created_at", "updated_at", "id") VALUES ('MyText', NULL, '2018-12-21 05:58:03', '2018-12-21 05:58:03', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "created_at", "updated_at", "id") VALUES ('MyText', NULL, '2018-12-21 05:58:03', '2018-12-21 05:58:03', 298486374)[0m
  [1m[35mFixture Delete (1.0ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:58:03', '2018-12-21 05:58:03', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 05:58:03', '2018-12-21 05:58:03', 298486374)
  [1m[36m (1.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-21 13:58:03 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$KVkZADWr7/a/.YkiUzFIOejuSow45FDGpnp9hg6UFMdeDFCiEkSiK"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-21 05:58:03.689440"], ["updated_at", "2018-12-21 05:58:03.689440"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 139ms (ActiveRecord: 1.4ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Started GET "/" for 127.0.0.1 at 2018-12-21 13:58:03 +0800
Processing by HomesController#home as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  Rendered homes/home.html.erb within layouts/application (27.0ms)
  Rendered layouts/_login_panel.html.erb (22.9ms)
  Rendered layouts/_header.html.erb (28.1ms)
  Rendered layouts/_content.html.erb (4.3ms)
Completed 200 OK in 156ms (Views: 154.7ms | ActiveRecord: 0.3ms)
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 13:58:03 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 1148ms (ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-21 13:58:05 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.5ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 12ms (ActiveRecord: 1.7ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:58:05 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.5ms)
  Rendered homes/home.html.erb within layouts/application (17.1ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.3ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 23ms (Views: 20.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 13:58:05 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-21 13:58:05 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:58:05 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.3ms)
  Rendered homes/home.html.erb within layouts/application (1.7ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 6ms (Views: 5.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:58:05 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-21 13:58:05 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:58:05 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.3ms)
  Rendered homes/home.html.erb within layouts/application (1.7ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.1ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:58:05 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-21 13:58:05 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:58:05 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.8ms)
  Rendered homes/home.html.erb within layouts/application (2.6ms)
  Rendered layouts/_login_panel.html.erb (1.4ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 7ms (Views: 6.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------
ChatsStateTest: test_delete_chat
--------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:58:05 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/chats/8" for 127.0.0.1 at 2018-12-21 13:58:05 +0800
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:58:05 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.6ms)
  Rendered layouts/_login_panel.html.erb (1.5ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 7ms (Views: 5.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 13:58:05 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-21 13:58:05 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:58:05 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.3ms)
  Rendered homes/home.html.erb within layouts/application (2.9ms)
  Rendered layouts/_login_panel.html.erb (1.2ms)
  Rendered layouts/_header.html.erb (2.3ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 8ms (Views: 7.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------
FriendshipsControllerTest: test_should_create_friendship
--------------------------------------------------------
  [1m[35mFriendship Load (0.6ms)[0m  SELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "friendships"[0m
Processing by FriendshipsController#create as HTML
  Parameters: {"friendship"=>{}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "friendships"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------
FriendshipsControllerTest: test_should_destroy_friendship
---------------------------------------------------------
  [1m[36mFriendship Load (0.2ms)[0m  [1mSELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "friendships"
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "friendships"[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsControllerTest: test_should_create_chat
--------------------------------------------
  [1m[35mChat Load (0.2ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (1.1ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "chats"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
---------------------------------------------
ChatsControllerTest: test_should_destroy_chat
---------------------------------------------
  [1m[36mChat Load (0.2ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "chats"
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsControllerTest: test_should_update_chat
--------------------------------------------
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by ChatsController#update as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}, "id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
MessagesControllerTest: test_should_destroy_message
---------------------------------------------------
  [1m[36mMessage Load (0.3ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "messages"
Processing by MessagesController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36mChat Load (0.5ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "messages" WHERE "messages"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 500 Internal Server Error in 60511ms (ActiveRecord: 1.3ms)
  [1m[36m (10.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.5ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[36mUser Load (7.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"980190962"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (3.2ms)[0m  SELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user1@test.com') AND "users"."id" != 980190962) LIMIT 1
  [1m[36mSQL (1.2ms)[0m  [1mUPDATE "users" SET "name" = ?, "email" = ?, "sex" = ?, "password_digest" = ?, "phonenumber" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$7NQuSUCFVtuC0itnbajg.eacYkMEVNDrHWAnPX6d4IGBDjhvdhfJC"], ["phonenumber", "123456677777"], ["updated_at", "2018-12-21 05:59:06.282714"], ["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 152ms (ActiveRecord: 5.8ms)
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("name", "email", "sex", "password_digest", "phonenumber", "role", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$sRvtY2oyAVV8tK.H8hEs2.KgokAz2zh5X1CKoQyogcHupun3LSc4C"], ["phonenumber", ""], ["role", 1], ["status", "user"], ["created_at", "2018-12-21 05:59:06.379678"], ["updated_at", "2018-12-21 05:59:06.379678"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 49ms (ActiveRecord: 1.6ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "chats_users" WHERE "chats_users"."user_id" = ?  [["user_id", 980190962]]
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users?new=false
Completed 302 Found in 180ms (ActiveRecord: 2.5ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (1.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
FriendshipStateTest: test_delete_a_friend
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 13:59:06 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/3" for 127.0.0.1 at 2018-12-21 13:59:06 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"3"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:59:06 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (3.5ms)
  Rendered homes/home.html.erb within layouts/application (5.0ms)
  Rendered layouts/_login_panel.html.erb (1.9ms)
  Rendered layouts/_header.html.erb (2.6ms)
  Rendered layouts/_content.html.erb (0.4ms)
Completed 200 OK in 15ms (Views: 14.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------
FriendshipStateTest: test_test_show_information_of_friend
---------------------------------------------------------
Started GET "/users/9" for 127.0.0.1 at 2018-12-21 13:59:06 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 9]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 13:59:06 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 4ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:59:06 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.3ms)
  Rendered homes/home.html.erb within layouts/application (1.9ms)
  Rendered layouts/_login_panel.html.erb (1.6ms)
  Rendered layouts/_header.html.erb (2.2ms)
  Rendered layouts/_content.html.erb (0.5ms)
Completed 200 OK in 7ms (Views: 6.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 13:59:06 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 13:59:06 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:59:06 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (4.0ms)
  Rendered homes/home.html.erb within layouts/application (4.9ms)
  Rendered layouts/_login_panel.html.erb (2.2ms)
  Rendered layouts/_header.html.erb (4.1ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 12ms (Views: 11.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 13:59:06 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:59:06 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.2ms)
  Rendered homes/home.html.erb within layouts/application (2.9ms)
  Rendered layouts/_login_panel.html.erb (1.2ms)
  Rendered layouts/_header.html.erb (2.0ms)
  Rendered layouts/_content.html.erb (0.5ms)
Completed 200 OK in 17ms (Views: 10.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$l6.ARrbXnCJH4Sxmf0n58e27AGt92MCD9NrQZS7yDzEoZsqxLFmrq"], ["created_at", "2018-12-21 05:59:06.904579"], ["updated_at", "2018-12-21 05:59:06.904579"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (2.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (1.9ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$Ij/xjNeeLquqqfT4BP8cpuBeMnu0tfXsY.mpFh4ePQ9YEd.DB8YPG"], ["created_at", "2018-12-21 05:59:06.995853"], ["updated_at", "2018-12-21 05:59:06.995853"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (1.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.9ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 13:59:07 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:59:07 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.3ms)
  Rendered homes/home.html.erb within layouts/application (1.8ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.6ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 6ms (Views: 5.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 13:59:07 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 13:59:07 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 5ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 13:59:07 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.3ms)
  Rendered homes/home.html.erb within layouts/application (3.0ms)
  Rendered layouts/_login_panel.html.erb (1.8ms)
  Rendered layouts/_header.html.erb (2.8ms)
  Rendered layouts/_content.html.erb (0.4ms)
Completed 200 OK in 10ms (Views: 8.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (3.8ms)[0m  begin transaction
  [1m[36mFixture Delete (1.0ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.8ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:02:00', '2018-12-21 06:02:00', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:02:00', '2018-12-21 06:02:00', 298486374)[0m
  [1m[35mFixture Delete (3.1ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:02:00', '2018-12-21 06:02:00', 980190962)[0m
  [1m[35mFixture Insert (0.7ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:02:00', '2018-12-21 06:02:00', 298486374)
  [1m[36mFixture Delete (2.7ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "messages" ("body", "user_id", "created_at", "updated_at", "id") VALUES ('MyText', NULL, '2018-12-21 06:02:00', '2018-12-21 06:02:00', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "created_at", "updated_at", "id") VALUES ('MyText', NULL, '2018-12-21 06:02:00', '2018-12-21 06:02:00', 298486374)[0m
  [1m[35mFixture Delete (2.8ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:02:00', '2018-12-21 06:02:00', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:02:00', '2018-12-21 06:02:00', 298486374)
  [1m[36m (1.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-21 14:02:00 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 1115ms (ActiveRecord: 0.4ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:02:02 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (12.7ms)
  Rendered homes/home.html.erb within layouts/application (51.1ms)
  Rendered layouts/_login_panel.html.erb (7.9ms)
  Rendered layouts/_header.html.erb (12.4ms)
  Rendered layouts/_content.html.erb (3.5ms)
Completed 200 OK in 114ms (Views: 112.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 14:02:02 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$qrqBj90g/L4JdfuXdpWyhePBsV.dLH1CtDH7RbHbXveR69T6Rsgza"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-21 06:02:02.226998"], ["updated_at", "2018-12-21 06:02:02.226998"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 13ms (ActiveRecord: 0.8ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started GET "/" for 127.0.0.1 at 2018-12-21 14:02:02 +0800
Processing by HomesController#home as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  Rendered homes/home.html.erb within layouts/application (36.1ms)
  Rendered layouts/_login_panel.html.erb (1.3ms)
  Rendered layouts/_header.html.erb (2.5ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 41ms (Views: 40.4ms | ActiveRecord: 0.3ms)
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-21 14:02:02 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 8ms (ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 14:02:02 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-21 14:02:02 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:02:02 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.8ms)
  Rendered homes/home.html.erb within layouts/application (9.4ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 13ms (Views: 12.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 14:02:02 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:02:02 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (5.5ms)
  Rendered homes/home.html.erb within layouts/application (5.8ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 10ms (Views: 9.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsControllerTest: test_should_create_chat
--------------------------------------------
  [1m[35mChat Load (0.2ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "chats"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
ChatsControllerTest: test_should_destroy_chat
---------------------------------------------
  [1m[36mChat Load (0.2ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "chats"
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsControllerTest: test_should_update_chat
--------------------------------------------
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by ChatsController#update as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}, "id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 14:02:02 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:02:02 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.3ms)
  Rendered homes/home.html.erb within layouts/application (3.5ms)
  Rendered layouts/_login_panel.html.erb (1.3ms)
  Rendered layouts/_header.html.erb (2.0ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 9ms (Views: 8.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$178P9bl4JNDbEwS4gxUtIOUkvOOCjJP72cHd.vKVy5O9IOvryM4vy"], ["created_at", "2018-12-21 06:02:02.521842"], ["updated_at", "2018-12-21 06:02:02.521842"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (8.5ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$Vf8.SvpcL9fTIvejLeFcVuczxTPOL1MeB6i/6PeKrv8Gi1L4QXIkC"], ["created_at", "2018-12-21 06:02:02.589139"], ["updated_at", "2018-12-21 06:02:02.589139"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36m (1.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 14:02:02 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 2ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("name", "email", "sex", "password_digest", "phonenumber", "role", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$b3rugXcZv9cq0glbH1DNDeTnNR8U2FXycYNHY32MDO3flgq2zkKja"], ["phonenumber", ""], ["role", 1], ["status", "user"], ["created_at", "2018-12-21 06:02:02.679803"], ["updated_at", "2018-12-21 06:02:02.679803"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 10ms (ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "chats_users" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 980190962]]
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "users" WHERE "users"."id" = ?  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users?new=false
Completed 302 Found in 42ms (ActiveRecord: 1.6ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"980190962"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user1@test.com') AND "users"."id" != 980190962) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "users" SET "name" = ?, "email" = ?, "sex" = ?, "password_digest" = ?, "phonenumber" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$5ixYTsschIJGK/e.v54JSOFY/uaAy3jNeKea68oSyBVpk9dNso24a"], ["phonenumber", "123456677777"], ["updated_at", "2018-12-21 06:02:02.754625"], ["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 11ms (ActiveRecord: 0.8ms)
  [1m[36m (1.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
MessagesControllerTest: test_should_destroy_message
---------------------------------------------------
  [1m[36mMessage Load (0.7ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "messages"
Processing by MessagesController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36mChat Load (0.2ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "messages" WHERE "messages"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 500 Internal Server Error in 60450ms (ActiveRecord: 0.9ms)
  [1m[36m (9.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (3.4ms)[0m  begin transaction
--------------------------------------------------------
FriendshipsControllerTest: test_should_create_friendship
--------------------------------------------------------
  [1m[36mFriendship Load (1.6ms)[0m  [1mSELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "friendships"
Processing by FriendshipsController#create as HTML
  Parameters: {"friendship"=>{"users_id"=>"1"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "friendships"[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------
FriendshipsControllerTest: test_should_destroy_friendship
---------------------------------------------------------
  [1m[35mFriendship Load (0.3ms)[0m  SELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.8ms)[0m  [1mSELECT COUNT(*) FROM "friendships"[0m
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "friendships"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------
ChatsStateTest: test_delete_chat
--------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 14:03:03 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started DELETE "/chats/8" for 127.0.0.1 at 2018-12-21 14:03:03 +0800
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:03:03 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (3.1ms)
  Rendered homes/home.html.erb within layouts/application (4.7ms)
  Rendered layouts/_login_panel.html.erb (1.9ms)
  Rendered layouts/_header.html.erb (2.9ms)
  Rendered layouts/_content.html.erb (0.4ms)
Completed 200 OK in 16ms (Views: 14.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 14:03:03 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-21 14:03:03 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:03:03 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.8ms)
  Rendered homes/home.html.erb within layouts/application (2.1ms)
  Rendered layouts/_login_panel.html.erb (6.4ms)
  Rendered layouts/_header.html.erb (10.4ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 15ms (Views: 14.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 14:03:03 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-21 14:03:03 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:03:03 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.6ms)
  Rendered homes/home.html.erb within layouts/application (1.9ms)
  Rendered layouts/_login_panel.html.erb (2.8ms)
  Rendered layouts/_header.html.erb (3.6ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 8ms (Views: 7.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 14:03:03 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-21 14:03:03 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:03:03 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (4.0ms)
  Rendered homes/home.html.erb within layouts/application (4.4ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (3.7ms)
Completed 200 OK in 15ms (Views: 13.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
FriendshipStateTest: test_delete_a_friend
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 14:03:03 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/3" for 127.0.0.1 at 2018-12-21 14:03:03 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"3"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:03:03 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.5ms)
  Rendered layouts/_login_panel.html.erb (1.3ms)
  Rendered layouts/_header.html.erb (1.6ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 9ms (Views: 8.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------
FriendshipStateTest: test_test_show_information_of_friend
---------------------------------------------------------
Started GET "/users/9" for 127.0.0.1 at 2018-12-21 14:03:04 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 9]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 14:03:04 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:03:04 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (5.5ms)
  Rendered homes/home.html.erb within layouts/application (5.9ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 10ms (Views: 9.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 14:03:04 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:03:04 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.4ms)
  Rendered layouts/_login_panel.html.erb (7.7ms)
  Rendered layouts/_header.html.erb (8.2ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 18ms (Views: 17.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 14:03:04 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 14:03:04 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:03:04 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.7ms)
  Rendered homes/home.html.erb within layouts/application (2.2ms)
  Rendered layouts/_login_panel.html.erb (2.8ms)
  Rendered layouts/_header.html.erb (3.9ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 10ms (Views: 8.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.9ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (3.7ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:04:55', '2018-12-21 06:04:55', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:04:55', '2018-12-21 06:04:55', 298486374)[0m
  [1m[35mFixture Delete (1.9ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:04:55', '2018-12-21 06:04:55', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:04:55', '2018-12-21 06:04:55', 298486374)
  [1m[36mFixture Delete (3.6ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "messages" ("body", "user_id", "created_at", "updated_at", "id") VALUES ('MyText', NULL, '2018-12-21 06:04:55', '2018-12-21 06:04:55', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "created_at", "updated_at", "id") VALUES ('MyText', NULL, '2018-12-21 06:04:55', '2018-12-21 06:04:55', 298486374)[0m
  [1m[35mFixture Delete (1.2ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:04:55', '2018-12-21 06:04:55', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:04:55', '2018-12-21 06:04:55', 298486374)
  [1m[36m (2.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------
ChatsStateTest: test_delete_chat
--------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 14:04:55 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 30ms (ActiveRecord: 0.0ms)
Started DELETE "/chats/8" for 127.0.0.1 at 2018-12-21 14:04:55 +0800
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:04:55 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (19.8ms)
  Rendered homes/home.html.erb within layouts/application (39.6ms)
  Rendered layouts/_login_panel.html.erb (8.4ms)
  Rendered layouts/_header.html.erb (14.5ms)
  Rendered layouts/_content.html.erb (1.1ms)
Completed 200 OK in 140ms (Views: 139.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 14:04:56 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-21 14:04:56 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:04:56 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.6ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 14:04:56 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-21 14:04:56 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:04:56 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.5ms)
  Rendered homes/home.html.erb within layouts/application (2.4ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 8ms (Views: 5.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 14:04:56 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-21 14:04:56 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:04:56 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.9ms)
  Rendered layouts/_login_panel.html.erb (3.2ms)
  Rendered layouts/_header.html.erb (3.9ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 13ms (Views: 12.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (6.3ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$NgGOX0BYOnAioDhTOLqsXefDN52tQZF2wkBlmxIRjwdLFIYzSnt0W"], ["created_at", "2018-12-21 06:04:56.376077"], ["updated_at", "2018-12-21 06:04:56.376077"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$f58Rb2dcj9QTreZAuZSeCug8OZ71kpbPa2PXWCWXK937W.LWyuGSW"], ["created_at", "2018-12-21 06:04:57.750091"], ["updated_at", "2018-12-21 06:04:57.750091"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (1.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 14:04:57 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:04:57 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.5ms)
  Rendered layouts/_login_panel.html.erb (1.6ms)
  Rendered layouts/_header.html.erb (2.2ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 6ms (Views: 5.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "sex", "password_digest", "phonenumber", "role", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$UTu2j7Ct0aph4Wl3QDyR/uTl.aMpLdCMR.QHJAzihks08qhBbLZ02"], ["phonenumber", ""], ["role", 1], ["status", "user"], ["created_at", "2018-12-21 06:04:57.861595"], ["updated_at", "2018-12-21 06:04:57.861595"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 10ms (ActiveRecord: 1.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.8ms)[0m  DELETE FROM "chats_users" WHERE "chats_users"."user_id" = ?  [["user_id", 980190962]]
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users?new=false
Completed 302 Found in 55ms (ActiveRecord: 2.6ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"980190962"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user1@test.com') AND "users"."id" != 980190962) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  UPDATE "users" SET "name" = ?, "email" = ?, "sex" = ?, "password_digest" = ?, "phonenumber" = ?, "updated_at" = ? WHERE "users"."id" = ?  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$WtROZvK1z2Nfm5a.kvSgDuE6kw02dak1Fkik0pSjJEejCKpMbXsxK"], ["phonenumber", "123456677777"], ["updated_at", "2018-12-21 06:04:57.954713"], ["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 35ms (ActiveRecord: 1.4ms)
  [1m[35m (1.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 14:04:57 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 5ms (ActiveRecord: 0.5ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
MessagesControllerTest: test_should_destroy_message
---------------------------------------------------
  [1m[36mMessage Load (0.5ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "messages"
Processing by MessagesController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35mMessage Load (0.2ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36mChat Load (0.2ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "messages" WHERE "messages"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 500 Internal Server Error in 7512ms (ActiveRecord: 1.3ms)
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (2.0ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (1.5ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:05:21', '2018-12-21 06:05:21', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:05:21', '2018-12-21 06:05:21', 298486374)[0m
  [1m[35mFixture Delete (2.6ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:05:21', '2018-12-21 06:05:21', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:05:21', '2018-12-21 06:05:21', 298486374)
  [1m[36mFixture Delete (1.2ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "messages" ("body", "user_id", "created_at", "updated_at", "id") VALUES ('MyText', NULL, '2018-12-21 06:05:21', '2018-12-21 06:05:21', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "created_at", "updated_at", "id") VALUES ('MyText', NULL, '2018-12-21 06:05:21', '2018-12-21 06:05:21', 298486374)[0m
  [1m[35mFixture Delete (1.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:05:21', '2018-12-21 06:05:21', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:05:21', '2018-12-21 06:05:21', 298486374)
  [1m[36m (4.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.4ms)[0m  begin transaction
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 14:05:21 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 52ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:05:21 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (36.2ms)
  Rendered homes/home.html.erb within layouts/application (65.3ms)
  Rendered layouts/_login_panel.html.erb (19.7ms)
  Rendered layouts/_header.html.erb (33.5ms)
  Rendered layouts/_content.html.erb (2.4ms)
Completed 200 OK in 207ms (Views: 205.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.4ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 14:05:21 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 61ms (ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------
FriendshipStateTest: test_test_show_information_of_friend
---------------------------------------------------------
Started GET "/users/9" for 127.0.0.1 at 2018-12-21 14:05:22 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 9]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 4ms (ActiveRecord: 0.3ms)
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 14:05:22 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:05:22 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.5ms)
  Rendered homes/home.html.erb within layouts/application (3.7ms)
  Rendered layouts/_login_panel.html.erb (8.0ms)
  Rendered layouts/_header.html.erb (9.3ms)
  Rendered layouts/_content.html.erb (0.5ms)
Completed 200 OK in 37ms (Views: 23.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------
FriendshipStateTest: test_delete_a_friend
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 14:05:22 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/3" for 127.0.0.1 at 2018-12-21 14:05:22 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"3"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 17ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:05:22 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.0ms)
  Rendered homes/home.html.erb within layouts/application (2.5ms)
  Rendered layouts/_login_panel.html.erb (1.2ms)
  Rendered layouts/_header.html.erb (2.0ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 14ms (Views: 12.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 14:05:22 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-21 14:05:22 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[36mUser Load (2.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 5ms (ActiveRecord: 2.7ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:05:22 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.1ms)
  Rendered homes/home.html.erb within layouts/application (2.7ms)
  Rendered layouts/_login_panel.html.erb (1.7ms)
  Rendered layouts/_header.html.erb (2.6ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 9ms (Views: 8.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 14:05:22 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-21 14:05:22 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:05:22 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (5.0ms)
  Rendered homes/home.html.erb within layouts/application (5.6ms)
  Rendered layouts/_login_panel.html.erb (5.2ms)
  Rendered layouts/_header.html.erb (16.3ms)
  Rendered layouts/_content.html.erb (0.4ms)
Completed 200 OK in 26ms (Views: 25.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 14:05:22 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-21 14:05:22 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:05:22 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.0ms)
  Rendered homes/home.html.erb within layouts/application (7.8ms)
  Rendered layouts/_login_panel.html.erb (2.2ms)
  Rendered layouts/_header.html.erb (3.4ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 21ms (Views: 20.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------
ChatsStateTest: test_delete_chat
--------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 14:05:22 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 4ms (ActiveRecord: 0.0ms)
Started DELETE "/chats/8" for 127.0.0.1 at 2018-12-21 14:05:22 +0800
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:05:22 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (15.6ms)
  Rendered homes/home.html.erb within layouts/application (20.0ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (3.7ms)
Completed 200 OK in 30ms (Views: 28.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 14:05:22 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-21 14:05:22 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:05:22 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.5ms)
  Rendered homes/home.html.erb within layouts/application (3.1ms)
  Rendered layouts/_login_panel.html.erb (3.7ms)
  Rendered layouts/_header.html.erb (4.4ms)
  Rendered layouts/_content.html.erb (1.3ms)
Completed 200 OK in 15ms (Views: 14.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 14:05:22 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 4ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:05:22 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (5.3ms)
  Rendered homes/home.html.erb within layouts/application (7.2ms)
  Rendered layouts/_login_panel.html.erb (9.2ms)
  Rendered layouts/_header.html.erb (12.2ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 26ms (Views: 25.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 14:05:22 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 14:05:22 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:05:22 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.8ms)
  Rendered homes/home.html.erb within layouts/application (2.4ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (2.0ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 8ms (Views: 7.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$zvMIF2qE9zgTqKIJUMHbnOBaZ2xwactD/gC8KaNUR2UgfxQ6bHvca"], ["created_at", "2018-12-21 06:05:24.305048"], ["updated_at", "2018-12-21 06:05:24.305048"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$yaDhl58gXxdE67cyO4OZj.dhoVnxiFbKY2lsm.xYRADF6Y0z9UBJ2"], ["created_at", "2018-12-21 06:05:24.375142"], ["updated_at", "2018-12-21 06:05:24.375142"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-21 14:05:24 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 15ms (ActiveRecord: 0.7ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:05:24 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.8ms)
  Rendered homes/home.html.erb within layouts/application (2.4ms)
  Rendered layouts/_login_panel.html.erb (8.5ms)
  Rendered layouts/_header.html.erb (9.2ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 14ms (Views: 13.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-21 14:05:24 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.9ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 15ms (ActiveRecord: 1.4ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 14:05:24 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (19.2ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$TxkfvlNZq38D/dTPtBSju.hdXLvEUWuO721mgXTh6bcCI8cVIm85i"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-21 06:05:24.563508"], ["updated_at", "2018-12-21 06:05:24.563508"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 36ms (ActiveRecord: 20.0ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started GET "/" for 127.0.0.1 at 2018-12-21 14:05:24 +0800
Processing by HomesController#home as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  Rendered homes/home.html.erb within layouts/application (1.2ms)
  Rendered layouts/_login_panel.html.erb (1.9ms)
  Rendered layouts/_header.html.erb (3.9ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 11ms (Views: 9.3ms | ActiveRecord: 0.1ms)
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 14:05:24 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:05:24 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.6ms)
  Rendered homes/home.html.erb within layouts/application (5.3ms)
  Rendered layouts/_login_panel.html.erb (1.9ms)
  Rendered layouts/_header.html.erb (2.7ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 13ms (Views: 11.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (2.1ms)[0m  begin transaction
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "chats_users" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 980190962]]
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "users" WHERE "users"."id" = ?  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users?new=false
Completed 302 Found in 67ms (ActiveRecord: 1.8ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"980190962"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user1@test.com') AND "users"."id" != 980190962) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE "users" SET "name" = ?, "email" = ?, "sex" = ?, "password_digest" = ?, "phonenumber" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$kQEnuSEvHxVkyET0S3ieIuqWJ6yWCu7vjxOh/zQUurPZoI7ps95uS"], ["phonenumber", "123456677777"], ["updated_at", "2018-12-21 06:05:24.802158"], ["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 38ms (ActiveRecord: 1.4ms)
  [1m[36m (1.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "users" ("name", "email", "sex", "password_digest", "phonenumber", "role", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$.ZUZyAu0OLyn4iN0.w5EGut6Vd/ehlv8.q43HFnoYklb3XDAGyLLO"], ["phonenumber", ""], ["role", 1], ["status", "user"], ["created_at", "2018-12-21 06:05:24.852375"], ["updated_at", "2018-12-21 06:05:24.852375"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 14ms (ActiveRecord: 1.7ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (1.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
ChatsControllerTest: test_should_destroy_chat
---------------------------------------------
  [1m[35mChat Load (0.5ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "chats"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------
ChatsControllerTest: test_should_update_chat
--------------------------------------------
  [1m[36mChat Load (0.2ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
Processing by ChatsController#update as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}, "id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsControllerTest: test_should_create_chat
--------------------------------------------
  [1m[35mChat Load (0.5ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "chats"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.1ms)[0m  begin transaction
--------------------------------------------------------
FriendshipsControllerTest: test_should_create_friendship
--------------------------------------------------------
  [1m[36mFriendship Load (0.4ms)[0m  [1mSELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "friendships"
Processing by FriendshipsController#create as HTML
  Parameters: {"friendship"=>{"id"=>"1"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 10ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "friendships"[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------
FriendshipsControllerTest: test_should_destroy_friendship
---------------------------------------------------------
  [1m[35mFriendship Load (0.1ms)[0m  SELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "friendships"[0m
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "friendships"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.9ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (1.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:05:52', '2018-12-21 06:05:52', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:05:52', '2018-12-21 06:05:52', 298486374)[0m
  [1m[35mFixture Delete (3.7ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:05:52', '2018-12-21 06:05:52', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:05:52', '2018-12-21 06:05:52', 298486374)
  [1m[36mFixture Delete (1.1ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "messages" ("body", "user_id", "created_at", "updated_at", "id") VALUES ('MyText', NULL, '2018-12-21 06:05:52', '2018-12-21 06:05:52', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "created_at", "updated_at", "id") VALUES ('MyText', NULL, '2018-12-21 06:05:52', '2018-12-21 06:05:52', 298486374)[0m
  [1m[35mFixture Delete (1.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:05:52', '2018-12-21 06:05:52', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:05:52', '2018-12-21 06:05:52', 298486374)
  [1m[36m (1.4ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 14:05:52 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 35ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:05:52 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (29.4ms)
  Rendered homes/home.html.erb within layouts/application (48.4ms)
  Rendered layouts/_login_panel.html.erb (10.8ms)
  Rendered layouts/_header.html.erb (19.9ms)
  Rendered layouts/_content.html.erb (1.4ms)
Completed 200 OK in 127ms (Views: 125.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 14:05:52 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 14:05:52 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:05:52 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (4.6ms)
  Rendered homes/home.html.erb within layouts/application (5.3ms)
  Rendered layouts/_login_panel.html.erb (6.8ms)
  Rendered layouts/_header.html.erb (10.2ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 23ms (Views: 22.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 14:05:52 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 34ms (ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("name", "email", "sex", "password_digest", "phonenumber", "role", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$ujedFEvonMbmBKqjx6ENq.iQg77JzibiicLshTb02KG9g1kydWpnm"], ["phonenumber", ""], ["role", 1], ["status", "user"], ["created_at", "2018-12-21 06:05:53.257477"], ["updated_at", "2018-12-21 06:05:53.257477"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 86ms (ActiveRecord: 1.5ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "chats_users" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 980190962]]
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "users" WHERE "users"."id" = ?  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users?new=false
Completed 302 Found in 82ms (ActiveRecord: 1.9ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"980190962"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user1@test.com') AND "users"."id" != 980190962) LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "users" SET "name" = ?, "email" = ?, "sex" = ?, "password_digest" = ?, "phonenumber" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$pLdhwn6axQvbe.EXpaz46O1yhci66VUqUoO.nILC0z41tJUAEI7HO"], ["phonenumber", "123456677777"], ["updated_at", "2018-12-21 06:05:53.394744"], ["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 20ms (ActiveRecord: 1.2ms)
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 14:05:53 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:05:53 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.6ms)
  Rendered homes/home.html.erb within layouts/application (3.2ms)
  Rendered layouts/_login_panel.html.erb (1.5ms)
  Rendered layouts/_header.html.erb (2.2ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 11ms (Views: 10.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$EokI9SA.X5z70QzT6zPOku6owCw4Wr9kjNWgs9vFQJ7AU.aJMORuu"], ["created_at", "2018-12-21 06:05:54.737506"], ["updated_at", "2018-12-21 06:05:54.737506"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35m (2.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (1.3ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$uaTE2F6LsWIcmhS26Ey95uPmvJ8l4M3QJZTcvAT.ryab1KuHKOK8K"], ["created_at", "2018-12-21 06:05:54.774620"], ["updated_at", "2018-12-21 06:05:54.774620"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 14:05:54 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-21 14:05:54 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:05:54 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (3.8ms)
  Rendered homes/home.html.erb within layouts/application (4.4ms)
  Rendered layouts/_login_panel.html.erb (1.3ms)
  Rendered layouts/_header.html.erb (2.1ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 10ms (Views: 8.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-21 14:05:54 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[35m (1.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$YkjJ8G10GanBf0azm6umNu4cuAN1r2ICJKgZuG/t5d7JNJVrfN6Um"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-21 06:05:54.916782"], ["updated_at", "2018-12-21 06:05:54.916782"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 34ms (ActiveRecord: 3.4ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Started GET "/" for 127.0.0.1 at 2018-12-21 14:05:54 +0800
Processing by HomesController#home as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  Rendered homes/home.html.erb within layouts/application (1.0ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (2.6ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 6ms (Views: 5.2ms | ActiveRecord: 0.1ms)
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 14:05:54 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 12ms (ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-21 14:05:54 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 8ms (ActiveRecord: 0.4ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:05:54 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.5ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 5ms (Views: 4.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 14:05:55 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-21 14:05:55 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:05:55 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.2ms)
  Rendered homes/home.html.erb within layouts/application (2.7ms)
  Rendered layouts/_login_panel.html.erb (1.8ms)
  Rendered layouts/_header.html.erb (2.5ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 9ms (Views: 7.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 14:05:55 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-21 14:05:55 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:05:55 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.7ms)
  Rendered homes/home.html.erb within layouts/application (2.0ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.4ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 5.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
--------------------------------
ChatsStateTest: test_delete_chat
--------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 14:05:55 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/chats/8" for 127.0.0.1 at 2018-12-21 14:05:55 +0800
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:05:55 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.0ms)
  Rendered homes/home.html.erb within layouts/application (2.4ms)
  Rendered layouts/_login_panel.html.erb (7.3ms)
  Rendered layouts/_header.html.erb (7.8ms)
  Rendered layouts/_content.html.erb (1.9ms)
Completed 200 OK in 15ms (Views: 14.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 14:05:55 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-21 14:05:55 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:05:55 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.8ms)
  Rendered homes/home.html.erb within layouts/application (2.3ms)
  Rendered layouts/_login_panel.html.erb (1.4ms)
  Rendered layouts/_header.html.erb (2.1ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 8ms (Views: 7.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
FriendshipStateTest: test_delete_a_friend
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 14:05:55 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/3" for 127.0.0.1 at 2018-12-21 14:05:55 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"3"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:05:55 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.5ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------
FriendshipStateTest: test_test_show_information_of_friend
---------------------------------------------------------
Started GET "/users/9" for 127.0.0.1 at 2018-12-21 14:05:55 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 9]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 14:05:55 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:05:55 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.6ms)
  Rendered homes/home.html.erb within layouts/application (2.0ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.6ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 6ms (Views: 5.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------
FriendshipsControllerTest: test_should_create_friendship
--------------------------------------------------------
  [1m[35mFriendship Load (0.3ms)[0m  SELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "friendships"[0m
Processing by FriendshipsController#create as HTML
  Parameters: {"friendship"=>{"friend_id"=>"1"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "friendships"
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------
FriendshipsControllerTest: test_should_destroy_friendship
---------------------------------------------------------
  [1m[36mFriendship Load (0.2ms)[0m  [1mSELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "friendships"
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "friendships"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
ChatsControllerTest: test_should_destroy_chat
---------------------------------------------
  [1m[35mChat Load (0.2ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "chats"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsControllerTest: test_should_create_chat
--------------------------------------------
  [1m[36mChat Load (0.2ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "chats"
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsControllerTest: test_should_update_chat
--------------------------------------------
  [1m[35mChat Load (0.2ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by ChatsController#update as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}, "id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 14:05:55 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:05:55 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.7ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 6ms (Views: 5.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (1.0ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (1.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:45:20', '2018-12-21 06:45:20', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:45:20', '2018-12-21 06:45:20', 298486374)[0m
  [1m[35mFixture Delete (1.7ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:45:20', '2018-12-21 06:45:20', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:45:20', '2018-12-21 06:45:20', 298486374)
  [1m[36mFixture Delete (1.5ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "messages" ("body", "user_id", "created_at", "updated_at", "id") VALUES ('MyText', NULL, '2018-12-21 06:45:20', '2018-12-21 06:45:20', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "created_at", "updated_at", "id") VALUES ('MyText', NULL, '2018-12-21 06:45:20', '2018-12-21 06:45:20', 298486374)[0m
  [1m[35mFixture Delete (1.2ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:45:20', '2018-12-21 06:45:20', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:45:20', '2018-12-21 06:45:20', 298486374)
  [1m[36m (7.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 14:45:20 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 44ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:45:20 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (16.5ms)
  Rendered homes/home.html.erb within layouts/application (36.7ms)
  Rendered layouts/_login_panel.html.erb (7.7ms)
  Rendered layouts/_header.html.erb (14.9ms)
  Rendered layouts/_content.html.erb (1.4ms)
Completed 200 OK in 122ms (Views: 120.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------
MessagesControllerTest: test_should_create_message
--------------------------------------------------
  [1m[36mMessage Load (0.3ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "messages"
Processing by MessagesController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
MessagesControllerTest: test_should_destroy_message
---------------------------------------------------
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "messages"
Processing by MessagesController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35mMessage Load (0.0ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36mChat Load (0.2ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "messages" WHERE "messages"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 500 Internal Server Error in 60026ms (ActiveRecord: 0.8ms)
  [1m[36m (2.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------
FriendshipsControllerTest: test_should_destroy_friendship
---------------------------------------------------------
  [1m[36mFriendship Load (0.3ms)[0m  [1mSELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "friendships"
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "friendships"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------
FriendshipsControllerTest: test_should_create_friendship
--------------------------------------------------------
  [1m[35mFriendship Load (0.3ms)[0m  SELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "friendships"[0m
Processing by FriendshipsController#create as HTML
  Parameters: {"friendship"=>{"friend_id"=>"1"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "friendships"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 14:46:21 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (4.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 9ms (ActiveRecord: 4.5ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------
ChatsStateTest: test_delete_chat
--------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 14:46:21 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/chats/8" for 127.0.0.1 at 2018-12-21 14:46:21 +0800
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:46:21 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (8.1ms)
  Rendered homes/home.html.erb within layouts/application (9.0ms)
  Rendered layouts/_login_panel.html.erb (3.7ms)
  Rendered layouts/_header.html.erb (7.5ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 25ms (Views: 23.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 14:46:21 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-21 14:46:21 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:46:21 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (3.5ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (3.9ms)
Completed 200 OK in 14ms (Views: 13.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 14:46:21 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-21 14:46:21 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:46:21 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (6.1ms)
  Rendered homes/home.html.erb within layouts/application (6.5ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 24ms (Views: 23.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 14:46:21 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-21 14:46:21 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:46:21 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (4.3ms)
  Rendered homes/home.html.erb within layouts/application (11.4ms)
  Rendered layouts/_login_panel.html.erb (2.8ms)
  Rendered layouts/_header.html.erb (4.3ms)
  Rendered layouts/_content.html.erb (4.8ms)
Completed 200 OK in 31ms (Views: 30.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$SLi3bckfERe2jfaMawkgHOWq9IsVu273ZXC0CzA.lVXltji1yo4FC"], ["created_at", "2018-12-21 06:46:22.767667"], ["updated_at", "2018-12-21 06:46:22.767667"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (1.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$4cCkIXnwxuH9hsNX22vI0OakAjLkzCcRy7Nad4uPZOLIka7nLfg4u"], ["created_at", "2018-12-21 06:46:22.834204"], ["updated_at", "2018-12-21 06:46:22.834204"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 14:46:22 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:46:22 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.0ms)
  Rendered homes/home.html.erb within layouts/application (1.3ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.2ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 7ms (Views: 6.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 14:46:22 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 14:46:22 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:46:22 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.6ms)
  Rendered homes/home.html.erb within layouts/application (2.1ms)
  Rendered layouts/_login_panel.html.erb (1.6ms)
  Rendered layouts/_header.html.erb (2.1ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 7ms (Views: 6.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 14:46:22 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 11ms (ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-21 14:46:22 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 11ms (ActiveRecord: 0.6ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:46:22 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.4ms)
  Rendered homes/home.html.erb within layouts/application (1.8ms)
  Rendered layouts/_login_panel.html.erb (7.2ms)
  Rendered layouts/_header.html.erb (9.7ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 15ms (Views: 14.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 14:46:22 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$3jfS12EKnB.HAnbs4dovLeZx9KNcOYq8iq34byr6mwKx8PnBlelC6"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-21 06:46:23.001892"], ["updated_at", "2018-12-21 06:46:23.001892"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 11ms (ActiveRecord: 0.9ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started GET "/" for 127.0.0.1 at 2018-12-21 14:46:23 +0800
Processing by HomesController#home as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  Rendered homes/home.html.erb within layouts/application (2.2ms)
  Rendered layouts/_login_panel.html.erb (1.9ms)
  Rendered layouts/_header.html.erb (3.9ms)
  Rendered layouts/_content.html.erb (0.4ms)
Completed 200 OK in 14ms (Views: 11.9ms | ActiveRecord: 0.3ms)
  [1m[36m (2.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("name", "email", "sex", "password_digest", "phonenumber", "role", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$Oasew/w5ngazhNcx1gcxYOswrz0Quk/2aOQKLOt2P3YsKTZpCzjx."], ["phonenumber", ""], ["role", 1], ["status", "user"], ["created_at", "2018-12-21 06:46:23.058174"], ["updated_at", "2018-12-21 06:46:23.058174"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 11ms (ActiveRecord: 1.6ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"980190962"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user1@test.com') AND "users"."id" != 980190962) LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  UPDATE "users" SET "name" = ?, "email" = ?, "sex" = ?, "password_digest" = ?, "phonenumber" = ?, "updated_at" = ? WHERE "users"."id" = ?  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$yKS1ODxJehLg0uhEAPZ0N.6SO4g7ZvTXCngC0tIvSRlgY0s3i4TUe"], ["phonenumber", "123456677777"], ["updated_at", "2018-12-21 06:46:23.089111"], ["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 14ms (ActiveRecord: 0.9ms)
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "chats_users" WHERE "chats_users"."user_id" = ?  [["user_id", 980190962]]
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users?new=false
Completed 302 Found in 60ms (ActiveRecord: 1.7ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
-----------------------------------------
FriendshipStateTest: test_delete_a_friend
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 14:46:23 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/3" for 127.0.0.1 at 2018-12-21 14:46:23 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"3"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:46:23 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.0ms)
  Rendered homes/home.html.erb within layouts/application (1.5ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.2ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------
FriendshipStateTest: test_test_show_information_of_friend
---------------------------------------------------------
Started GET "/users/9" for 127.0.0.1 at 2018-12-21 14:46:23 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 9]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 14:46:23 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:46:23 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.6ms)
  Rendered layouts/_login_panel.html.erb (1.3ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 4.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsControllerTest: test_should_create_chat
--------------------------------------------
  [1m[35mChat Load (0.4ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "chats"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
ChatsControllerTest: test_should_destroy_chat
---------------------------------------------
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "chats"
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsControllerTest: test_should_update_chat
--------------------------------------------
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by ChatsController#update as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}, "id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 14:46:23 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:46:23 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.0ms)
  Rendered homes/home.html.erb within layouts/application (1.4ms)
  Rendered layouts/_login_panel.html.erb (6.4ms)
  Rendered layouts/_header.html.erb (6.9ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 11ms (Views: 10.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 14:46:23 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-21 14:46:23 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:46:23 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.0ms)
  Rendered homes/home.html.erb within layouts/application (1.3ms)
  Rendered layouts/_login_panel.html.erb (1.4ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (1.6ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (2.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:49:05', '2018-12-21 06:49:05', 980190962)
  [1m[36mFixture Insert (1.3ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:49:05', '2018-12-21 06:49:05', 298486374)[0m
  [1m[35mFixture Delete (1.3ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:49:05', '2018-12-21 06:49:05', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:49:05', '2018-12-21 06:49:05', 298486374)
  [1m[36mFixture Delete (1.3ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "messages" ("body", "user_id", "created_at", "updated_at", "id") VALUES ('one', NULL, '2018-12-21 06:49:05', '2018-12-21 06:49:05', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "created_at", "updated_at", "id") VALUES ('MyText', NULL, '2018-12-21 06:49:05', '2018-12-21 06:49:05', 298486374)[0m
  [1m[35mFixture Delete (1.4ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:49:05', '2018-12-21 06:49:05', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:49:05', '2018-12-21 06:49:05', 298486374)
  [1m[36m (6.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 14:49:05 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 45ms (ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------
ChatsStateTest: test_delete_chat
--------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 14:49:05 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 7ms (ActiveRecord: 0.0ms)
Started DELETE "/chats/8" for 127.0.0.1 at 2018-12-21 14:49:05 +0800
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:49:05 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (29.4ms)
  Rendered homes/home.html.erb within layouts/application (61.9ms)
  Rendered layouts/_login_panel.html.erb (15.5ms)
  Rendered layouts/_header.html.erb (23.3ms)
  Rendered layouts/_content.html.erb (3.1ms)
Completed 200 OK in 169ms (Views: 167.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 14:49:05 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-21 14:49:05 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:49:05 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.4ms)
  Rendered homes/home.html.erb within layouts/application (1.8ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 12ms (Views: 11.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 14:49:05 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-21 14:49:05 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:49:05 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (4.4ms)
  Rendered homes/home.html.erb within layouts/application (4.8ms)
  Rendered layouts/_login_panel.html.erb (2.1ms)
  Rendered layouts/_header.html.erb (2.7ms)
  Rendered layouts/_content.html.erb (4.3ms)
Completed 200 OK in 14ms (Views: 13.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mbegin transaction[0m
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 14:49:06 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-21 14:49:06 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:49:06 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.3ms)
  Rendered homes/home.html.erb within layouts/application (1.6ms)
  Rendered layouts/_login_panel.html.erb (1.6ms)
  Rendered layouts/_header.html.erb (2.2ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 6ms (Views: 5.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 14:49:06 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:49:06 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (3.7ms)
  Rendered homes/home.html.erb within layouts/application (5.6ms)
  Rendered layouts/_login_panel.html.erb (4.1ms)
  Rendered layouts/_header.html.erb (5.3ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 22ms (Views: 20.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 14:49:06 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:49:06 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.3ms)
  Rendered homes/home.html.erb within layouts/application (2.7ms)
  Rendered layouts/_login_panel.html.erb (1.3ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 7ms (Views: 6.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------
FriendshipsControllerTest: test_should_create_friendship
--------------------------------------------------------
  [1m[35mFriendship Load (0.3ms)[0m  SELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "friendships"[0m
Processing by FriendshipsController#create as HTML
  Parameters: {"friendship"=>{"friend_id"=>"1"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "friendships"
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------
FriendshipsControllerTest: test_should_destroy_friendship
---------------------------------------------------------
  [1m[36mFriendship Load (0.2ms)[0m  [1mSELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "friendships"
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "friendships"[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
MessagesControllerTest: test_should_create_message
--------------------------------------------------
  [1m[35mMessage Load (0.3ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "messages"[0m
Processing by MessagesController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
MessagesControllerTest: test_should_destroy_message
---------------------------------------------------
  [1m[35mMessage Load (1.3ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "messages"[0m
Processing by MessagesController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mMessage Load (0.2ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35mChat Load (0.2ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "messages" WHERE "messages"."id" = ?  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 46651ms (ActiveRecord: 1.4ms)
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (1.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:50:00', '2018-12-21 06:50:00', 980190962)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:50:00', '2018-12-21 06:50:00', 298486374)[0m
  [1m[35mFixture Delete (1.9ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:50:00', '2018-12-21 06:50:00', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:50:00', '2018-12-21 06:50:00', 298486374)
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "messages" ("body", "user_id", "created_at", "updated_at", "id") VALUES ('one', NULL, '2018-12-21 06:50:00', '2018-12-21 06:50:00', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "created_at", "updated_at", "id") VALUES ('MyText', NULL, '2018-12-21 06:50:00', '2018-12-21 06:50:00', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:50:00', '2018-12-21 06:50:00', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:50:00', '2018-12-21 06:50:00', 298486374)
  [1m[36m (10.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------
FriendshipsControllerTest: test_should_create_friendship
--------------------------------------------------------
  [1m[36mFriendship Load (0.6ms)[0m  [1mSELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "friendships"
Processing by FriendshipsController#create as HTML
  Parameters: {"friendship"=>{"friend_id"=>"1"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 23ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "friendships"[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------
FriendshipsControllerTest: test_should_destroy_friendship
---------------------------------------------------------
  [1m[35mFriendship Load (0.2ms)[0m  SELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "friendships"[0m
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "friendships"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
ChatsControllerTest: test_should_destroy_chat
---------------------------------------------
  [1m[36mChat Load (0.3ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "chats"
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsControllerTest: test_should_update_chat
--------------------------------------------
  [1m[35mChat Load (0.2ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by ChatsController#update as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}, "id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------
ChatsControllerTest: test_should_create_chat
--------------------------------------------
  [1m[36mChat Load (0.2ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "chats"
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 14:50:01 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 22ms (ActiveRecord: 0.4ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-21 14:50:01 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:50:01 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (14.0ms)
  Rendered homes/home.html.erb within layouts/application (33.8ms)
  Rendered layouts/_login_panel.html.erb (11.1ms)
  Rendered layouts/_header.html.erb (17.7ms)
  Rendered layouts/_content.html.erb (1.2ms)
Completed 200 OK in 104ms (Views: 102.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$U651w16ZmrCten866dBSX.ZdgR7wx1LXjt9S0ooj3sks5zrRI8Imq"], ["created_at", "2018-12-21 06:50:02.331820"], ["updated_at", "2018-12-21 06:50:02.331820"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (1.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$0gfFRaOsH8aYzI.I6g3.PezXzTr0W.RmAxulgQmNevll3IFDvHXRu"], ["created_at", "2018-12-21 06:50:02.346987"], ["updated_at", "2018-12-21 06:50:02.346987"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35m (1.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (3.8ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 14:50:02 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:50:02 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.6ms)
  Rendered homes/home.html.erb within layouts/application (4.2ms)
  Rendered layouts/_login_panel.html.erb (1.7ms)
  Rendered layouts/_header.html.erb (5.4ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 14ms (Views: 13.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-21 14:50:02 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 12ms (ActiveRecord: 0.4ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:50:02 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.5ms)
  Rendered homes/home.html.erb within layouts/application (2.1ms)
  Rendered layouts/_login_panel.html.erb (1.3ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 7ms (Views: 5.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-21 14:50:02 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 9ms (ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 14:50:02 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$a/wY/szATLJwcm1iwsO1vObchhN6YpW3lfICSqAA/m/ek2d.05U4W"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-21 06:50:02.534898"], ["updated_at", "2018-12-21 06:50:02.534898"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 13ms (ActiveRecord: 1.2ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started GET "/" for 127.0.0.1 at 2018-12-21 14:50:02 +0800
Processing by HomesController#home as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  Rendered homes/home.html.erb within layouts/application (0.5ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (2.3ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 5ms (Views: 4.5ms | ActiveRecord: 0.1ms)
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 14:50:02 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:50:02 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.5ms)
  Rendered homes/home.html.erb within layouts/application (3.2ms)
  Rendered layouts/_login_panel.html.erb (1.4ms)
  Rendered layouts/_header.html.erb (2.6ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 9ms (Views: 8.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 14:50:02 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-21 14:50:02 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:50:02 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.4ms)
  Rendered homes/home.html.erb within layouts/application (1.8ms)
  Rendered layouts/_login_panel.html.erb (2.6ms)
  Rendered layouts/_header.html.erb (3.3ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 8ms (Views: 7.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------
ChatsStateTest: test_delete_chat
--------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 14:50:02 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/chats/8" for 127.0.0.1 at 2018-12-21 14:50:02 +0800
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:50:02 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.4ms)
  Rendered layouts/_login_panel.html.erb (1.2ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 6ms (Views: 5.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 14:50:02 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-21 14:50:02 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:50:02 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.4ms)
  Rendered homes/home.html.erb within layouts/application (1.7ms)
  Rendered layouts/_login_panel.html.erb (3.3ms)
  Rendered layouts/_header.html.erb (4.0ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 8ms (Views: 7.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 14:50:02 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-21 14:50:02 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:50:02 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.7ms)
  Rendered homes/home.html.erb within layouts/application (2.5ms)
  Rendered layouts/_login_panel.html.erb (1.5ms)
  Rendered layouts/_header.html.erb (2.1ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 9ms (Views: 7.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
FriendshipStateTest: test_delete_a_friend
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 14:50:02 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/3" for 127.0.0.1 at 2018-12-21 14:50:02 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"3"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:50:02 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.7ms)
  Rendered homes/home.html.erb within layouts/application (2.1ms)
  Rendered layouts/_login_panel.html.erb (1.8ms)
  Rendered layouts/_header.html.erb (2.4ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 12ms (Views: 11.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------
FriendshipStateTest: test_test_show_information_of_friend
---------------------------------------------------------
Started GET "/users/9" for 127.0.0.1 at 2018-12-21 14:50:02 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 9]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.3ms)
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 14:50:02 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:50:02 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.0ms)
  Rendered homes/home.html.erb within layouts/application (2.7ms)
  Rendered layouts/_login_panel.html.erb (1.4ms)
  Rendered layouts/_header.html.erb (2.4ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 9ms (Views: 7.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 14:50:02 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:50:02 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.0ms)
  Rendered homes/home.html.erb within layouts/application (2.5ms)
  Rendered layouts/_login_panel.html.erb (3.6ms)
  Rendered layouts/_header.html.erb (4.8ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 11ms (Views: 9.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 14:50:02 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 14:50:02 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:50:02 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.7ms)
  Rendered homes/home.html.erb within layouts/application (3.2ms)
  Rendered layouts/_login_panel.html.erb (2.4ms)
  Rendered layouts/_header.html.erb (3.4ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 10ms (Views: 9.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("name", "email", "sex", "password_digest", "phonenumber", "role", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$SzrlKpD8SjzM3XlCT0Xn3u1O2kllaUgUnRNLH7O8fpmH3NprwDZr6"], ["phonenumber", ""], ["role", 1], ["status", "user"], ["created_at", "2018-12-21 06:50:02.853583"], ["updated_at", "2018-12-21 06:50:02.853583"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 19ms (ActiveRecord: 1.3ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "chats_users" WHERE "chats_users"."user_id" = ?  [["user_id", 980190962]]
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users?new=false
Completed 302 Found in 47ms (ActiveRecord: 0.9ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (3.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"980190962"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user1@test.com') AND "users"."id" != 980190962) LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m  UPDATE "users" SET "name" = ?, "email" = ?, "sex" = ?, "password_digest" = ?, "phonenumber" = ?, "updated_at" = ? WHERE "users"."id" = ?  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$XTMTiS2huwVbZDrggWIWEu0TWHu2FbETb4pTNjsgz/uG34IjX6CyC"], ["phonenumber", "123456677777"], ["updated_at", "2018-12-21 06:50:02.952049"], ["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 16ms (ActiveRecord: 1.6ms)
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
MessagesControllerTest: test_should_create_message
--------------------------------------------------
  [1m[35mMessage Load (0.5ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "messages"[0m
Processing by MessagesController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
MessagesControllerTest: test_should_destroy_message
---------------------------------------------------
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "messages"[0m
Processing by MessagesController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mMessage Load (0.2ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36mMessage Load (0.3ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35mChat Load (0.3ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "messages" WHERE "messages"."id" = ?  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 60021ms (ActiveRecord: 1.7ms)
  [1m[35m (2.3ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 14:51:03 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (1.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 6ms (ActiveRecord: 1.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (2.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (3.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.8ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:55:05', '2018-12-21 06:55:05', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:55:05', '2018-12-21 06:55:05', 298486374)[0m
  [1m[35mFixture Delete (1.4ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:55:05', '2018-12-21 06:55:05', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:55:05', '2018-12-21 06:55:05', 298486374)
  [1m[36mFixture Delete (2.0ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "messages" ("body", "user_id", "created_at", "updated_at", "id") VALUES ('one', NULL, '2018-12-21 06:55:05', '2018-12-21 06:55:05', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "created_at", "updated_at", "id") VALUES ('MyText', NULL, '2018-12-21 06:55:05', '2018-12-21 06:55:05', 298486374)[0m
  [1m[35mFixture Delete (1.3ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:55:05', '2018-12-21 06:55:05', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:55:05', '2018-12-21 06:55:05', 298486374)
  [1m[36m (1.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 14:55:05 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 44ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:55:05 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (21.9ms)
  Rendered homes/home.html.erb within layouts/application (41.0ms)
  Rendered layouts/_login_panel.html.erb (9.9ms)
  Rendered layouts/_header.html.erb (19.4ms)
  Rendered layouts/_content.html.erb (1.4ms)
Completed 200 OK in 113ms (Views: 111.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 14:55:05 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 17ms (ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 14:55:05 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:55:05 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.3ms)
  Rendered homes/home.html.erb within layouts/application (1.8ms)
  Rendered layouts/_login_panel.html.erb (2.6ms)
  Rendered layouts/_header.html.erb (4.4ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 11ms (Views: 10.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 14:55:05 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.9ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 4ms (ActiveRecord: 0.9ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-21 14:55:05 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:55:05 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.5ms)
  Rendered homes/home.html.erb within layouts/application (2.5ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 7ms (Views: 6.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-21 14:55:05 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 1411ms (ActiveRecord: 0.4ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:55:07 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.5ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.1ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 5ms (Views: 4.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-21 14:55:07 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 11ms (ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 14:55:07 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$hCkHkPfbnMExe2OuFWyfR.OAEeToRXcK4A9/mpeX285B8I8WHH5sK"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-21 06:55:07.106283"], ["updated_at", "2018-12-21 06:55:07.106283"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 8ms (ActiveRecord: 0.7ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started GET "/" for 127.0.0.1 at 2018-12-21 14:55:07 +0800
Processing by HomesController#home as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  Rendered homes/home.html.erb within layouts/application (1.3ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (4.4ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 9ms (Views: 8.2ms | ActiveRecord: 0.1ms)
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$EqCCx4RwgBGMaRmWlhh0T.akS4/lL4Dw55BqPmRqcVJ9Zyzhys5p6"], ["created_at", "2018-12-21 06:55:07.143888"], ["updated_at", "2018-12-21 06:55:07.143888"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (1.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$mBkMPR2ZZZc7w1bCOjCOW.JhTTGXT27osvQbSxZCCvDjrzdYVaB2G"], ["created_at", "2018-12-21 06:55:07.226810"], ["updated_at", "2018-12-21 06:55:07.226810"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
FriendshipStateTest: test_delete_a_friend
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 14:55:07 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/3" for 127.0.0.1 at 2018-12-21 14:55:07 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"3"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:55:07 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.5ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.6ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 5.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------
FriendshipStateTest: test_test_show_information_of_friend
---------------------------------------------------------
Started GET "/users/9" for 127.0.0.1 at 2018-12-21 14:55:07 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 9]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 4ms (ActiveRecord: 0.5ms)
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 14:55:07 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:55:07 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (4.8ms)
  Rendered homes/home.html.erb within layouts/application (5.4ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 10ms (Views: 9.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"980190962"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.6ms)[0m  SELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user1@test.com') AND "users"."id" != 980190962) LIMIT 1
  [1m[36mSQL (1.3ms)[0m  [1mUPDATE "users" SET "name" = ?, "email" = ?, "sex" = ?, "password_digest" = ?, "phonenumber" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$jFem3olFXGw.Q2w6S12qtekUMbjqdd89NPARubrNEnGkQ2Jznr4dS"], ["phonenumber", "123456677777"], ["updated_at", "2018-12-21 06:55:07.342058"], ["id", 980190962]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 26ms (ActiveRecord: 3.3ms)
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.5ms)[0m  [1mDELETE FROM "chats_users" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 980190962]]
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "users" WHERE "users"."id" = ?  [["id", 980190962]]
  [1m[36m (0.7ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users?new=false
Completed 302 Found in 71ms (ActiveRecord: 4.1ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "sex", "password_digest", "phonenumber", "role", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$geH0RLkCYMymRto7z0ZVVeTdKiO.pRehfUrM8.cspAXwweyWMIUey"], ["phonenumber", ""], ["role", 1], ["status", "user"], ["created_at", "2018-12-21 06:55:07.458046"], ["updated_at", "2018-12-21 06:55:07.458046"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 14ms (ActiveRecord: 0.9ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 14:55:07 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:55:07 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.7ms)
  Rendered homes/home.html.erb within layouts/application (3.3ms)
  Rendered layouts/_login_panel.html.erb (1.6ms)
  Rendered layouts/_header.html.erb (2.5ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 10ms (Views: 9.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 14:55:07 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 14:55:07 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:55:07 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.5ms)
  Rendered layouts/_login_panel.html.erb (1.9ms)
  Rendered layouts/_header.html.erb (2.8ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 7ms (Views: 6.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
MessagesControllerTest: test_should_destroy_message
---------------------------------------------------
  [1m[35mMessage Load (0.4ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.9ms)[0m  [1mSELECT COUNT(*) FROM "messages"[0m
Processing by MessagesController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mMessage Load (0.2ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35mChat Load (0.6ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  DELETE FROM "messages" WHERE "messages"."id" = ?  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 28297ms (ActiveRecord: 2.7ms)
  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (1.5ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (1.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:55:56', '2018-12-21 06:55:56', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:55:56', '2018-12-21 06:55:56', 298486374)[0m
  [1m[35mFixture Delete (2.0ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:55:56', '2018-12-21 06:55:56', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:55:56', '2018-12-21 06:55:56', 298486374)
  [1m[36mFixture Delete (3.8ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "messages" ("body", "user_id", "created_at", "updated_at", "id") VALUES ('one', NULL, '2018-12-21 06:55:56', '2018-12-21 06:55:56', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "created_at", "updated_at", "id") VALUES ('MyText', NULL, '2018-12-21 06:55:56', '2018-12-21 06:55:56', 298486374)[0m
  [1m[35mFixture Delete (1.3ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:55:56', '2018-12-21 06:55:56', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:55:56', '2018-12-21 06:55:56', 298486374)
  [1m[36m (4.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$Ks.CSxILa1KsqLOK3/PZaOq9xeExylEwsIX6rMUZgS80tCA14M7u."], ["created_at", "2018-12-21 06:55:57.732417"], ["updated_at", "2018-12-21 06:55:57.732417"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.4ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$9epTLTXM.ZyJoOmFxS1DLOaaaT9N2S35xCs/JiscPPJ9kuncYKSQS"], ["created_at", "2018-12-21 06:55:57.855797"], ["updated_at", "2018-12-21 06:55:57.855797"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 14:55:57 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 32ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:55:58 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (16.9ms)
  Rendered homes/home.html.erb within layouts/application (38.8ms)
  Rendered layouts/_login_panel.html.erb (8.3ms)
  Rendered layouts/_header.html.erb (18.7ms)
  Rendered layouts/_content.html.erb (7.8ms)
Completed 200 OK in 131ms (Views: 129.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.5ms)[0m  begin transaction
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 14:55:58 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-21 14:55:58 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:55:58 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.9ms)
  Rendered homes/home.html.erb within layouts/application (2.4ms)
  Rendered layouts/_login_panel.html.erb (2.2ms)
  Rendered layouts/_header.html.erb (3.1ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 9ms (Views: 8.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
--------------------------------
ChatsStateTest: test_delete_chat
--------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 14:55:58 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/chats/8" for 127.0.0.1 at 2018-12-21 14:55:58 +0800
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:55:58 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (5.9ms)
  Rendered homes/home.html.erb within layouts/application (6.8ms)
  Rendered layouts/_login_panel.html.erb (3.2ms)
  Rendered layouts/_header.html.erb (5.4ms)
  Rendered layouts/_content.html.erb (2.8ms)
Completed 200 OK in 22ms (Views: 21.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 14:55:58 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-21 14:55:58 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:55:58 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (10.9ms)
  Rendered homes/home.html.erb within layouts/application (11.5ms)
  Rendered layouts/_login_panel.html.erb (3.2ms)
  Rendered layouts/_header.html.erb (5.9ms)
  Rendered layouts/_content.html.erb (3.7ms)
Completed 200 OK in 31ms (Views: 29.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 14:55:58 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-21 14:55:58 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 6ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:55:58 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.4ms)
  Rendered homes/home.html.erb within layouts/application (3.0ms)
  Rendered layouts/_login_panel.html.erb (2.8ms)
  Rendered layouts/_header.html.erb (5.1ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 14ms (Views: 13.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 14:55:58 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 6ms (ActiveRecord: 0.1ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-21 14:55:58 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:55:58 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.9ms)
  Rendered homes/home.html.erb within layouts/application (2.5ms)
  Rendered layouts/_login_panel.html.erb (1.7ms)
  Rendered layouts/_header.html.erb (2.5ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 8ms (Views: 7.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsControllerTest: test_should_create_chat
--------------------------------------------
  [1m[36mChat Load (0.4ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "chats"
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
---------------------------------------------
ChatsControllerTest: test_should_destroy_chat
---------------------------------------------
  [1m[35mChat Load (0.2ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "chats"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsControllerTest: test_should_update_chat
--------------------------------------------
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
Processing by ChatsController#update as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}, "id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.5ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 14:55:58 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:55:58 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.9ms)
  Rendered homes/home.html.erb within layouts/application (2.5ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.4ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 7ms (Views: 6.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------
FriendshipsControllerTest: test_should_destroy_friendship
---------------------------------------------------------
  [1m[35mFriendship Load (0.4ms)[0m  SELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "friendships"[0m
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "friendships"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------
FriendshipsControllerTest: test_should_create_friendship
--------------------------------------------------------
  [1m[36mFriendship Load (0.5ms)[0m  [1mSELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "friendships"
Processing by FriendshipsController#create as HTML
  Parameters: {"friendship"=>{"friend_id"=>"1"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "friendships"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 14:55:58 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 14:55:58 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:55:58 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.2ms)
  Rendered homes/home.html.erb within layouts/application (3.2ms)
  Rendered layouts/_login_panel.html.erb (1.3ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 13ms (Views: 10.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 14:55:58 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 14:55:58 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:55:58 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.6ms)
  Rendered homes/home.html.erb within layouts/application (2.0ms)
  Rendered layouts/_login_panel.html.erb (1.7ms)
  Rendered layouts/_header.html.erb (2.6ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 8ms (Views: 7.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "chats_users" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 980190962]]
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "users" WHERE "users"."id" = ?  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users?new=false
Completed 302 Found in 79ms (ActiveRecord: 1.7ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"980190962"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user1@test.com') AND "users"."id" != 980190962) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE "users" SET "name" = ?, "email" = ?, "sex" = ?, "password_digest" = ?, "phonenumber" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$fowehH8an0edf3BOumj78OONjthpcZ4Qhke4fbx/1zyBVX8Uz5fuq"], ["phonenumber", "123456677777"], ["updated_at", "2018-12-21 06:55:58.922640"], ["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 20ms (ActiveRecord: 1.7ms)
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("name", "email", "sex", "password_digest", "phonenumber", "role", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$Y7DVwXjn2PIn9uqz6gpiJ.aabiwsPrtHCpqy5hdtK.ssR9WZ3/o1y"], ["phonenumber", ""], ["role", 1], ["status", "user"], ["created_at", "2018-12-21 06:55:58.956065"], ["updated_at", "2018-12-21 06:55:58.956065"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 18ms (ActiveRecord: 1.6ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------
FriendshipStateTest: test_delete_a_friend
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 14:55:58 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/3" for 127.0.0.1 at 2018-12-21 14:55:58 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"3"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:55:58 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.9ms)
  Rendered homes/home.html.erb within layouts/application (2.4ms)
  Rendered layouts/_login_panel.html.erb (4.4ms)
  Rendered layouts/_header.html.erb (5.6ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 16ms (Views: 15.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------
FriendshipStateTest: test_test_show_information_of_friend
---------------------------------------------------------
Started GET "/users/9" for 127.0.0.1 at 2018-12-21 14:55:59 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 9]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 14:55:59 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:55:59 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.3ms)
  Rendered homes/home.html.erb within layouts/application (1.8ms)
  Rendered layouts/_login_panel.html.erb (1.9ms)
  Rendered layouts/_header.html.erb (2.5ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 7ms (Views: 6.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 14:55:59 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 26ms (ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-21 14:55:59 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 14ms (ActiveRecord: 0.4ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:55:59 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.3ms)
  Rendered homes/home.html.erb within layouts/application (1.9ms)
  Rendered layouts/_login_panel.html.erb (1.5ms)
  Rendered layouts/_header.html.erb (2.2ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 7ms (Views: 6.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 14:55:59 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$xH.V/tTgCf2lyB4PfVGz9.g1jOFrO8k6tCyf98WckdbWBuT9MK1JC"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-21 06:55:59.173941"], ["updated_at", "2018-12-21 06:55:59.173941"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 12ms (ActiveRecord: 0.9ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started GET "/" for 127.0.0.1 at 2018-12-21 14:55:59 +0800
Processing by HomesController#home as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  Rendered homes/home.html.erb within layouts/application (1.2ms)
  Rendered layouts/_login_panel.html.erb (2.1ms)
  Rendered layouts/_header.html.erb (4.4ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 9ms (Views: 8.3ms | ActiveRecord: 0.1ms)
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.9ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (1.7ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:57:53', '2018-12-21 06:57:53', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:57:53', '2018-12-21 06:57:53', 298486374)[0m
  [1m[35mFixture Delete (1.9ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:57:53', '2018-12-21 06:57:53', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:57:53', '2018-12-21 06:57:53', 298486374)
  [1m[36mFixture Delete (4.2ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:57:53', '2018-12-21 06:57:53', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:57:53', '2018-12-21 06:57:53', 298486374)[0m
  [1m[35mFixture Delete (4.0ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:57:53', '2018-12-21 06:57:53', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 06:57:53', '2018-12-21 06:57:53', 298486374)
  [1m[36m (1.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------
MessagesControllerTest: test_should_create_message
--------------------------------------------------
  [1m[36mMessage Load (0.3ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "messages"
Processing by MessagesController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Completed 500 Internal Server Error in 21ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
MessagesControllerTest: test_should_destroy_message
---------------------------------------------------
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "messages"
Processing by MessagesController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36mChat Load (0.2ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" IS NULL LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "messages" WHERE "messages"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 500 Internal Server Error in 60031ms (ActiveRecord: 0.9ms)
  [1m[36m (2.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$EcGfVBuZgPj1IBQUwV6B9eXxay1AUA3b4Q5Btixisr2MASGlaXNLS"], ["created_at", "2018-12-21 06:58:55.706490"], ["updated_at", "2018-12-21 06:58:55.706490"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$PyMlZvsY1lRAKjDa41twu.Z26PwPWr1tJs2cp386yCidqTQK0Thui"], ["created_at", "2018-12-21 06:58:55.756426"], ["updated_at", "2018-12-21 06:58:55.756426"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 14:58:55 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 21ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:58:55 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (23.1ms)
  Rendered homes/home.html.erb within layouts/application (47.5ms)
  Rendered layouts/_login_panel.html.erb (12.7ms)
  Rendered layouts/_header.html.erb (17.3ms)
  Rendered layouts/_content.html.erb (1.2ms)
Completed 200 OK in 187ms (Views: 185.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
--------------------------------------------
ChatsControllerTest: test_should_create_chat
--------------------------------------------
  [1m[36mChat Load (0.3ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "chats"
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
ChatsControllerTest: test_should_destroy_chat
---------------------------------------------
  [1m[35mChat Load (0.2ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "chats"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsControllerTest: test_should_update_chat
--------------------------------------------
  [1m[36mChat Load (0.4ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
Processing by ChatsController#update as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}, "id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
FriendshipStateTest: test_delete_a_friend
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 14:58:56 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/3" for 127.0.0.1 at 2018-12-21 14:58:56 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"3"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:58:56 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.8ms)
  Rendered homes/home.html.erb within layouts/application (3.4ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (3.0ms)
Completed 200 OK in 11ms (Views: 10.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------
FriendshipStateTest: test_test_show_information_of_friend
---------------------------------------------------------
Started GET "/users/9" for 127.0.0.1 at 2018-12-21 14:58:56 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 9]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.1ms)
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 14:58:56 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:58:56 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.0ms)
  Rendered homes/home.html.erb within layouts/application (2.6ms)
  Rendered layouts/_login_panel.html.erb (2.4ms)
  Rendered layouts/_header.html.erb (3.6ms)
  Rendered layouts/_content.html.erb (0.7ms)
Completed 200 OK in 12ms (Views: 11.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 14:58:56 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:58:56 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.8ms)
  Rendered layouts/_login_panel.html.erb (4.8ms)
  Rendered layouts/_header.html.erb (6.9ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 15ms (Views: 13.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 14:58:56 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 14:58:56 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:58:56 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.5ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.6ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 6ms (Views: 5.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------
FriendshipsControllerTest: test_should_destroy_friendship
---------------------------------------------------------
  [1m[35mFriendship Load (0.4ms)[0m  SELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "friendships"[0m
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "friendships"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------
FriendshipsControllerTest: test_should_create_friendship
--------------------------------------------------------
  [1m[36mFriendship Load (0.1ms)[0m  [1mSELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "friendships"
Processing by FriendshipsController#create as HTML
  Parameters: {"friendship"=>{"friend_id"=>"1"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "friendships"[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 14:58:56 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 6ms (ActiveRecord: 0.5ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-21 14:58:56 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:58:56 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (4.8ms)
  Rendered homes/home.html.erb within layouts/application (5.7ms)
  Rendered layouts/_login_panel.html.erb (1.4ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 10ms (Views: 9.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 14:58:56 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:58:56 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.8ms)
  Rendered homes/home.html.erb within layouts/application (4.2ms)
  Rendered layouts/_login_panel.html.erb (2.6ms)
  Rendered layouts/_header.html.erb (3.4ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 16ms (Views: 11.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("name", "email", "sex", "password_digest", "phonenumber", "role", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$VOhMnN5VuHTAfVifADeaC.pINl23eDvqmwv2IJVsESaPnOH67phnm"], ["phonenumber", ""], ["role", 1], ["status", "user"], ["created_at", "2018-12-21 06:58:56.563696"], ["updated_at", "2018-12-21 06:58:56.563696"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 25ms (ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "chats_users" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 980190962]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "users" WHERE "users"."id" = ?  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users?new=false
Completed 302 Found in 62ms (ActiveRecord: 1.4ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"980190962"}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user1@test.com') AND "users"."id" != 980190962) LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "users" SET "name" = ?, "email" = ?, "sex" = ?, "password_digest" = ?, "phonenumber" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$hmwDMveDB7uFV/hs3bWGNOy84YIdrS0xFweIf4ztr9BK7UeGBGjzO"], ["phonenumber", "123456677777"], ["updated_at", "2018-12-21 06:58:56.664106"], ["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 16ms (ActiveRecord: 1.6ms)
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 14:58:56 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 14ms (ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 14:58:56 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-21 14:58:56 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:58:56 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.6ms)
  Rendered layouts/_login_panel.html.erb (2.0ms)
  Rendered layouts/_header.html.erb (2.9ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 7ms (Views: 6.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------
ChatsStateTest: test_delete_chat
--------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 14:58:56 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started DELETE "/chats/8" for 127.0.0.1 at 2018-12-21 14:58:56 +0800
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:58:56 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.4ms)
  Rendered homes/home.html.erb within layouts/application (3.6ms)
  Rendered layouts/_login_panel.html.erb (1.6ms)
  Rendered layouts/_header.html.erb (2.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 10ms (Views: 9.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 14:58:56 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-21 14:58:56 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:58:56 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.6ms)
  Rendered homes/home.html.erb within layouts/application (2.1ms)
  Rendered layouts/_login_panel.html.erb (1.7ms)
  Rendered layouts/_header.html.erb (2.5ms)
  Rendered layouts/_content.html.erb (0.4ms)
Completed 200 OK in 8ms (Views: 7.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 14:58:56 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-21 14:58:56 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:58:56 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.5ms)
  Rendered layouts/_login_panel.html.erb (3.6ms)
  Rendered layouts/_header.html.erb (4.2ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 9ms (Views: 7.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 14:58:56 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 20ms (ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-21 14:58:56 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 8ms (ActiveRecord: 0.4ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 14:58:56 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.7ms)
  Rendered homes/home.html.erb within layouts/application (2.2ms)
  Rendered layouts/_login_panel.html.erb (1.5ms)
  Rendered layouts/_header.html.erb (2.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 10ms (Views: 7.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 14:58:56 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[36m (1.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$KThuDXTLj2YuPw6yeIvI/OJOiajF.TWu3Zm9FNDtn2l7QnJVeBShS"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-21 06:58:56.976417"], ["updated_at", "2018-12-21 06:58:56.976417"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 14ms (ActiveRecord: 2.1ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started GET "/" for 127.0.0.1 at 2018-12-21 14:58:56 +0800
Processing by HomesController#home as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  Rendered homes/home.html.erb within layouts/application (1.4ms)
  Rendered layouts/_login_panel.html.erb (1.8ms)
  Rendered layouts/_header.html.erb (3.1ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 10ms (Views: 8.8ms | ActiveRecord: 0.2ms)
  [1m[36m (2.9ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (2.6ms)[0m  begin transaction
  [1m[36mFixture Delete (2.2ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (2.0ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 07:04:03', '2018-12-21 07:04:03', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 07:04:03', '2018-12-21 07:04:03', 298486374)[0m
  [1m[35mFixture Delete (2.7ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 07:04:03', '2018-12-21 07:04:03', 980190962)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 07:04:03', '2018-12-21 07:04:03', 298486374)
  [1m[36mFixture Delete (3.4ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 07:04:03', '2018-12-21 07:04:03', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 07:04:03', '2018-12-21 07:04:03', 298486374)[0m
  [1m[35mFixture Delete (7.3ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 07:04:03', '2018-12-21 07:04:03', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 07:04:03', '2018-12-21 07:04:03', 298486374)
  [1m[36m (29.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------------------
FriendshipsControllerTest: test_should_create_friendship
--------------------------------------------------------
  [1m[36mFriendship Load (0.3ms)[0m  [1mSELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "friendships"
Processing by FriendshipsController#create as HTML
  Parameters: {"friendship"=>{"friend_id"=>"1"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 20ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "friendships"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------
FriendshipsControllerTest: test_should_destroy_friendship
---------------------------------------------------------
  [1m[35mFriendship Load (0.2ms)[0m  SELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "friendships"[0m
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "friendships"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 15:04:04 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 16ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-21 15:04:04 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:04:04 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (24.3ms)
  Rendered homes/home.html.erb within layouts/application (61.5ms)
  Rendered layouts/_login_panel.html.erb (15.4ms)
  Rendered layouts/_header.html.erb (26.2ms)
  Rendered layouts/_content.html.erb (2.5ms)
Completed 200 OK in 186ms (Views: 185.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 15:04:04 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-21 15:04:04 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:04:04 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.6ms)
  Rendered homes/home.html.erb within layouts/application (2.9ms)
  Rendered layouts/_login_panel.html.erb (1.4ms)
  Rendered layouts/_header.html.erb (2.2ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 13ms (Views: 11.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.4ms)[0m  begin transaction
--------------------------------
ChatsStateTest: test_delete_chat
--------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 15:04:04 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started DELETE "/chats/8" for 127.0.0.1 at 2018-12-21 15:04:04 +0800
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:04:04 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.6ms)
  Rendered homes/home.html.erb within layouts/application (2.0ms)
  Rendered layouts/_login_panel.html.erb (6.6ms)
  Rendered layouts/_header.html.erb (7.5ms)
  Rendered layouts/_content.html.erb (0.4ms)
Completed 200 OK in 16ms (Views: 15.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 15:04:04 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 5ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-21 15:04:04 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:04:04 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.8ms)
  Rendered homes/home.html.erb within layouts/application (3.5ms)
  Rendered layouts/_login_panel.html.erb (3.6ms)
  Rendered layouts/_header.html.erb (4.3ms)
  Rendered layouts/_content.html.erb (1.8ms)
Completed 200 OK in 20ms (Views: 18.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
FriendshipStateTest: test_delete_a_friend
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 15:04:04 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 4ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/3" for 127.0.0.1 at 2018-12-21 15:04:04 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"3"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:04:04 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (5.4ms)
  Rendered homes/home.html.erb within layouts/application (5.9ms)
  Rendered layouts/_login_panel.html.erb (1.5ms)
  Rendered layouts/_header.html.erb (2.1ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 17ms (Views: 16.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------
FriendshipStateTest: test_test_show_information_of_friend
---------------------------------------------------------
Started GET "/users/9" for 127.0.0.1 at 2018-12-21 15:04:04 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 9]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 15ms (ActiveRecord: 0.3ms)
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 15:04:04 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.3ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:04:04 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.3ms)
  Rendered homes/home.html.erb within layouts/application (1.6ms)
  Rendered layouts/_login_panel.html.erb (1.4ms)
  Rendered layouts/_header.html.erb (2.1ms)
  Rendered layouts/_content.html.erb (0.5ms)
Completed 200 OK in 7ms (Views: 6.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 15:04:04 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 2ms (ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 15:04:04 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:04:04 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.5ms)
  Rendered homes/home.html.erb within layouts/application (2.0ms)
  Rendered layouts/_login_panel.html.erb (1.5ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 8ms (Views: 7.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 15:04:04 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 15:04:04 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:04:04 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (6.6ms)
  Rendered homes/home.html.erb within layouts/application (15.0ms)
  Rendered layouts/_login_panel.html.erb (3.0ms)
  Rendered layouts/_header.html.erb (3.9ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 22ms (Views: 21.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.5ms)[0m  DELETE FROM "chats_users" WHERE "chats_users"."user_id" = ?  [["user_id", 980190962]]
  [1m[36mSQL (4.0ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users?new=false
Completed 302 Found in 117ms (ActiveRecord: 7.2ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"980190962"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.9ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user1@test.com') AND "users"."id" != 980190962) LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  UPDATE "users" SET "name" = ?, "email" = ?, "sex" = ?, "password_digest" = ?, "phonenumber" = ?, "updated_at" = ? WHERE "users"."id" = ?  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$.J16bi.JV/ZbA89MWTkt.uAZSrxPegpdqoSwbO4NyXIhMtiNaHn9u"], ["phonenumber", "123456677777"], ["updated_at", "2018-12-21 07:04:04.961003"], ["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 75ms (ActiveRecord: 1.7ms)
  [1m[35m (1.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}}
  [1m[35m (1.9ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("name", "email", "sex", "password_digest", "phonenumber", "role", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$mIN3Qmy0EptBtZHDx8W/NeKfActRIxaW9VIm4dAQIzxpdBzsppIsO"], ["phonenumber", ""], ["role", 1], ["status", "user"], ["created_at", "2018-12-21 07:04:04.994520"], ["updated_at", "2018-12-21 07:04:04.994520"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 16ms (ActiveRecord: 3.1ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------
ChatsControllerTest: test_should_destroy_chat
---------------------------------------------
  [1m[36mChat Load (0.8ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "chats"
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (1.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsControllerTest: test_should_update_chat
--------------------------------------------
  [1m[35mChat Load (0.2ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by ChatsController#update as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}, "id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsControllerTest: test_should_create_chat
--------------------------------------------
  [1m[36mChat Load (0.2ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "chats"
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 5ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 15:04:05 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:04:05 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.9ms)
  Rendered homes/home.html.erb within layouts/application (6.4ms)
  Rendered layouts/_login_panel.html.erb (1.7ms)
  Rendered layouts/_header.html.erb (2.6ms)
  Rendered layouts/_content.html.erb (3.9ms)
Completed 200 OK in 19ms (Views: 17.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
MessagesControllerTest: test_should_create_message
--------------------------------------------------
  [1m[35mMessage Load (4.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "messages"[0m
Processing by MessagesController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 15:04:05 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:04:05 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (5.5ms)
  Rendered homes/home.html.erb within layouts/application (6.0ms)
  Rendered layouts/_login_panel.html.erb (4.0ms)
  Rendered layouts/_header.html.erb (4.5ms)
  Rendered layouts/_content.html.erb (4.2ms)
Completed 200 OK in 20ms (Views: 18.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$D6o0wns3avqtDRbCu.FSo.yYt8rXyK4jiEbk2tvFCQxYRMeigbaTO"], ["created_at", "2018-12-21 07:04:05.243992"], ["updated_at", "2018-12-21 07:04:05.243992"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$ndE1LWRlKaURRSAYhDQVCuuL0cG.zCfDGw9QykbgZXB6HPwUwVISu"], ["created_at", "2018-12-21 07:04:06.386681"], ["updated_at", "2018-12-21 07:04:06.386681"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35m (1.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 15:04:06 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 10ms (ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-21 15:04:06 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 8ms (ActiveRecord: 0.4ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:04:06 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.5ms)
  Rendered layouts/_login_panel.html.erb (1.4ms)
  Rendered layouts/_header.html.erb (2.1ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 7ms (Views: 6.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 15:04:06 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$rPLOMk03ab0tmsQrKAjZoe9puguYx.nr5dckj66LN8uB3TWeOJjrO"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-21 07:04:06.559099"], ["updated_at", "2018-12-21 07:04:06.559099"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 25ms (ActiveRecord: 1.5ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started GET "/" for 127.0.0.1 at 2018-12-21 15:04:06 +0800
Processing by HomesController#home as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  Rendered homes/home.html.erb within layouts/application (1.1ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.3ms | ActiveRecord: 0.1ms)
  [1m[36m (101.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  begin transaction
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 15:04:06 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-21 15:04:06 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:04:06 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.5ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.6ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.8ms)[0m  begin transaction
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 07:06:05', '2018-12-21 07:06:05', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 07:06:05', '2018-12-21 07:06:05', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (6.0ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 07:06:05', '2018-12-21 07:06:05', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 07:06:05', '2018-12-21 07:06:05', 298486374)
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 07:06:05', '2018-12-21 07:06:05', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 07:06:05', '2018-12-21 07:06:05', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 07:06:05', '2018-12-21 07:06:05', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 07:06:05', '2018-12-21 07:06:05', 298486374)
  [1m[36m (2.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 15:06:05 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 40ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-21 15:06:05 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:06:05 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (20.3ms)
  Rendered homes/home.html.erb within layouts/application (51.6ms)
  Rendered layouts/_login_panel.html.erb (12.5ms)
  Rendered layouts/_header.html.erb (17.9ms)
  Rendered layouts/_content.html.erb (1.3ms)
Completed 200 OK in 127ms (Views: 125.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 15:06:06 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-21 15:06:06 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:06:06 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.4ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.3ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 7ms (Views: 6.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------
ChatsStateTest: test_delete_chat
--------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 15:06:06 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/chats/8" for 127.0.0.1 at 2018-12-21 15:06:06 +0800
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:06:06 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (3.9ms)
  Rendered homes/home.html.erb within layouts/application (4.2ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (3.5ms)
Completed 200 OK in 12ms (Views: 11.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 15:06:06 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-21 15:06:06 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:06:06 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (7.7ms)
  Rendered homes/home.html.erb within layouts/application (8.1ms)
  Rendered layouts/_login_panel.html.erb (3.2ms)
  Rendered layouts/_header.html.erb (3.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 14ms (Views: 13.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 15:06:06 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 43ms (ActiveRecord: 0.4ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-21 15:06:06 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:06:06 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.9ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (4.7ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 13ms (Views: 12.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------
FriendshipsControllerTest: test_should_destroy_friendship
---------------------------------------------------------
  [1m[36mFriendship Load (1.0ms)[0m  [1mSELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "friendships"
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "friendships"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------
FriendshipsControllerTest: test_should_create_friendship
--------------------------------------------------------
  [1m[35mFriendship Load (0.2ms)[0m  SELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "friendships"[0m
Processing by FriendshipsController#create as HTML
  Parameters: {"friendship"=>{"friend_id"=>"1"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "friendships"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
FriendshipStateTest: test_delete_a_friend
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 15:06:06 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/3" for 127.0.0.1 at 2018-12-21 15:06:06 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"3"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:06:06 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (5.1ms)
  Rendered layouts/_login_panel.html.erb (1.6ms)
  Rendered layouts/_header.html.erb (2.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 11ms (Views: 10.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------
FriendshipStateTest: test_test_show_information_of_friend
---------------------------------------------------------
Started GET "/users/9" for 127.0.0.1 at 2018-12-21 15:06:06 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 9]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 15:06:06 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:06:06 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.0ms)
  Rendered homes/home.html.erb within layouts/application (2.6ms)
  Rendered layouts/_login_panel.html.erb (2.5ms)
  Rendered layouts/_header.html.erb (5.4ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 15ms (Views: 14.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 15:06:06 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:06:06 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.0ms)
  Rendered homes/home.html.erb within layouts/application (3.2ms)
  Rendered layouts/_login_panel.html.erb (1.3ms)
  Rendered layouts/_header.html.erb (5.6ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 15ms (Views: 14.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 15:06:06 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 15:06:06 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:06:06 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.0ms)
  Rendered homes/home.html.erb within layouts/application (5.1ms)
  Rendered layouts/_login_panel.html.erb (1.2ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 12ms (Views: 11.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 15:06:06 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 3ms (ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
ChatsControllerTest: test_should_destroy_chat
---------------------------------------------
  [1m[35mChat Load (0.5ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "chats"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsControllerTest: test_should_create_chat
--------------------------------------------
  [1m[36mChat Load (0.3ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "chats"
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsControllerTest: test_should_update_chat
--------------------------------------------
  [1m[35mChat Load (0.3ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by ChatsController#update as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}, "id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$1v0KKA5d.IlcraFd5nauteqq0MI8z.dd9N2WOgSClQimwexwnkQzK"], ["created_at", "2018-12-21 07:06:07.934163"], ["updated_at", "2018-12-21 07:06:07.934163"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36m (2.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$H9oisQ8mG78uIg3a9NrOXOJzu1PT1Gl7u7PwXNbuxjLuXI9cwj9tG"], ["created_at", "2018-12-21 07:06:08.007449"], ["updated_at", "2018-12-21 07:06:08.007449"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.9ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.5ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (2.0ms)[0m  begin transaction
--------------------------------------------------
MessagesControllerTest: test_should_create_message
--------------------------------------------------
  [1m[36mMessage Load (0.3ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "messages"
Processing by MessagesController#create as HTML
  Parameters: {"message"=>{"body"=>"hello", "id"=>"1", "chat_room"=>"1"}}
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 15:06:08 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 16ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:06:08 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (5.9ms)
  Rendered homes/home.html.erb within layouts/application (6.5ms)
  Rendered layouts/_login_panel.html.erb (1.3ms)
  Rendered layouts/_header.html.erb (2.0ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 11ms (Views: 10.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-21 15:06:08 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 20ms (ActiveRecord: 0.5ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-21 15:06:08 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 15ms (ActiveRecord: 0.6ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:06:08 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.0ms)
  Rendered homes/home.html.erb within layouts/application (2.6ms)
  Rendered layouts/_login_panel.html.erb (3.8ms)
  Rendered layouts/_header.html.erb (5.1ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 13ms (Views: 11.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-21 15:06:08 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$J45SIBtpEv4QeKnh1QEIuOqfaucOOmrS.nGhFORd7Ty7Mg.PBeCB2"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-21 07:06:08.334581"], ["updated_at", "2018-12-21 07:06:08.334581"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 16ms (ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started GET "/" for 127.0.0.1 at 2018-12-21 15:06:08 +0800
Processing by HomesController#home as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  Rendered homes/home.html.erb within layouts/application (3.7ms)
  Rendered layouts/_login_panel.html.erb (1.6ms)
  Rendered layouts/_header.html.erb (3.4ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 11ms (Views: 10.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "chats_users" WHERE "chats_users"."user_id" = ?  [["user_id", 980190962]]
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users?new=false
Completed 302 Found in 75ms (ActiveRecord: 1.7ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"980190962"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user1@test.com') AND "users"."id" != 980190962) LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  UPDATE "users" SET "name" = ?, "email" = ?, "sex" = ?, "password_digest" = ?, "phonenumber" = ?, "updated_at" = ? WHERE "users"."id" = ?  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$NKGp/0KOT/GezLJUkgK.DewYZmBuKsL.oFuaRgHyY74J4phz3elMe"], ["phonenumber", "123456677777"], ["updated_at", "2018-12-21 07:06:08.489144"], ["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 21ms (ActiveRecord: 1.2ms)
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("name", "email", "sex", "password_digest", "phonenumber", "role", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$yrHeR0K96t2bTvo2mBgUIOXm31GZIPnTww5L9wYltNNv1SXi2NASS"], ["phonenumber", ""], ["role", 1], ["status", "user"], ["created_at", "2018-12-21 07:06:08.520832"], ["updated_at", "2018-12-21 07:06:08.520832"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 18ms (ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 15:06:08 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:06:08 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.5ms)
  Rendered homes/home.html.erb within layouts/application (3.1ms)
  Rendered layouts/_login_panel.html.erb (2.0ms)
  Rendered layouts/_header.html.erb (2.7ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 10ms (Views: 8.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (2.6ms)[0m  [1mDROP TABLE "admins"[0m
  [1m[35m (1.8ms)[0m  CREATE TABLE "admins" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar DEFAULT '' NOT NULL, "encrypted_password" varchar DEFAULT '' NOT NULL, "reset_password_token" varchar, "reset_password_sent_at" datetime, "remember_created_at" datetime, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.5ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (4.0ms)[0m  CREATE UNIQUE INDEX "index_admins_on_email" ON "admins" ("email")
  [1m[36m (0.3ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_admins_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_admins_on_email' AND type='index'
[0m
  [1m[35m (5.1ms)[0m  CREATE UNIQUE INDEX "index_admins_on_reset_password_token" ON "admins" ("reset_password_token")
  [1m[36m (10.0ms)[0m  [1mDROP TABLE "chats"[0m
  [1m[35m (3.4ms)[0m  CREATE TABLE "chats" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "description" varchar, "admin_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (1.8ms)[0m  [1mDROP TABLE "chats_users"[0m
  [1m[35m (2.6ms)[0m  CREATE TABLE "chats_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "chat_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "priority" integer DEFAULT 1) 
  [1m[36m (5.7ms)[0m  [1mCREATE  INDEX "index_chats_users_on_chat_id" ON "chats_users" ("chat_id")[0m
  [1m[35m (0.2ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_chats_users_on_chat_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_chats_users_on_chat_id' AND type='index'

  [1m[36m (6.9ms)[0m  [1mCREATE  INDEX "index_chats_users_on_user_id" ON "chats_users" ("user_id")[0m
  [1m[35m (3.3ms)[0m  DROP TABLE "friendships"
  [1m[36m (5.1ms)[0m  [1mCREATE TABLE "friendships" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "friend_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (3.0ms)[0m  CREATE  INDEX "index_friendships_on_friend_id" ON "friendships" ("friend_id")
  [1m[36m (0.2ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_friendships_on_friend_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_friendships_on_friend_id' AND type='index'
[0m
  [1m[35m (2.3ms)[0m  CREATE  INDEX "index_friendships_on_user_id" ON "friendships" ("user_id")
  [1m[36m (1.6ms)[0m  [1mDROP TABLE "messages"[0m
  [1m[35m (1.3ms)[0m  CREATE TABLE "messages" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "body" text, "user_id" integer, "chat_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (1.5ms)[0m  [1mCREATE  INDEX "index_messages_on_chat_id" ON "messages" ("chat_id")[0m
  [1m[35m (0.2ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_messages_on_chat_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_messages_on_chat_id' AND type='index'

  [1m[36m (3.3ms)[0m  [1mCREATE  INDEX "index_messages_on_user_id" ON "messages" ("user_id")[0m
  [1m[35m (4.4ms)[0m  DROP TABLE "read_flags"
  [1m[36m (2.1ms)[0m  [1mCREATE TABLE "read_flags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "flag" boolean, "user_id" integer, "message_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (1.4ms)[0m  DROP TABLE "robots"
  [1m[36m (1.5ms)[0m  [1mCREATE TABLE "robots" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "robot_id" integer, "response_times" integer, "total_time" float, "solve_times" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (2.4ms)[0m  DROP TABLE "users"
  [1m[36m (1.5ms)[0m  [1mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "password_digest" varchar, "remember_digest" varchar, "sex" varchar, "phonenumber" varchar, "status" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (1.3ms)[0m  CREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")
  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'
[0m
  [1m[35m (1.9ms)[0m  CREATE  INDEX "index_users_on_name" ON "users" ("name")
  [1m[36m (0.5ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.4ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$WG8iDyNQtM3Tdz13I.6sb.4R11SYq3Y0PnpKsGJhCp8XCPxlW2yAq"], ["role", 3], ["sex", "male"], ["phonenumber", "1-497-059-1234 x69124"], ["status", "web developer"], ["created_at", "2018-12-21 07:07:53.770394"], ["updated_at", "2018-12-21 07:07:53.770394"]]
  [1m[35m (1.4ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user2@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user2"], ["email", "user2@test.com"], ["password_digest", "$2a$04$Vt3Ouk5F.ck8scw/itJQs.SxgCas57DG0Mg0g9NvLOqBslnrTtOBm"], ["role", 2], ["sex", "female"], ["phonenumber", "1-474-575-4339 x4276"], ["status", "agriculturist"], ["created_at", "2018-12-21 07:07:53.778804"], ["updated_at", "2018-12-21 07:07:53.778804"]]
  [1m[35m (1.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user3@test.com') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user3"], ["email", "user3@test.com"], ["password_digest", "$2a$04$tHyvsyShTW3PkC3PFub15ev9qHdJ5Xp2CtP74emYI2qfHVzyRTiJy"], ["role", 1], ["sex", "female"], ["phonenumber", "441-347-2389 x82548"], ["status", "police officer"], ["created_at", "2018-12-21 07:07:53.786711"], ["updated_at", "2018-12-21 07:07:53.786711"]]
  [1m[35m (1.4ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user4@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user4"], ["email", "user4@test.com"], ["password_digest", "$2a$04$X1A/.WqHIuY23YD2loA0UeABnuidVbEeIYDhVPgwx3ptvYkLora/e"], ["role", 3], ["sex", "male"], ["phonenumber", "1-313-658-1305"], ["status", "physicist"], ["created_at", "2018-12-21 07:07:53.794156"], ["updated_at", "2018-12-21 07:07:53.794156"]]
  [1m[35m (1.5ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user5@test.com') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user5"], ["email", "user5@test.com"], ["password_digest", "$2a$04$WGKpp4B4CmPFitN7QtiCnu03tjgKMadWsVAe6gwyPX/.ItnaQQd.2"], ["role", 1], ["sex", "male"], ["phonenumber", "746-110-6838 x307"], ["status", "engineer"], ["created_at", "2018-12-21 07:07:53.802846"], ["updated_at", "2018-12-21 07:07:53.802846"]]
  [1m[35m (1.4ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user6@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user6"], ["email", "user6@test.com"], ["password_digest", "$2a$04$l99eMcEVbvtP1kGQhGadau.3CugXBkQVJrx7EfU3RbmLu8rsxW5B2"], ["role", 2], ["sex", "male"], ["phonenumber", "1-965-948-4060"], ["status", "teacher"], ["created_at", "2018-12-21 07:07:53.811377"], ["updated_at", "2018-12-21 07:07:53.811377"]]
  [1m[35m (1.4ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user7@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user7"], ["email", "user7@test.com"], ["password_digest", "$2a$04$qlgZyDaXnSR.wbCCWNmFgelvXQ0NQUdTxT3MeRMUftP2Ao9Ysut1u"], ["role", 1], ["sex", "male"], ["phonenumber", "300.762.3027"], ["status", "judge"], ["created_at", "2018-12-21 07:07:53.819084"], ["updated_at", "2018-12-21 07:07:53.819084"]]
  [1m[35m (1.5ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user8@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user8"], ["email", "user8@test.com"], ["password_digest", "$2a$04$RltNjmfLc2oPzbVKoypHN.HgBnAtKeXt0Se26Z9X4rHm5JKuPj54a"], ["role", 4], ["sex", "female"], ["phonenumber", "407-533-2148"], ["status", "programmer"], ["created_at", "2018-12-21 07:07:53.826725"], ["updated_at", "2018-12-21 07:07:53.826725"]]
  [1m[35m (1.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user9@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user9"], ["email", "user9@test.com"], ["password_digest", "$2a$04$4MkhuTBH5WxYcLJqDwQQj.ooY.mHOMGRszUrDPpLiVkPqOqAJ65/S"], ["role", 2], ["sex", "male"], ["phonenumber", "639.067.3678 x52846"], ["status", "human resources"], ["created_at", "2018-12-21 07:07:53.835476"], ["updated_at", "2018-12-21 07:07:53.835476"]]
  [1m[35m (1.5ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user10@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user10"], ["email", "user10@test.com"], ["password_digest", "$2a$04$kYdQIO0oVRdkeZZWlFxkyOlTaC/W4eG/sFFDNnLxGvKfMzPkiDTmy"], ["role", 1], ["sex", "female"], ["phonenumber", "158-244-8924 x060"], ["status", "police officer"], ["created_at", "2018-12-21 07:07:53.843042"], ["updated_at", "2018-12-21 07:07:53.843042"]]
  [1m[35m (1.5ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user11@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user11"], ["email", "user11@test.com"], ["password_digest", "$2a$04$.OQNWb1EKQKYSvzoTvqMNOwf6W60DzsI/smk5CsHtEfhflQpUscom"], ["role", 1], ["sex", "female"], ["phonenumber", "785.794.1752 x87879"], ["status", "judge"], ["created_at", "2018-12-21 07:07:53.851139"], ["updated_at", "2018-12-21 07:07:53.851139"]]
  [1m[35m (1.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user12@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user12"], ["email", "user12@test.com"], ["password_digest", "$2a$04$Or86bpD22fbJex8HUv87I.3ER6VPi2WfNDdSCUG3rkTgsdPZtTBaS"], ["role", 2], ["sex", "male"], ["phonenumber", "416-507-9343 x43565"], ["status", "interpreter"], ["created_at", "2018-12-21 07:07:53.859771"], ["updated_at", "2018-12-21 07:07:53.859771"]]
  [1m[35m (1.5ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user13@test.com') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user13"], ["email", "user13@test.com"], ["password_digest", "$2a$04$b1KIk.eLgiEP5IkDPc5yi.WE5O7/AmkbT14NxlfwyMkDPBrUfZEAm"], ["role", 4], ["sex", "female"], ["phonenumber", "652-726-7530"], ["status", "designer"], ["created_at", "2018-12-21 07:07:53.869665"], ["updated_at", "2018-12-21 07:07:53.869665"]]
  [1m[35m (1.4ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user14@test.com') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user14"], ["email", "user14@test.com"], ["password_digest", "$2a$04$Wnd1q/7beTy4EtelutpFruWfY1SWqQyR62jbEMui4qLGXd5QkBGQu"], ["role", 1], ["sex", "female"], ["phonenumber", "355-819-1532"], ["status", "firefighter"], ["created_at", "2018-12-21 07:07:53.878233"], ["updated_at", "2018-12-21 07:07:53.878233"]]
  [1m[35m (1.5ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user15@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user15"], ["email", "user15@test.com"], ["password_digest", "$2a$04$aCpa8K/Ay7aV4ysNqHROz.5VbOQI8VUPnXjwajrWKxPmXQ4BElKcC"], ["role", 2], ["sex", "male"], ["phonenumber", "(273) 748-5559 x0788"], ["status", "chemist"], ["created_at", "2018-12-21 07:07:53.886177"], ["updated_at", "2018-12-21 07:07:53.886177"]]
  [1m[35m (1.4ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user16@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user16"], ["email", "user16@test.com"], ["password_digest", "$2a$04$ZbiknIXbSp4ELqfD7jYw3uRkAJ3vKKi5tDXgkeqkPmQJGBaEFPJR2"], ["role", 2], ["sex", "male"], ["phonenumber", "560-948-0544"], ["status", "teacher"], ["created_at", "2018-12-21 07:07:53.893688"], ["updated_at", "2018-12-21 07:07:53.893688"]]
  [1m[35m (1.3ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user17@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user17"], ["email", "user17@test.com"], ["password_digest", "$2a$04$r81G32OFTGmemXsKDaiVz.5e6KW7OGMbyIG6fviUxECPqOOy0j9zu"], ["role", 3], ["sex", "male"], ["phonenumber", "732-384-9526 x1503"], ["status", "interpreter"], ["created_at", "2018-12-21 07:07:53.901290"], ["updated_at", "2018-12-21 07:07:53.901290"]]
  [1m[35m (1.4ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user18@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user18"], ["email", "user18@test.com"], ["password_digest", "$2a$04$hOczGYpwyxeU7h9.90sk9.h3I5ssGCGNasgUUc3PbNRYj2Bln4.Ii"], ["role", 1], ["sex", "male"], ["phonenumber", "588.470.4988 x8164"], ["status", "firefighter"], ["created_at", "2018-12-21 07:07:53.909027"], ["updated_at", "2018-12-21 07:07:53.909027"]]
  [1m[35m (1.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user19@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user19"], ["email", "user19@test.com"], ["password_digest", "$2a$04$2yuhJJSqrFXwCMJBZ4KLH.3Y8dTO/pXfdTE.KJihWafqE9Ph60ava"], ["role", 1], ["sex", "male"], ["phonenumber", "(703) 763-1771 x56624"], ["status", "economist"], ["created_at", "2018-12-21 07:07:53.916466"], ["updated_at", "2018-12-21 07:07:53.916466"]]
  [1m[35m (1.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user20@test.com') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user20"], ["email", "user20@test.com"], ["password_digest", "$2a$04$ogb4l./nSHj5hU9G4Lve9uICPaxYjj/FpWx/lg49SK5FEIoifcjm6"], ["role", 3], ["sex", "male"], ["phonenumber", "(690) 932-8585"], ["status", "firefighter"], ["created_at", "2018-12-21 07:07:53.924915"], ["updated_at", "2018-12-21 07:07:53.924915"]]
  [1m[35m (1.4ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user21@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user21"], ["email", "user21@test.com"], ["password_digest", "$2a$04$hPGAgFs7Jtub2jIpAYjCjePnc7QQpnhAIpN8A7oAb5qTDZ2e.TAGS"], ["role", 4], ["sex", "male"], ["phonenumber", "158.485.4872 x6613"], ["status", "web developer"], ["created_at", "2018-12-21 07:07:53.933226"], ["updated_at", "2018-12-21 07:07:53.933226"]]
  [1m[35m (1.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user22@test.com') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user22"], ["email", "user22@test.com"], ["password_digest", "$2a$04$duY5OJzrOvHfLP0Fof/2fOM4ZziXPjjoL/4KuJ1sjP5ApivW3JY5u"], ["role", 3], ["sex", "male"], ["phonenumber", "1-717-610-0240 x0373"], ["status", "librarian"], ["created_at", "2018-12-21 07:07:53.943081"], ["updated_at", "2018-12-21 07:07:53.943081"]]
  [1m[35m (1.3ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user23@test.com') LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user23"], ["email", "user23@test.com"], ["password_digest", "$2a$04$FsHZWAaRbwVBzSKh/TbAZ.8gDB9TGyH06/QMyg/GU520R6ykIBTmW"], ["role", 4], ["sex", "male"], ["phonenumber", "(613) 456-0069 x988"], ["status", "writer"], ["created_at", "2018-12-21 07:07:53.951187"], ["updated_at", "2018-12-21 07:07:53.951187"]]
  [1m[35m (1.8ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user24@test.com') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user24"], ["email", "user24@test.com"], ["password_digest", "$2a$04$8J4Lm76Q2u26EhlK8y4EjuGjNEEK7f3aOoeJkaoZ/OmstP3FCs/eS"], ["role", 3], ["sex", "male"], ["phonenumber", "(819) 315-4492 x41635"], ["status", "chemist"], ["created_at", "2018-12-21 07:07:53.959880"], ["updated_at", "2018-12-21 07:07:53.959880"]]
  [1m[35m (1.5ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user25@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user25"], ["email", "user25@test.com"], ["password_digest", "$2a$04$uvqE/AM8LNzcXGIC6YUCqO3L6vTamtR.SP0/NhASS8AXtDHSoQ7ki"], ["role", 3], ["sex", "male"], ["phonenumber", "(467) 158-2949 x1144"], ["status", "librarian"], ["created_at", "2018-12-21 07:07:53.967897"], ["updated_at", "2018-12-21 07:07:53.967897"]]
  [1m[35m (2.1ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user26@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user26"], ["email", "user26@test.com"], ["password_digest", "$2a$04$7MY527NKFWmA1Ip8c2OTg.DFdD5S8NtDFgKNEArhJaoMjYHYyEGFK"], ["role", 1], ["sex", "male"], ["phonenumber", "311.945.5520"], ["status", "physicist"], ["created_at", "2018-12-21 07:07:53.977400"], ["updated_at", "2018-12-21 07:07:53.977400"]]
  [1m[35m (1.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user27@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user27"], ["email", "user27@test.com"], ["password_digest", "$2a$04$ENwsYWFMskcp2QbCA0JQreFRhAG6ojLG89xcCaxGHOnLt1DFf7STO"], ["role", 2], ["sex", "female"], ["phonenumber", "609.367.7662"], ["status", "web developer"], ["created_at", "2018-12-21 07:07:53.985408"], ["updated_at", "2018-12-21 07:07:53.985408"]]
  [1m[35m (1.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user28@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user28"], ["email", "user28@test.com"], ["password_digest", "$2a$04$ksb5VOcR8bePdIXvOtXUjOGsgS3nDT9KyW.9Ig4c5EwZ3s4YaIvlC"], ["role", 4], ["sex", "female"], ["phonenumber", "855-757-9761"], ["status", "accountant"], ["created_at", "2018-12-21 07:07:53.993452"], ["updated_at", "2018-12-21 07:07:53.993452"]]
  [1m[35m (1.5ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user29@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user29"], ["email", "user29@test.com"], ["password_digest", "$2a$04$gQgO0v4c/81jOkiZGUqmOeKY3KMOJoXyUOeFai91YvH6S9p0MCgyy"], ["role", 3], ["sex", "male"], ["phonenumber", "226-894-5488"], ["status", "advocate"], ["created_at", "2018-12-21 07:07:54.000891"], ["updated_at", "2018-12-21 07:07:54.000891"]]
  [1m[35m (1.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user30@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user30"], ["email", "user30@test.com"], ["password_digest", "$2a$04$viePfOIaHYYpSPclrFeIWOPsENovpFZj3LgAicZXxUz0qhB/KK.Mq"], ["role", 4], ["sex", "male"], ["phonenumber", "487.082.9154"], ["status", "librarian"], ["created_at", "2018-12-21 07:07:54.008632"], ["updated_at", "2018-12-21 07:07:54.008632"]]
  [1m[35m (1.3ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user31@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user31"], ["email", "user31@test.com"], ["password_digest", "$2a$04$dTxu3DRvsUOqStM0FxSd6e4.KblaVaSLE2zFQ66sJJn0Cg.6iWinS"], ["role", 4], ["sex", "male"], ["phonenumber", "514.694.8270 x49826"], ["status", "biologist"], ["created_at", "2018-12-21 07:07:54.016150"], ["updated_at", "2018-12-21 07:07:54.016150"]]
  [1m[35m (1.5ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user32@test.com') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user32"], ["email", "user32@test.com"], ["password_digest", "$2a$04$eloBb0SiLS2DSgIpWNMAYupWkGaZqgy3qBCJ8mSy0yuCBu/PMuxRq"], ["role", 2], ["sex", "male"], ["phonenumber", "723.130.6326 x277"], ["status", "firefighter"], ["created_at", "2018-12-21 07:07:54.024058"], ["updated_at", "2018-12-21 07:07:54.024058"]]
  [1m[35m (1.3ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user33@test.com') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user33"], ["email", "user33@test.com"], ["password_digest", "$2a$04$zI565OQk.erU6YwunmUZzOxIZDlhkhD4j.pxdYUK/n9SYqZEdTY6O"], ["role", 2], ["sex", "female"], ["phonenumber", "1-157-789-9416 x11171"], ["status", "firefighter"], ["created_at", "2018-12-21 07:07:54.031965"], ["updated_at", "2018-12-21 07:07:54.031965"]]
  [1m[35m (1.2ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user34@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user34"], ["email", "user34@test.com"], ["password_digest", "$2a$04$5LH7OWfZnv469KOaB//SsuJvpChhcFQxRevbyoL1TTyHh2nG.jxB2"], ["role", 3], ["sex", "female"], ["phonenumber", "333-983-9354"], ["status", "economist"], ["created_at", "2018-12-21 07:07:54.040374"], ["updated_at", "2018-12-21 07:07:54.040374"]]
  [1m[35m (1.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user35@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user35"], ["email", "user35@test.com"], ["password_digest", "$2a$04$18tsH2/0m001dPXTqlFmpOPYOtp8Hwn8juGj8d63EssCPob.deIE6"], ["role", 3], ["sex", "female"], ["phonenumber", "(397) 644-5596"], ["status", "actor"], ["created_at", "2018-12-21 07:07:54.048288"], ["updated_at", "2018-12-21 07:07:54.048288"]]
  [1m[35m (2.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user36@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user36"], ["email", "user36@test.com"], ["password_digest", "$2a$04$rJ79uTJpa6K5Q5m3NYtcBuJrdCPdS7xRA7PitO5Uv/vOExYcHPuoe"], ["role", 2], ["sex", "male"], ["phonenumber", "331.619.0331 x320"], ["status", "writer"], ["created_at", "2018-12-21 07:07:54.056365"], ["updated_at", "2018-12-21 07:07:54.056365"]]
  [1m[35m (1.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user37@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user37"], ["email", "user37@test.com"], ["password_digest", "$2a$04$BPRk2Qee8h1z3gNQFXpGbO./FtMj5r.CF8LsxQpuVvooW.D/sWuwK"], ["role", 2], ["sex", "female"], ["phonenumber", "700.125.8429 x159"], ["status", "chemist"], ["created_at", "2018-12-21 07:07:54.064285"], ["updated_at", "2018-12-21 07:07:54.064285"]]
  [1m[35m (1.4ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user38@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user38"], ["email", "user38@test.com"], ["password_digest", "$2a$04$12v.SFXmKiErUtjKi6.RNeR0fdCvdZayNZkREt5rC5DwgJ3VLqT92"], ["role", 3], ["sex", "male"], ["phonenumber", "213-277-5299 x63575"], ["status", "interpreter"], ["created_at", "2018-12-21 07:07:54.071706"], ["updated_at", "2018-12-21 07:07:54.071706"]]
  [1m[35m (1.5ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user39@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user39"], ["email", "user39@test.com"], ["password_digest", "$2a$04$MID20/rd3e3WHR6SlepR.eALMlV4z9NCnLoGnBqFB6msPMO0J9XXu"], ["role", 3], ["sex", "female"], ["phonenumber", "929.635.8480 x81014"], ["status", "human resources"], ["created_at", "2018-12-21 07:07:54.079490"], ["updated_at", "2018-12-21 07:07:54.079490"]]
  [1m[35m (1.5ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user40@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user40"], ["email", "user40@test.com"], ["password_digest", "$2a$04$69t/2hCAC1NkJl8oWXMzlOMbf.fxGBS/VIHEJLiXP6pxnBRnzC2ku"], ["role", 4], ["sex", "female"], ["phonenumber", "1-710-302-2931"], ["status", "firefighter"], ["created_at", "2018-12-21 07:07:54.087254"], ["updated_at", "2018-12-21 07:07:54.087254"]]
  [1m[35m (1.4ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user41@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user41"], ["email", "user41@test.com"], ["password_digest", "$2a$04$miH2c9npD4tyvKZD/VlZ9OmdHKPUxHoMYNlUkKV3KmSQUQvRu222O"], ["role", 3], ["sex", "female"], ["phonenumber", "1-679-071-4331 x43935"], ["status", "musician"], ["created_at", "2018-12-21 07:07:54.095069"], ["updated_at", "2018-12-21 07:07:54.095069"]]
  [1m[35m (1.4ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user42@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user42"], ["email", "user42@test.com"], ["password_digest", "$2a$04$7GdzMCzpQgeFIk7BORcg9.7BBhm/MF0GWlSIiq3yDUu6AIcOam3cO"], ["role", 4], ["sex", "male"], ["phonenumber", "(928) 751-0928"], ["status", "attorney at law"], ["created_at", "2018-12-21 07:07:54.102835"], ["updated_at", "2018-12-21 07:07:54.102835"]]
  [1m[35m (1.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user43@test.com') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user43"], ["email", "user43@test.com"], ["password_digest", "$2a$04$VvAcb0dPDvNKh9zLqD1rpuoh1NJtuZhR9DJ1.uS9GG.aMxY14JxqO"], ["role", 1], ["sex", "male"], ["phonenumber", "(157) 312-8121 x334"], ["status", "architect"], ["created_at", "2018-12-21 07:07:54.112552"], ["updated_at", "2018-12-21 07:07:54.112552"]]
  [1m[35m (1.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user44@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user44"], ["email", "user44@test.com"], ["password_digest", "$2a$04$YDSXBSXd5CKtWEpKY/PbYu9tJg3Z.Y3OJ1fgHdUDbXcEf/9W3Gm8C"], ["role", 2], ["sex", "female"], ["phonenumber", "1-196-677-2404 x039"], ["status", "judge"], ["created_at", "2018-12-21 07:07:54.120924"], ["updated_at", "2018-12-21 07:07:54.120924"]]
  [1m[35m (1.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user45@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user45"], ["email", "user45@test.com"], ["password_digest", "$2a$04$NQkiH4cuDriXyc32rgJl9.ep6zrM53iiZHs8fP1xn4qP9N34Qi.CW"], ["role", 3], ["sex", "male"], ["phonenumber", "(118) 395-5516 x411"], ["status", "accountant"], ["created_at", "2018-12-21 07:07:54.130598"], ["updated_at", "2018-12-21 07:07:54.130598"]]
  [1m[35m (1.5ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user46@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user46"], ["email", "user46@test.com"], ["password_digest", "$2a$04$rn6plDOTqddriKcoxjaHC.GiXyMYJTcC5dnhO22yiYj7JCjGVCGZ6"], ["role", 3], ["sex", "male"], ["phonenumber", "1-267-020-3588 x85329"], ["status", "doctor"], ["created_at", "2018-12-21 07:07:54.138513"], ["updated_at", "2018-12-21 07:07:54.138513"]]
  [1m[35m (1.4ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user47@test.com') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user47"], ["email", "user47@test.com"], ["password_digest", "$2a$04$1KoukxBKU9YlDH8wpoFqTOOwpIfmOHwyad3PIy4d7s.SJLGL3BS9m"], ["role", 4], ["sex", "male"], ["phonenumber", "(532) 477-6575"], ["status", "interpreter"], ["created_at", "2018-12-21 07:07:54.146015"], ["updated_at", "2018-12-21 07:07:54.146015"]]
  [1m[35m (1.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user48@test.com') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user48"], ["email", "user48@test.com"], ["password_digest", "$2a$04$cxMKOjOKsmGD4oc8N93rBOIUP1L0jLXKbDHlFyBJyLVOdP.cXEc2W"], ["role", 1], ["sex", "female"], ["phonenumber", "(166) 291-7144 x2116"], ["status", "librarian"], ["created_at", "2018-12-21 07:07:54.155174"], ["updated_at", "2018-12-21 07:07:54.155174"]]
  [1m[35m (1.3ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user49@test.com') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user49"], ["email", "user49@test.com"], ["password_digest", "$2a$04$8wUOTA4n.NqYpxSlwvkmNe1dlh2G1c2KSGwJRs8fcYwaQm9BM6/bq"], ["role", 4], ["sex", "male"], ["phonenumber", "(655) 764-9850 x095"], ["status", "attorney at law"], ["created_at", "2018-12-21 07:07:54.164549"], ["updated_at", "2018-12-21 07:07:54.164549"]]
  [1m[35m (1.4ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user50@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user50"], ["email", "user50@test.com"], ["password_digest", "$2a$04$P/oILOPTYpcJCsQkMPlBP.TiYSeSSqf6.N/.hUQXA7uaWgjSNb28a"], ["role", 2], ["sex", "female"], ["phonenumber", "885.645.0076"], ["status", "doctor"], ["created_at", "2018-12-21 07:07:54.172555"], ["updated_at", "2018-12-21 07:07:54.172555"]]
  [1m[35m (1.4ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user51@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user51"], ["email", "user51@test.com"], ["password_digest", "$2a$04$xmhh0uZjsc5yMM8IgCuICO4ZJyS9EKewJLCVPKoEfi9O49txE/lAm"], ["role", 4], ["sex", "female"], ["phonenumber", "(174) 775-1222 x53453"], ["status", "actor"], ["created_at", "2018-12-21 07:07:54.180793"], ["updated_at", "2018-12-21 07:07:54.180793"]]
  [1m[35m (1.5ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user52@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user52"], ["email", "user52@test.com"], ["password_digest", "$2a$04$MOxgVNJuchY.mWYz2MKwdeBSXCGbzu.W/FBNYigvZLGgn5S/xur4G"], ["role", 2], ["sex", "male"], ["phonenumber", "(483) 841-2684 x2721"], ["status", "physicist"], ["created_at", "2018-12-21 07:07:54.188689"], ["updated_at", "2018-12-21 07:07:54.188689"]]
  [1m[35m (1.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user53@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user53"], ["email", "user53@test.com"], ["password_digest", "$2a$04$PUilU9NadeytkAB9TffU..aSlsAM1mk39OiR2pSx85cYod.6D5c8G"], ["role", 3], ["sex", "male"], ["phonenumber", "1-918-773-9608"], ["status", "attorney at law"], ["created_at", "2018-12-21 07:07:54.196818"], ["updated_at", "2018-12-21 07:07:54.196818"]]
  [1m[35m (1.5ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user54@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user54"], ["email", "user54@test.com"], ["password_digest", "$2a$04$83u4maY1I0x9kVOLVPBm9u5wj/HZ9tBRwpcLTPOtO9a2/9PPqp/vC"], ["role", 2], ["sex", "male"], ["phonenumber", "(632) 392-8462"], ["status", "economist"], ["created_at", "2018-12-21 07:07:54.204349"], ["updated_at", "2018-12-21 07:07:54.204349"]]
  [1m[35m (1.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user55@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user55"], ["email", "user55@test.com"], ["password_digest", "$2a$04$IOTQDa2NKT3bpALfQE48QOuRgwdRm2/xZlprb4lVrvf5aE/Jg9D6q"], ["role", 2], ["sex", "female"], ["phonenumber", "(939) 517-6774 x0079"], ["status", "accountant"], ["created_at", "2018-12-21 07:07:54.212368"], ["updated_at", "2018-12-21 07:07:54.212368"]]
  [1m[35m (1.4ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user56@test.com') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user56"], ["email", "user56@test.com"], ["password_digest", "$2a$04$de3MAvthaJ0Nwdl2RoVAo.yjNOT3KSZlfoM/LmZ9Y61CoG/SjBozC"], ["role", 4], ["sex", "female"], ["phonenumber", "(781) 195-0926 x13404"], ["status", "attorney at law"], ["created_at", "2018-12-21 07:07:54.219912"], ["updated_at", "2018-12-21 07:07:54.219912"]]
  [1m[35m (1.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user57@test.com') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user57"], ["email", "user57@test.com"], ["password_digest", "$2a$04$vWzD1FzTI35fA0qTBbGoluI3iB2iF53wAJgB.jp10NJaJqklJ.8Nq"], ["role", 4], ["sex", "female"], ["phonenumber", "984.265.0285 x02538"], ["status", "astronomer"], ["created_at", "2018-12-21 07:07:54.230336"], ["updated_at", "2018-12-21 07:07:54.230336"]]
  [1m[35m (1.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user58@test.com') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user58"], ["email", "user58@test.com"], ["password_digest", "$2a$04$FII97GKvewBBiA4w2bM5NO67xhpbRFqlKp1XhQMQISyLLiqaGDueC"], ["role", 3], ["sex", "male"], ["phonenumber", "1-231-523-0847"], ["status", "writer"], ["created_at", "2018-12-21 07:07:54.239672"], ["updated_at", "2018-12-21 07:07:54.239672"]]
  [1m[35m (1.5ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user59@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user59"], ["email", "user59@test.com"], ["password_digest", "$2a$04$yfgIVSJib3sLdiMfLxL0wOjWl9u02KjDaEnjZHC/7nsL9Gv9DbrvW"], ["role", 2], ["sex", "male"], ["phonenumber", "638.664.1195"], ["status", "doctor"], ["created_at", "2018-12-21 07:07:54.247929"], ["updated_at", "2018-12-21 07:07:54.247929"]]
  [1m[35m (1.5ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user60@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user60"], ["email", "user60@test.com"], ["password_digest", "$2a$04$A53BOJV04rIYX1n68DICIuN1elgs2mJ1Kv3F4w30Iq//UWPDj2.A2"], ["role", 1], ["sex", "male"], ["phonenumber", "707-428-3668"], ["status", "police officer"], ["created_at", "2018-12-21 07:07:54.256928"], ["updated_at", "2018-12-21 07:07:54.256928"]]
  [1m[35m (1.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user61@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user61"], ["email", "user61@test.com"], ["password_digest", "$2a$04$tdfLcTu0JOYBWVuZDif.cO8JnxpxuluwayHn5eRHHdg0idmUPsdla"], ["role", 2], ["sex", "male"], ["phonenumber", "(420) 903-6773"], ["status", "accountant"], ["created_at", "2018-12-21 07:07:54.265366"], ["updated_at", "2018-12-21 07:07:54.265366"]]
  [1m[35m (1.5ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user62@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user62"], ["email", "user62@test.com"], ["password_digest", "$2a$04$xxFqah0vImUPt6rs9/Ui2.xUT7NTtOaH7gXaJ6dd/5ylwG6xLYCFK"], ["role", 2], ["sex", "female"], ["phonenumber", "965-705-5936 x337"], ["status", "physicist"], ["created_at", "2018-12-21 07:07:54.273307"], ["updated_at", "2018-12-21 07:07:54.273307"]]
  [1m[35m (1.5ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user63@test.com') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user63"], ["email", "user63@test.com"], ["password_digest", "$2a$04$5xP1/hB6/6RXVkWSoTVLau8wHDfstFutf.G80lB9DK/dKF0rErzMm"], ["role", 3], ["sex", "male"], ["phonenumber", "264-546-4391"], ["status", "doctor"], ["created_at", "2018-12-21 07:07:54.281853"], ["updated_at", "2018-12-21 07:07:54.281853"]]
  [1m[35m (1.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user64@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user64"], ["email", "user64@test.com"], ["password_digest", "$2a$04$kWZ1PvdKYcuJgR6jwnHFUORUHL.1vfRsuTPkSuUAyQ64g8kKfn.qG"], ["role", 4], ["sex", "female"], ["phonenumber", "516.469.1346 x25739"], ["status", "programmer"], ["created_at", "2018-12-21 07:07:54.290393"], ["updated_at", "2018-12-21 07:07:54.290393"]]
  [1m[35m (1.8ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user65@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user65"], ["email", "user65@test.com"], ["password_digest", "$2a$04$G0mAkCYgevpbTjtAz44v/.jnYRnLZE6whhOBHk8f5EBTHr81L7D0W"], ["role", 2], ["sex", "male"], ["phonenumber", "505.412.6311 x8588"], ["status", "designer"], ["created_at", "2018-12-21 07:07:54.299714"], ["updated_at", "2018-12-21 07:07:54.299714"]]
  [1m[35m (2.1ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user66@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user66"], ["email", "user66@test.com"], ["password_digest", "$2a$04$mxDCls7dHd2JVv57XhCE8u1gcdiErgOpwHPBVw14RdYBzyttIbuTC"], ["role", 4], ["sex", "female"], ["phonenumber", "(427) 003-0695 x5251"], ["status", "doctor"], ["created_at", "2018-12-21 07:07:54.308301"], ["updated_at", "2018-12-21 07:07:54.308301"]]
  [1m[35m (1.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user67@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user67"], ["email", "user67@test.com"], ["password_digest", "$2a$04$UJCx.WRhefh999rfmQYEseoZTrGfuIbuKwss5gYYxipUyvlx3lz8i"], ["role", 2], ["sex", "female"], ["phonenumber", "1-542-967-8680 x468"], ["status", "engineer"], ["created_at", "2018-12-21 07:07:54.315818"], ["updated_at", "2018-12-21 07:07:54.315818"]]
  [1m[35m (1.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user68@test.com') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user68"], ["email", "user68@test.com"], ["password_digest", "$2a$04$11xOW6YOi8kSPA8sKuF3mef7iWMD72OSJIZlCxuk71tDarb8XrmXK"], ["role", 1], ["sex", "female"], ["phonenumber", "908.820.3783"], ["status", "astronomer"], ["created_at", "2018-12-21 07:07:54.324432"], ["updated_at", "2018-12-21 07:07:54.324432"]]
  [1m[35m (1.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user69@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user69"], ["email", "user69@test.com"], ["password_digest", "$2a$04$bwXwTWLl7N/lehiG.PEYDu1M2wKFlj/MvVsW4S6iMhD7lb.v3dzEu"], ["role", 3], ["sex", "male"], ["phonenumber", "888-977-8378"], ["status", "architect"], ["created_at", "2018-12-21 07:07:54.332963"], ["updated_at", "2018-12-21 07:07:54.332963"]]
  [1m[35m (2.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user70@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user70"], ["email", "user70@test.com"], ["password_digest", "$2a$04$sWMigWI2djgnOID3iH6E0uJjz4aQUk9puMRtN72DGMppRaA/UADgK"], ["role", 1], ["sex", "male"], ["phonenumber", "771-846-6560"], ["status", "architect"], ["created_at", "2018-12-21 07:07:54.341000"], ["updated_at", "2018-12-21 07:07:54.341000"]]
  [1m[35m (1.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user71@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user71"], ["email", "user71@test.com"], ["password_digest", "$2a$04$6bbd3tcqiQFZEdvbBVMfFOHjPl2uKpUZ/vRtg4snT37niyExUPth2"], ["role", 4], ["sex", "female"], ["phonenumber", "1-179-346-3116 x9803"], ["status", "designer"], ["created_at", "2018-12-21 07:07:54.348901"], ["updated_at", "2018-12-21 07:07:54.348901"]]
  [1m[35m (1.5ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user72@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user72"], ["email", "user72@test.com"], ["password_digest", "$2a$04$UmOhA6g84MnevsqbL/HKvOdE8syP3.vNNkcLI8DQ3sNyi5URfnh9m"], ["role", 1], ["sex", "female"], ["phonenumber", "(167) 391-1502 x20590"], ["status", "web developer"], ["created_at", "2018-12-21 07:07:54.356222"], ["updated_at", "2018-12-21 07:07:54.356222"]]
  [1m[35m (1.4ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user73@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user73"], ["email", "user73@test.com"], ["password_digest", "$2a$04$QO53WyqmHkxrMxdUYcihdOzwmRWDEm4IdkNBlAs4lfWO3DuWRirfq"], ["role", 4], ["sex", "female"], ["phonenumber", "490.124.9794 x99531"], ["status", "philosopher"], ["created_at", "2018-12-21 07:07:54.363698"], ["updated_at", "2018-12-21 07:07:54.363698"]]
  [1m[35m (1.5ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user74@test.com') LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user74"], ["email", "user74@test.com"], ["password_digest", "$2a$04$S.UqaMB1kCE0ICKMNQPI4Oon0iwUGpxAtpezg.B9LxuS3lXThBflC"], ["role", 3], ["sex", "female"], ["phonenumber", "837-548-7437 x71278"], ["status", "agriculturist"], ["created_at", "2018-12-21 07:07:54.370767"], ["updated_at", "2018-12-21 07:07:54.370767"]]
  [1m[35m (1.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user75@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user75"], ["email", "user75@test.com"], ["password_digest", "$2a$04$llSjhSt.imxdcK0a4SXPMuOnZtK3qiHt0M2fJINuIdnlu3R0KEGF6"], ["role", 1], ["sex", "male"], ["phonenumber", "427-222-8227 x69375"], ["status", "web developer"], ["created_at", "2018-12-21 07:07:54.379602"], ["updated_at", "2018-12-21 07:07:54.379602"]]
  [1m[35m (1.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user76@test.com') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user76"], ["email", "user76@test.com"], ["password_digest", "$2a$04$piSzelQ03uEl6cpGErG3nOS2tS7Ibog8dDeEk1eVeAOBMD8o4xD1q"], ["role", 1], ["sex", "female"], ["phonenumber", "586.969.2729"], ["status", "musician"], ["created_at", "2018-12-21 07:07:54.389125"], ["updated_at", "2018-12-21 07:07:54.389125"]]
  [1m[35m (1.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user77@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user77"], ["email", "user77@test.com"], ["password_digest", "$2a$04$J0dBiD22yBAdZEIrjv0jt.3oHDimW58FkKbNMeFAtuuqRvTcZdEve"], ["role", 1], ["sex", "female"], ["phonenumber", "992.091.1944 x6076"], ["status", "programmer"], ["created_at", "2018-12-21 07:07:54.396721"], ["updated_at", "2018-12-21 07:07:54.396721"]]
  [1m[35m (1.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user78@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user78"], ["email", "user78@test.com"], ["password_digest", "$2a$04$IiZLFFA3wq5ZnuSYWWCKautNbfMqGgMHqgddmK9KRHH783ueK7P.a"], ["role", 4], ["sex", "female"], ["phonenumber", "176.741.4249 x13131"], ["status", "astronomer"], ["created_at", "2018-12-21 07:07:54.404463"], ["updated_at", "2018-12-21 07:07:54.404463"]]
  [1m[35m (1.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user79@test.com') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user79"], ["email", "user79@test.com"], ["password_digest", "$2a$04$SHBLYWzKGpnUrqe05RBzP.2Lui1Q8K9TeUHuoWJagH8i7xLz67Ay2"], ["role", 2], ["sex", "female"], ["phonenumber", "(696) 233-4587"], ["status", "philosopher"], ["created_at", "2018-12-21 07:07:54.412157"], ["updated_at", "2018-12-21 07:07:54.412157"]]
  [1m[35m (1.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user80@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user80"], ["email", "user80@test.com"], ["password_digest", "$2a$04$dstBUyubxRAm0CBcI.O2wOoC0ynM7vRmQ/X2SRtgymL8whTftKsSq"], ["role", 3], ["sex", "female"], ["phonenumber", "405.905.0184 x672"], ["status", "accountant"], ["created_at", "2018-12-21 07:07:54.420789"], ["updated_at", "2018-12-21 07:07:54.420789"]]
  [1m[35m (1.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user81@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user81"], ["email", "user81@test.com"], ["password_digest", "$2a$04$HUUyeHTUMeBz7fIBWLRRJe.0ZkFSdszrOPi60stg//4WjLlf00J62"], ["role", 4], ["sex", "male"], ["phonenumber", "(224) 357-5132 x148"], ["status", "philosopher"], ["created_at", "2018-12-21 07:07:54.428565"], ["updated_at", "2018-12-21 07:07:54.428565"]]
  [1m[35m (1.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user82@test.com') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user82"], ["email", "user82@test.com"], ["password_digest", "$2a$04$ipA3xMnZZmSfcJRDGVwdE.s0rp/TxbhcFZRGfp7EIeoFrus7wV2xm"], ["role", 2], ["sex", "female"], ["phonenumber", "804.827.4176 x6061"], ["status", "advocate"], ["created_at", "2018-12-21 07:07:54.435971"], ["updated_at", "2018-12-21 07:07:54.435971"]]
  [1m[35m (1.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user83@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user83"], ["email", "user83@test.com"], ["password_digest", "$2a$04$3UXYSMcAB9Xs90GfAZ50VONSjNwKV28ltYttybFKT5GEhsbe8raDa"], ["role", 1], ["sex", "male"], ["phonenumber", "(530) 590-1837"], ["status", "writer"], ["created_at", "2018-12-21 07:07:54.444281"], ["updated_at", "2018-12-21 07:07:54.444281"]]
  [1m[35m (1.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user84@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user84"], ["email", "user84@test.com"], ["password_digest", "$2a$04$FjuJNcJbuQv3vFsWQh9./eysJ2hci2P5ATkvzfADUMpqjM4hqG/KK"], ["role", 4], ["sex", "male"], ["phonenumber", "1-784-494-2614 x1734"], ["status", "firefighter"], ["created_at", "2018-12-21 07:07:54.459963"], ["updated_at", "2018-12-21 07:07:54.459963"]]
  [1m[35m (1.8ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user85@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user85"], ["email", "user85@test.com"], ["password_digest", "$2a$04$BwH/q2u6cko4qp/KyaPxluEn5tp.HMyRS4EiqM6.7Qg9Kb6GWMjVG"], ["role", 4], ["sex", "male"], ["phonenumber", "1-983-953-8124"], ["status", "physicist"], ["created_at", "2018-12-21 07:07:54.469475"], ["updated_at", "2018-12-21 07:07:54.469475"]]
  [1m[35m (1.5ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user86@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user86"], ["email", "user86@test.com"], ["password_digest", "$2a$04$ZConEz6idGytztAuLzupL.3aXMJaJqxm5OwHyrN.m/N5xEgmr150K"], ["role", 2], ["sex", "female"], ["phonenumber", "1-763-779-3026"], ["status", "web developer"], ["created_at", "2018-12-21 07:07:54.477555"], ["updated_at", "2018-12-21 07:07:54.477555"]]
  [1m[35m (1.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user87@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user87"], ["email", "user87@test.com"], ["password_digest", "$2a$04$S9birLuJgZPDL.Y0buK3U.FoHOd0lpC9gETyovbC17Nu4cBItu6Oa"], ["role", 3], ["sex", "female"], ["phonenumber", "804-178-4312 x1896"], ["status", "firefighter"], ["created_at", "2018-12-21 07:07:54.485918"], ["updated_at", "2018-12-21 07:07:54.485918"]]
  [1m[35m (1.5ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user88@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user88"], ["email", "user88@test.com"], ["password_digest", "$2a$04$op7uDgRk7SyhB6cFk8OzbubPyxqdBJOK/Lhytr1uMqet9P/BgFiJe"], ["role", 4], ["sex", "female"], ["phonenumber", "538-487-4116 x92120"], ["status", "doctor"], ["created_at", "2018-12-21 07:07:54.494260"], ["updated_at", "2018-12-21 07:07:54.494260"]]
  [1m[35m (1.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user89@test.com') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user89"], ["email", "user89@test.com"], ["password_digest", "$2a$04$6HHxNVIMb0XxtapCHwqh/eOUMRAIAMWA9i7bXrdaisMfJtdcaAJCO"], ["role", 4], ["sex", "female"], ["phonenumber", "(402) 810-9758 x171"], ["status", "judge"], ["created_at", "2018-12-21 07:07:54.502088"], ["updated_at", "2018-12-21 07:07:54.502088"]]
  [1m[35m (1.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user90@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user90"], ["email", "user90@test.com"], ["password_digest", "$2a$04$2kn55PF7JUh7C6nZEbG64Ohc1ejW8cBbmMFlNuNbn6OOiGTHKWQga"], ["role", 1], ["sex", "male"], ["phonenumber", "690.546.4423 x77234"], ["status", "physicist"], ["created_at", "2018-12-21 07:07:54.510663"], ["updated_at", "2018-12-21 07:07:54.510663"]]
  [1m[35m (1.8ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user91@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user91"], ["email", "user91@test.com"], ["password_digest", "$2a$04$qllh5IRVWdXbC9Bah3VPf.wTThaiHqyqipEq8VsUJW8NFwnNKtSuW"], ["role", 3], ["sex", "female"], ["phonenumber", "(140) 687-3532 x53633"], ["status", "chemist"], ["created_at", "2018-12-21 07:07:54.519279"], ["updated_at", "2018-12-21 07:07:54.519279"]]
  [1m[35m (1.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user92@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user92"], ["email", "user92@test.com"], ["password_digest", "$2a$04$SGzGaA4jz/To28c08cf0beqAuixcQy9SusVa/WqaxJgYgv1sylYJi"], ["role", 1], ["sex", "male"], ["phonenumber", "(999) 232-7629 x302"], ["status", "architect"], ["created_at", "2018-12-21 07:07:54.526966"], ["updated_at", "2018-12-21 07:07:54.526966"]]
  [1m[35m (1.4ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user93@test.com') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user93"], ["email", "user93@test.com"], ["password_digest", "$2a$04$0A1TY6US9wHPC7fRfUvLteHX7Fs2twmKqnbc5w0gp25FjrFM6Fm7m"], ["role", 1], ["sex", "male"], ["phonenumber", "714.071.1099"], ["status", "designer"], ["created_at", "2018-12-21 07:07:54.535068"], ["updated_at", "2018-12-21 07:07:54.535068"]]
  [1m[35m (1.2ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user94@test.com') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user94"], ["email", "user94@test.com"], ["password_digest", "$2a$04$vGNr5fOFgk9WkgZrnLa5C.KULU1/r60Rl50Sj9/Cv5Kl.LR9ru4KS"], ["role", 2], ["sex", "male"], ["phonenumber", "572.503.3017 x21815"], ["status", "chemist"], ["created_at", "2018-12-21 07:07:54.543925"], ["updated_at", "2018-12-21 07:07:54.543925"]]
  [1m[35m (2.9ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user95@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user95"], ["email", "user95@test.com"], ["password_digest", "$2a$04$Rn.8vaUF1/tVzeS76xOVKuS1DcBkLRUYhabTYuDLYFAtrl.F8OUe2"], ["role", 3], ["sex", "male"], ["phonenumber", "(346) 935-7877 x059"], ["status", "engineer"], ["created_at", "2018-12-21 07:07:54.553641"], ["updated_at", "2018-12-21 07:07:54.553641"]]
  [1m[35m (1.5ms)[0m  commit transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user96@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user96"], ["email", "user96@test.com"], ["password_digest", "$2a$04$u3N7BGGTGNJs9wqZTkhSHO7dWlyIE6YJZJSbc5WctEgD75yFMmkM2"], ["role", 1], ["sex", "male"], ["phonenumber", "620.762.5816 x87310"], ["status", "writer"], ["created_at", "2018-12-21 07:07:54.561881"], ["updated_at", "2018-12-21 07:07:54.561881"]]
  [1m[35m (4.4ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user97@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user97"], ["email", "user97@test.com"], ["password_digest", "$2a$04$YFT.KHYeTh3eBDLwRGjzA.i1sQu1ikyvAkyFHTBgRnB3nX7DyKhjW"], ["role", 4], ["sex", "male"], ["phonenumber", "647.808.7022"], ["status", "philosopher"], ["created_at", "2018-12-21 07:07:54.572533"], ["updated_at", "2018-12-21 07:07:54.572533"]]
  [1m[35m (2.9ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user98@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user98"], ["email", "user98@test.com"], ["password_digest", "$2a$04$RKoFKH2S1nJFaPIBD8CHX.U1EVkXrQ869GRgmAx4rK/NjItC/2hwO"], ["role", 4], ["sex", "male"], ["phonenumber", "1-901-306-6672 x5488"], ["status", "attorney at law"], ["created_at", "2018-12-21 07:07:54.582053"], ["updated_at", "2018-12-21 07:07:54.582053"]]
  [1m[35m (1.4ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user99@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user99"], ["email", "user99@test.com"], ["password_digest", "$2a$04$FLCPdktAQuxQhsW0ZZyQ0OLaMeg2CAQuw7N6WMPazposaouOipWi."], ["role", 3], ["sex", "male"], ["phonenumber", "896-496-2516"], ["status", "statistician"], ["created_at", "2018-12-21 07:07:54.589871"], ["updated_at", "2018-12-21 07:07:54.589871"]]
  [1m[35m (1.5ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user100@test.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user100"], ["email", "user100@test.com"], ["password_digest", "$2a$04$sQrli/cmdCtdANz8FgjDlecd6gWvb7jDadNVspw5GihhuGvF5k4me"], ["role", 4], ["sex", "female"], ["phonenumber", "438.717.3385 x342"], ["status", "programmer"], ["created_at", "2018-12-21 07:07:54.597890"], ["updated_at", "2018-12-21 07:07:54.597890"]]
  [1m[35m (1.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Dr.Chat@robot.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Dr.Chat"], ["email", "dr.chat@robot.com"], ["password_digest", "$2a$04$LwEvMac7tssNbunn1ikzMeiXU88kXlJO6Vhndt5eZ6JONpb/nVtzu"], ["role", 100], ["sex", "Robot"], ["phonenumber", "1-659-840-2216"], ["status", "Robot"], ["created_at", "2018-12-21 07:07:54.605666"], ["updated_at", "2018-12-21 07:07:54.605666"]]
  [1m[35m (1.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mAdmin Exists (0.2ms)[0m  SELECT  1 AS one FROM "admins" WHERE "admins"."email" = 'admin@test.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "admins" ("email", "encrypted_password", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["email", "admin@test.com"], ["encrypted_password", "$2a$04$KvkHVwlg8bhZQ79D631Z5uEJ.oDrhrrZQa1K/OdJENPg1fsNGtSSC"], ["created_at", "2018-12-21 07:07:54.626107"], ["updated_at", "2018-12-21 07:07:54.626107"]]
  [1m[35m (1.4ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "robots" ("response_times", "total_time", "solve_times", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["response_times", 0], ["total_time", 0.0], ["solve_times", 0], ["created_at", "2018-12-21 07:07:54.641168"], ["updated_at", "2018-12-21 07:07:54.641168"]]
  [1m[36m (1.4ms)[0m  [1mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (4.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 07:08:16', '2018-12-21 07:08:16', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 07:08:16', '2018-12-21 07:08:16', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 07:08:16', '2018-12-21 07:08:16', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 07:08:16', '2018-12-21 07:08:16', 298486374)
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 07:08:16', '2018-12-21 07:08:16', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 07:08:16', '2018-12-21 07:08:16', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 07:08:16', '2018-12-21 07:08:16', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 07:08:16', '2018-12-21 07:08:16', 298486374)
  [1m[36m (4.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 15:08:16 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 34ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:08:17 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (46.1ms)
  Rendered homes/home.html.erb within layouts/application (74.1ms)
  Rendered layouts/_login_panel.html.erb (37.5ms)
  Rendered layouts/_header.html.erb (49.1ms)
  Rendered layouts/_content.html.erb (2.9ms)
Completed 200 OK in 196ms (Views: 193.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-21 15:08:17 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 1933ms (ActiveRecord: 0.6ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:08:19 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.9ms)
  Rendered homes/home.html.erb within layouts/application (2.9ms)
  Rendered layouts/_login_panel.html.erb (1.6ms)
  Rendered layouts/_header.html.erb (2.4ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 9ms (Views: 7.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 15:08:19 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$ezqW35zyUcPgEQ04ho0QYOPzC6o43.YKAp7tmNoI/m3rmpUxddcaC"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-21 07:08:19.367715"], ["updated_at", "2018-12-21 07:08:19.367715"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 15ms (ActiveRecord: 1.1ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started GET "/" for 127.0.0.1 at 2018-12-21 15:08:19 +0800
Processing by HomesController#home as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  Rendered homes/home.html.erb within layouts/application (18.7ms)
  Rendered layouts/_login_panel.html.erb (1.2ms)
  Rendered layouts/_header.html.erb (2.5ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 24ms (Views: 23.2ms | ActiveRecord: 0.3ms)
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-21 15:08:19 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 14ms (ActiveRecord: 0.5ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsControllerTest: test_should_create_chat
--------------------------------------------
  [1m[35mChat Load (0.2ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "chats"
  [1m[36m (1.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
ChatsControllerTest: test_should_destroy_chat
---------------------------------------------
  [1m[36mChat Load (0.8ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "chats"
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsControllerTest: test_should_update_chat
--------------------------------------------
  [1m[35mChat Load (0.3ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by ChatsController#update as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}, "id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 15:08:19 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-21 15:08:19 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:08:19 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.6ms)
  Rendered layouts/_login_panel.html.erb (1.2ms)
  Rendered layouts/_header.html.erb (19.3ms)
  Rendered layouts/_content.html.erb (0.4ms)
Completed 200 OK in 24ms (Views: 23.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 15:08:19 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-21 15:08:19 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:08:19 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.7ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.4ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 5ms (Views: 4.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 15:08:19 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-21 15:08:19 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 18ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:08:19 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.2ms)
  Rendered homes/home.html.erb within layouts/application (2.7ms)
  Rendered layouts/_login_panel.html.erb (2.0ms)
  Rendered layouts/_header.html.erb (4.7ms)
  Rendered layouts/_content.html.erb (0.4ms)
Completed 200 OK in 12ms (Views: 11.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------
ChatsStateTest: test_delete_chat
--------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 15:08:19 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/chats/8" for 127.0.0.1 at 2018-12-21 15:08:19 +0800
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:08:19 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.7ms)
  Rendered homes/home.html.erb within layouts/application (4.1ms)
  Rendered layouts/_login_panel.html.erb (1.8ms)
  Rendered layouts/_header.html.erb (2.8ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 12ms (Views: 11.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  begin transaction
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 15:08:19 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 4ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:08:19 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (3.6ms)
  Rendered homes/home.html.erb within layouts/application (6.0ms)
  Rendered layouts/_login_panel.html.erb (1.4ms)
  Rendered layouts/_header.html.erb (2.3ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 12ms (Views: 11.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 15:08:19 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 5ms (ActiveRecord: 0.3ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-21 15:08:19 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:08:19 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.6ms)
  Rendered homes/home.html.erb within layouts/application (2.0ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_content.html.erb (1.8ms)
Completed 200 OK in 8ms (Views: 7.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 15:08:19 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 5ms (ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "chats_users" WHERE "chats_users"."user_id" = ?  [["user_id", 980190962]]
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users?new=false
Completed 302 Found in 54ms (ActiveRecord: 1.2ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"980190962"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user1@test.com') AND "users"."id" != 980190962) LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  UPDATE "users" SET "name" = ?, "email" = ?, "sex" = ?, "password_digest" = ?, "phonenumber" = ?, "updated_at" = ? WHERE "users"."id" = ?  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$OrOpPoEtmSdjcIjv0Op2Q.8TJCkbsIaOElYkV//af8KN0Um0y7sJu"], ["phonenumber", "123456677777"], ["updated_at", "2018-12-21 07:08:20.105011"], ["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 19ms (ActiveRecord: 1.4ms)
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("name", "email", "sex", "password_digest", "phonenumber", "role", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$Djz8cnzKH/9cCcaPEbNBNO7hsHyTlYSqbAuepKCW2nKfbBbmWlm4y"], ["phonenumber", ""], ["role", 1], ["status", "user"], ["created_at", "2018-12-21 07:08:20.135735"], ["updated_at", "2018-12-21 07:08:20.135735"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 14ms (ActiveRecord: 1.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------
FriendshipStateTest: test_test_show_information_of_friend
---------------------------------------------------------
Started GET "/users/9" for 127.0.0.1 at 2018-12-21 15:08:20 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 9]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 15:08:20 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:08:20 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.4ms)
  Rendered homes/home.html.erb within layouts/application (1.8ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 7ms (Views: 5.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
FriendshipStateTest: test_delete_a_friend
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 15:08:20 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/3" for 127.0.0.1 at 2018-12-21 15:08:20 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"3"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:08:20 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.0ms)
  Rendered homes/home.html.erb within layouts/application (2.7ms)
  Rendered layouts/_login_panel.html.erb (1.4ms)
  Rendered layouts/_header.html.erb (7.0ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 15ms (Views: 13.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------
FriendshipsControllerTest: test_should_create_friendship
--------------------------------------------------------
  [1m[36mFriendship Load (0.5ms)[0m  [1mSELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "friendships"
Processing by FriendshipsController#create as HTML
  Parameters: {"friendship"=>{"friend_id"=>"1"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "friendships"[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------
FriendshipsControllerTest: test_should_destroy_friendship
---------------------------------------------------------
  [1m[35mFriendship Load (0.1ms)[0m  SELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "friendships"[0m
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "friendships"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------
MessagesControllerTest: test_should_create_message
--------------------------------------------------
  [1m[36mMessage Load (0.5ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "messages"
Processing by MessagesController#create as HTML
  Parameters: {"message"=>{"body"=>"hello", "id"=>"1", "chat_room"=>"1"}}
Completed 500 Internal Server Error in 7ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 15:08:20 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 15:08:20 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:08:20 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (4.8ms)
  Rendered homes/home.html.erb within layouts/application (5.6ms)
  Rendered layouts/_login_panel.html.erb (1.6ms)
  Rendered layouts/_header.html.erb (2.4ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 12ms (Views: 11.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 15:08:20 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:08:20 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.7ms)
  Rendered homes/home.html.erb within layouts/application (2.6ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.4ms)
  Rendered layouts/_content.html.erb (0.4ms)
Completed 200 OK in 9ms (Views: 8.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$CGFzdoYsLPjr19nQ9gM4v.f7EDsuz8Q83ZnDHlcG1bldpy9S0aBV."], ["created_at", "2018-12-21 07:08:20.433036"], ["updated_at", "2018-12-21 07:08:20.433036"]]
  [1m[35m (0.7ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (2.7ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (14.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.9ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$LmANvUviZmr8IoAjJz7Zu.SLbddCuDflEeCYMMNPXCWyimExMGPZe"], ["created_at", "2018-12-21 07:08:20.596254"], ["updated_at", "2018-12-21 07:08:20.596254"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 07:26:05', '2018-12-21 07:26:05', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 07:26:05', '2018-12-21 07:26:05', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (3.9ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 07:26:05', '2018-12-21 07:26:05', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 07:26:05', '2018-12-21 07:26:05', 298486374)
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 07:26:05', '2018-12-21 07:26:05', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 07:26:05', '2018-12-21 07:26:05', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 07:26:05', '2018-12-21 07:26:05', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 07:26:05', '2018-12-21 07:26:05', 298486374)
  [1m[36m (5.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 15:26:05 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 28ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:26:05 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (18.5ms)
  Rendered homes/home.html.erb within layouts/application (41.2ms)
  Rendered layouts/_login_panel.html.erb (16.1ms)
  Rendered layouts/_header.html.erb (21.8ms)
  Rendered layouts/_content.html.erb (2.3ms)
Completed 200 OK in 123ms (Views: 121.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 15:26:05 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 33ms (ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 15:26:05 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 1046ms (ActiveRecord: 0.8ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-21 15:26:06 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$.mCP4yHtcu7/G6tgPE7YzuN1l8WtnZr71OUOwEWoCKli2rJx5W.bi"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-21 07:26:06.874828"], ["updated_at", "2018-12-21 07:26:06.874828"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 8ms (ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Started GET "/" for 127.0.0.1 at 2018-12-21 15:26:06 +0800
Processing by HomesController#home as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  Rendered homes/home.html.erb within layouts/application (1.4ms)
  Rendered layouts/_login_panel.html.erb (1.8ms)
  Rendered layouts/_header.html.erb (2.9ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 9ms (Views: 6.8ms | ActiveRecord: 0.2ms)
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-21 15:26:06 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 7ms (ActiveRecord: 0.3ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:26:06 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.0ms)
  Rendered homes/home.html.erb within layouts/application (9.1ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 13ms (Views: 12.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "chats_users" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 980190962]]
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "users" WHERE "users"."id" = ?  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users?new=false
Completed 302 Found in 40ms (ActiveRecord: 1.2ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"980190962"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user1@test.com') AND "users"."id" != 980190962) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE "users" SET "name" = ?, "email" = ?, "sex" = ?, "password_digest" = ?, "phonenumber" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$1F6021awCY46Hik6Y9pGLu60.9CrmDwa1MI3tEqnDnQeposfXHeZG"], ["phonenumber", "123456677777"], ["updated_at", "2018-12-21 07:26:06.996833"], ["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 14ms (ActiveRecord: 1.2ms)
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}}
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("name", "email", "sex", "password_digest", "phonenumber", "role", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$N6pUZXO91ingKvJBx4qEx.7pjpOjUsVR4.xezPf74NnnY/CjB3EJi"], ["phonenumber", ""], ["role", 1], ["status", "user"], ["created_at", "2018-12-21 07:26:07.073488"], ["updated_at", "2018-12-21 07:26:07.073488"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 14ms (ActiveRecord: 1.5ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 15:26:07 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:26:07 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.1ms)
  Rendered homes/home.html.erb within layouts/application (2.9ms)
  Rendered layouts/_login_panel.html.erb (1.5ms)
  Rendered layouts/_header.html.erb (2.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 10ms (Views: 8.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 15:26:07 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 4ms (ActiveRecord: 0.3ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-21 15:26:07 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:26:07 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.0ms)
  Rendered homes/home.html.erb within layouts/application (1.3ms)
  Rendered layouts/_login_panel.html.erb (1.5ms)
  Rendered layouts/_header.html.erb (2.0ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 9ms (Views: 8.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsControllerTest: test_should_create_chat
--------------------------------------------
  [1m[35mChat Load (0.2ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "chats"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
ChatsControllerTest: test_should_destroy_chat
---------------------------------------------
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "chats"
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsControllerTest: test_should_update_chat
--------------------------------------------
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by ChatsController#update as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}, "id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------
FriendshipsControllerTest: test_should_destroy_friendship
---------------------------------------------------------
  [1m[36mFriendship Load (0.3ms)[0m  [1mSELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "friendships"
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "friendships"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------
FriendshipsControllerTest: test_should_create_friendship
--------------------------------------------------------
  [1m[35mFriendship Load (0.1ms)[0m  SELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "friendships"[0m
Processing by FriendshipsController#create as HTML
  Parameters: {"friendship"=>{"friend_id"=>"1"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "friendships"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 15:26:07 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-21 15:26:07 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:26:07 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.0ms)
  Rendered homes/home.html.erb within layouts/application (1.4ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.1ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 4ms (Views: 3.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------
ChatsStateTest: test_delete_chat
--------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 15:26:07 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/chats/8" for 127.0.0.1 at 2018-12-21 15:26:07 +0800
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:26:07 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.5ms)
  Rendered homes/home.html.erb within layouts/application (2.2ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 8ms (Views: 7.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 15:26:07 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-21 15:26:07 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:26:07 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (3.0ms)
  Rendered layouts/_login_panel.html.erb (1.5ms)
  Rendered layouts/_header.html.erb (2.2ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 13ms (Views: 10.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 15:26:07 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-21 15:26:07 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:26:07 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.0ms)
  Rendered homes/home.html.erb within layouts/application (2.6ms)
  Rendered layouts/_login_panel.html.erb (1.6ms)
  Rendered layouts/_header.html.erb (2.4ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 10ms (Views: 9.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------
MessagesControllerTest: test_should_create_message
--------------------------------------------------
  [1m[36mMessage Load (0.4ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "messages"
Processing by MessagesController#create as HTML
  Parameters: {"message"=>{"body"=>"hello", "id"=>"1", "chat_room"=>"1"}}
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$WaUkLwXb6F9TTseV.SnBn.CjLFZpbseqr0Jka.E/yRMkj./7s1.fy"], ["created_at", "2018-12-21 07:26:07.409287"], ["updated_at", "2018-12-21 07:26:07.409287"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$X3EEZFMuZCT9nyaoHjums.9J2ISG.U87Se07Z7z2mykwKfw0Mdkli"], ["created_at", "2018-12-21 07:26:07.422609"], ["updated_at", "2018-12-21 07:26:07.422609"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
FriendshipStateTest: test_delete_a_friend
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 15:26:07 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/3" for 127.0.0.1 at 2018-12-21 15:26:07 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"3"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:26:07 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.6ms)
  Rendered layouts/_login_panel.html.erb (2.2ms)
  Rendered layouts/_header.html.erb (3.5ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 10ms (Views: 9.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------
FriendshipStateTest: test_test_show_information_of_friend
---------------------------------------------------------
Started GET "/users/9" for 127.0.0.1 at 2018-12-21 15:26:07 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 9]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 15:26:07 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:26:07 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.9ms)
  Rendered homes/home.html.erb within layouts/application (2.3ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.4ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 7ms (Views: 5.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 15:26:07 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:26:07 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.6ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 9ms (Views: 8.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 15:26:07 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 15:26:07 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:26:07 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.6ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.3ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (4.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 07:29:24', '2018-12-21 07:29:24', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 07:29:24', '2018-12-21 07:29:24', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 07:29:24', '2018-12-21 07:29:24', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 07:29:24', '2018-12-21 07:29:24', 298486374)
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 07:29:24', '2018-12-21 07:29:24', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 07:29:24', '2018-12-21 07:29:24', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 07:29:24', '2018-12-21 07:29:24', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 07:29:24', '2018-12-21 07:29:24', 298486374)
  [1m[36m (1.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 15:29:24 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 23ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:29:25 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (14.0ms)
  Rendered homes/home.html.erb within layouts/application (38.1ms)
  Rendered layouts/_login_panel.html.erb (16.1ms)
  Rendered layouts/_header.html.erb (21.0ms)
  Rendered layouts/_content.html.erb (2.1ms)
Completed 200 OK in 120ms (Views: 118.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 15:29:25 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 15:29:25 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:29:25 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.3ms)
  Rendered homes/home.html.erb within layouts/application (3.0ms)
  Rendered layouts/_login_panel.html.erb (1.6ms)
  Rendered layouts/_header.html.erb (2.0ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 22ms (Views: 21.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 15:29:25 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 24ms (ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$T4xZh5Qpa1Ty0V0OS0HevuqrRqoc7tsdk9cQCMiyGezs1eqQpjUpa"], ["created_at", "2018-12-21 07:29:26.261923"], ["updated_at", "2018-12-21 07:29:26.261923"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$pDAovg/sBDIbdG66sKpNmOHo3sWtdj6oVPovoQJaLPp9bOLHgq9ZG"], ["created_at", "2018-12-21 07:29:26.310530"], ["updated_at", "2018-12-21 07:29:26.310530"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 15:29:26 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-21 15:29:26 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:29:26 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.4ms)
  Rendered homes/home.html.erb within layouts/application (2.9ms)
  Rendered layouts/_login_panel.html.erb (2.9ms)
  Rendered layouts/_header.html.erb (3.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 10ms (Views: 9.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 15:29:26 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-21 15:29:26 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:29:26 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.0ms)
  Rendered homes/home.html.erb within layouts/application (1.4ms)
  Rendered layouts/_login_panel.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (1.1ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 4ms (Views: 3.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 15:29:26 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-21 15:29:26 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:29:26 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.8ms)
  Rendered homes/home.html.erb within layouts/application (2.4ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.2ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 7ms (Views: 5.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------
ChatsStateTest: test_delete_chat
--------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 15:29:26 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started DELETE "/chats/8" for 127.0.0.1 at 2018-12-21 15:29:26 +0800
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:29:26 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.6ms)
  Rendered layouts/_login_panel.html.erb (2.0ms)
  Rendered layouts/_header.html.erb (2.6ms)
  Rendered layouts/_content.html.erb (0.4ms)
Completed 200 OK in 8ms (Views: 7.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 15:29:26 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 13ms (ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-21 15:29:26 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 7ms (ActiveRecord: 0.3ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:29:26 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.9ms)
  Rendered homes/home.html.erb within layouts/application (2.7ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.4ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 8ms (Views: 6.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 15:29:26 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$qQwcIimSlTNDAGGMIbc9Be15a7hS6uoFwtk36IgvTV9YvwU/snEd."], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-21 07:29:26.524152"], ["updated_at", "2018-12-21 07:29:26.524152"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 9ms (ActiveRecord: 0.8ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started GET "/" for 127.0.0.1 at 2018-12-21 15:29:26 +0800
Processing by HomesController#home as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  Rendered homes/home.html.erb within layouts/application (1.7ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (2.5ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 7ms (Views: 6.2ms | ActiveRecord: 0.1ms)
  [1m[36m (10.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "chats_users" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 980190962]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "users" WHERE "users"."id" = ?  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users?new=false
Completed 302 Found in 39ms (ActiveRecord: 0.9ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"980190962"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user1@test.com') AND "users"."id" != 980190962) LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "users" SET "name" = ?, "email" = ?, "sex" = ?, "password_digest" = ?, "phonenumber" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$rZSGwA717YRQ28yn4otaY.TQyDXcKWTDYkEhXgqcXeU.r/xUfJVyu"], ["phonenumber", "123456677777"], ["updated_at", "2018-12-21 07:29:26.623904"], ["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 14ms (ActiveRecord: 1.2ms)
  [1m[36m (2.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "sex", "password_digest", "phonenumber", "role", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$kCtIpSeKBp1Tsw2BYeuTEuqFsy2w4DUMDLkO5sII4jTSbYw6Kqb8a"], ["phonenumber", ""], ["role", 1], ["status", "user"], ["created_at", "2018-12-21 07:29:26.645712"], ["updated_at", "2018-12-21 07:29:26.645712"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 10ms (ActiveRecord: 1.1ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsControllerTest: test_should_create_chat
--------------------------------------------
  [1m[35mChat Load (0.2ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "chats"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
ChatsControllerTest: test_should_destroy_chat
---------------------------------------------
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "chats"
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsControllerTest: test_should_update_chat
--------------------------------------------
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by ChatsController#update as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}, "id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 15:29:26 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:29:26 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.4ms)
  Rendered homes/home.html.erb within layouts/application (1.9ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 7ms (Views: 5.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 15:29:26 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-21 15:29:26 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:29:26 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.0ms)
  Rendered homes/home.html.erb within layouts/application (2.3ms)
  Rendered layouts/_login_panel.html.erb (1.3ms)
  Rendered layouts/_header.html.erb (2.0ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 7ms (Views: 6.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------------------
FriendshipsControllerTest: test_should_create_friendship
--------------------------------------------------------
  [1m[36mFriendship Load (0.3ms)[0m  [1mSELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "friendships"
Processing by FriendshipsController#create as HTML
  Parameters: {"friendship"=>{"friend_id"=>"1"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "friendships"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------
FriendshipsControllerTest: test_should_destroy_friendship
---------------------------------------------------------
  [1m[35mFriendship Load (0.1ms)[0m  SELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "friendships"[0m
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "friendships"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 15:29:26 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:29:26 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.3ms)
  Rendered homes/home.html.erb within layouts/application (1.8ms)
  Rendered layouts/_login_panel.html.erb (1.9ms)
  Rendered layouts/_header.html.erb (2.8ms)
  Rendered layouts/_content.html.erb (0.4ms)
Completed 200 OK in 9ms (Views: 7.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
FriendshipStateTest: test_delete_a_friend
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 15:29:26 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/3" for 127.0.0.1 at 2018-12-21 15:29:26 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"3"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:29:26 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.0ms)
  Rendered homes/home.html.erb within layouts/application (1.3ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.3ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 5ms (Views: 4.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------------------
FriendshipStateTest: test_test_show_information_of_friend
---------------------------------------------------------
Started GET "/users/9" for 127.0.0.1 at 2018-12-21 15:29:26 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 9]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 15:29:26 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 4ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:29:26 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.3ms)
  Rendered homes/home.html.erb within layouts/application (1.6ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.1ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 5ms (Views: 4.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------------
MessagesControllerTest: test_should_create_message
--------------------------------------------------
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "messages"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 07:31:15', '2018-12-21 07:31:15', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 07:31:15', '2018-12-21 07:31:15', 298486374)[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 07:31:15', '2018-12-21 07:31:15', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 07:31:15', '2018-12-21 07:31:15', 298486374)
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 07:31:15', '2018-12-21 07:31:15', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 07:31:15', '2018-12-21 07:31:15', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 07:31:15', '2018-12-21 07:31:15', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 07:31:15', '2018-12-21 07:31:15', 298486374)
  [1m[36m (1.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 15:31:15 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 37ms (ActiveRecord: 0.5ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-21 15:31:15 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:31:15 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (16.2ms)
  Rendered homes/home.html.erb within layouts/application (53.0ms)
  Rendered layouts/_login_panel.html.erb (21.6ms)
  Rendered layouts/_header.html.erb (39.7ms)
  Rendered layouts/_content.html.erb (2.6ms)
Completed 200 OK in 152ms (Views: 150.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  begin transaction
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 15:31:15 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:31:15 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.6ms)
  Rendered homes/home.html.erb within layouts/application (2.2ms)
  Rendered layouts/_login_panel.html.erb (2.6ms)
  Rendered layouts/_header.html.erb (4.9ms)
  Rendered layouts/_content.html.erb (0.7ms)
Completed 200 OK in 12ms (Views: 11.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------
FriendshipStateTest: test_test_show_information_of_friend
---------------------------------------------------------
Started GET "/users/9" for 127.0.0.1 at 2018-12-21 15:31:16 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 9]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 15:31:16 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:31:16 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.1ms)
  Rendered homes/home.html.erb within layouts/application (2.6ms)
  Rendered layouts/_login_panel.html.erb (1.5ms)
  Rendered layouts/_header.html.erb (2.0ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 7ms (Views: 6.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
FriendshipStateTest: test_delete_a_friend
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 15:31:16 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/3" for 127.0.0.1 at 2018-12-21 15:31:16 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"3"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:31:16 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.7ms)
  Rendered homes/home.html.erb within layouts/application (4.3ms)
  Rendered layouts/_login_panel.html.erb (4.6ms)
  Rendered layouts/_header.html.erb (5.3ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 17ms (Views: 15.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-21 15:31:16 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 1108ms (ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-21 15:31:17 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 8ms (ActiveRecord: 0.4ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:31:17 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.6ms)
  Rendered layouts/_login_panel.html.erb (1.3ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 5.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-21 15:31:17 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$sTCiLJZ3uzIruujKtrClw.yAcVCWRfRhgGpR6lQU0CithaTP1a1MK"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-21 07:31:17.290167"], ["updated_at", "2018-12-21 07:31:17.290167"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 12ms (ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started GET "/" for 127.0.0.1 at 2018-12-21 15:31:17 +0800
Processing by HomesController#home as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  Rendered homes/home.html.erb within layouts/application (12.4ms)
  Rendered layouts/_login_panel.html.erb (1.5ms)
  Rendered layouts/_header.html.erb (3.1ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 18ms (Views: 17.4ms | ActiveRecord: 0.1ms)
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
MessagesControllerTest: test_should_create_message
--------------------------------------------------
  [1m[35mMessage Load (0.4ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "messages"[0m
Processing by MessagesController#create as HTML
  Parameters: {"message"=>"980190962"}
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsControllerTest: test_should_create_chat
--------------------------------------------
  [1m[35mChat Load (0.3ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "chats"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
ChatsControllerTest: test_should_destroy_chat
---------------------------------------------
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "chats"
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsControllerTest: test_should_update_chat
--------------------------------------------
  [1m[35mChat Load (1.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by ChatsController#update as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}, "id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 15:31:17 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:31:17 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.4ms)
  Rendered layouts/_login_panel.html.erb (1.3ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 6ms (Views: 5.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------------------
FriendshipsControllerTest: test_should_create_friendship
--------------------------------------------------------
  [1m[36mFriendship Load (0.4ms)[0m  [1mSELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "friendships"
Processing by FriendshipsController#create as HTML
  Parameters: {"friendship"=>{"friend_id"=>"1"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "friendships"[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------
FriendshipsControllerTest: test_should_destroy_friendship
---------------------------------------------------------
  [1m[35mFriendship Load (0.1ms)[0m  SELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "friendships"[0m
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "friendships"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$qp.4G3bozinp3FWbBgshXOPcAOvW4OwGCNYtRlEapNuK6qQDnlue."], ["created_at", "2018-12-21 07:31:17.565090"], ["updated_at", "2018-12-21 07:31:17.565090"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36m (444.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$dsdi9DJppzv/tg4rPlfMhuMd.HS0Fpz.1lwim8PPhc2mw/RQWDTSG"], ["created_at", "2018-12-21 07:31:18.039681"], ["updated_at", "2018-12-21 07:31:18.039681"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 15:31:18 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-21 15:31:18 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:31:18 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.6ms)
  Rendered homes/home.html.erb within layouts/application (2.3ms)
  Rendered layouts/_login_panel.html.erb (2.3ms)
  Rendered layouts/_header.html.erb (3.5ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 11ms (Views: 10.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 15:31:18 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-21 15:31:18 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:31:18 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.7ms)
  Rendered homes/home.html.erb within layouts/application (2.2ms)
  Rendered layouts/_login_panel.html.erb (2.2ms)
  Rendered layouts/_header.html.erb (3.4ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 10ms (Views: 9.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 15:31:18 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-21 15:31:18 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:31:18 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.6ms)
  Rendered homes/home.html.erb within layouts/application (2.5ms)
  Rendered layouts/_login_panel.html.erb (1.3ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 8ms (Views: 7.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------
ChatsStateTest: test_delete_chat
--------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 15:31:18 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/chats/8" for 127.0.0.1 at 2018-12-21 15:31:18 +0800
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:31:18 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.7ms)
  Rendered homes/home.html.erb within layouts/application (2.1ms)
  Rendered layouts/_login_panel.html.erb (1.4ms)
  Rendered layouts/_header.html.erb (2.4ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 7ms (Views: 6.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "sex", "password_digest", "phonenumber", "role", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$dW41ZENWRQcu6NcAUGqSn./jXtSrAWmCdiFo7XGP/JoH3kWPCFSzq"], ["phonenumber", ""], ["role", 1], ["status", "user"], ["created_at", "2018-12-21 07:31:18.220047"], ["updated_at", "2018-12-21 07:31:18.220047"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 11ms (ActiveRecord: 0.8ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"980190962"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user1@test.com') AND "users"."id" != 980190962) LIMIT 1[0m
  [1m[35mSQL (1.2ms)[0m  UPDATE "users" SET "name" = ?, "email" = ?, "sex" = ?, "password_digest" = ?, "phonenumber" = ?, "updated_at" = ? WHERE "users"."id" = ?  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$2enlrzeiaSc3MSx/wUHAy.b1gYP.L30.n.igYgjyz.qPdCYcgKiRW"], ["phonenumber", "123456677777"], ["updated_at", "2018-12-21 07:31:18.241399"], ["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 15ms (ActiveRecord: 1.8ms)
  [1m[35m (1.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "chats_users" WHERE "chats_users"."user_id" = ?  [["user_id", 980190962]]
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users?new=false
Completed 302 Found in 49ms (ActiveRecord: 1.3ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 15:31:18 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 15:31:18 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:31:18 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.5ms)
  Rendered homes/home.html.erb within layouts/application (1.9ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 6ms (Views: 5.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 15:31:18 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:31:18 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.6ms)
  Rendered homes/home.html.erb within layouts/application (2.1ms)
  Rendered layouts/_login_panel.html.erb (1.7ms)
  Rendered layouts/_header.html.erb (2.3ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 9ms (Views: 7.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 15:31:18 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  begin transaction
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 07:32:22', '2018-12-21 07:32:22', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 07:32:22', '2018-12-21 07:32:22', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 07:32:22', '2018-12-21 07:32:22', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 07:32:22', '2018-12-21 07:32:22', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 07:32:22', '2018-12-21 07:32:22', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 07:32:22', '2018-12-21 07:32:22', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 07:32:22', '2018-12-21 07:32:22', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 07:32:22', '2018-12-21 07:32:22', 298486374)
  [1m[36m (2.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 15:32:22 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 54ms (ActiveRecord: 0.6ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-21 15:32:22 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:32:22 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (16.9ms)
  Rendered homes/home.html.erb within layouts/application (35.3ms)
  Rendered layouts/_login_panel.html.erb (13.4ms)
  Rendered layouts/_header.html.erb (18.6ms)
  Rendered layouts/_content.html.erb (1.4ms)
Completed 200 OK in 106ms (Views: 104.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
---------------------------------------------------------
FriendshipStateTest: test_test_show_information_of_friend
---------------------------------------------------------
Started GET "/users/9" for 127.0.0.1 at 2018-12-21 15:32:22 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 9]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 15:32:22 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:32:22 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.8ms)
  Rendered homes/home.html.erb within layouts/application (2.1ms)
  Rendered layouts/_login_panel.html.erb (1.8ms)
  Rendered layouts/_header.html.erb (2.8ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 12ms (Views: 11.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
FriendshipStateTest: test_delete_a_friend
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 15:32:22 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/3" for 127.0.0.1 at 2018-12-21 15:32:22 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"3"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:32:22 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.5ms)
  Rendered homes/home.html.erb within layouts/application (3.2ms)
  Rendered layouts/_login_panel.html.erb (1.9ms)
  Rendered layouts/_header.html.erb (2.7ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 10ms (Views: 8.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
ChatsControllerTest: test_should_destroy_chat
---------------------------------------------
  [1m[36mChat Load (0.2ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "chats"
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsControllerTest: test_should_create_chat
--------------------------------------------
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "chats"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsControllerTest: test_should_update_chat
--------------------------------------------
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
Processing by ChatsController#update as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}, "id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 15:32:22 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:32:22 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.3ms)
  Rendered homes/home.html.erb within layouts/application (1.8ms)
  Rendered layouts/_login_panel.html.erb (4.2ms)
  Rendered layouts/_header.html.erb (5.2ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 17ms (Views: 16.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 15:32:22 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 15:32:22 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:32:22 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (5.1ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.4ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 9ms (Views: 8.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 15:32:22 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:32:22 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.0ms)
  Rendered homes/home.html.erb within layouts/application (4.9ms)
  Rendered layouts/_login_panel.html.erb (1.3ms)
  Rendered layouts/_header.html.erb (2.0ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 10ms (Views: 10.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------
FriendshipsControllerTest: test_should_create_friendship
--------------------------------------------------------
  [1m[35mFriendship Load (0.2ms)[0m  SELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "friendships"[0m
Processing by FriendshipsController#create as HTML
  Parameters: {"friendship"=>{"friend_id"=>"1"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "friendships"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------
FriendshipsControllerTest: test_should_destroy_friendship
---------------------------------------------------------
  [1m[36mFriendship Load (0.1ms)[0m  [1mSELECT  "friendships".* FROM "friendships" WHERE "friendships"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "friendships"
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "friendships"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
MessagesControllerTest: test_should_create_message
--------------------------------------------------
  [1m[35mMessage Load (0.4ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "messages"[0m
Processing by MessagesController#create as HTML
  Parameters: {"message"=>{"body"=>"hello", "id"=>"1", "chat_room"=>"1"}}
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-21 15:32:22 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 922ms (ActiveRecord: 0.3ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:32:23 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.0ms)
  Rendered homes/home.html.erb within layouts/application (1.3ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.1ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 4ms (Views: 3.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-21 15:32:23 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$xJrCK4zWU2mmEsK0vTIB0uXwZkaFbRe.Fm73Srv3ZFUoQKoFoK4N."], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-21 07:32:23.761380"], ["updated_at", "2018-12-21 07:32:23.761380"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 15ms (ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started GET "/" for 127.0.0.1 at 2018-12-21 15:32:23 +0800
Processing by HomesController#home as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  Rendered homes/home.html.erb within layouts/application (0.8ms)
  Rendered layouts/_login_panel.html.erb (1.3ms)
  Rendered layouts/_header.html.erb (3.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 10ms (Views: 8.1ms | ActiveRecord: 0.1ms)
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 15:32:23 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 9ms (ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 15:32:23 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-21 15:32:23 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:32:23 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.5ms)
  Rendered homes/home.html.erb within layouts/application (2.2ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.2ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 8ms (Views: 5.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------
ChatsStateTest: test_delete_chat
--------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 15:32:23 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/chats/8" for 127.0.0.1 at 2018-12-21 15:32:23 +0800
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:32:23 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.0ms)
  Rendered homes/home.html.erb within layouts/application (1.3ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.3ms)
  Rendered layouts/_content.html.erb (4.1ms)
Completed 200 OK in 10ms (Views: 9.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 15:32:23 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-21 15:32:23 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:32:23 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.0ms)
  Rendered homes/home.html.erb within layouts/application (1.4ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.4ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 15:32:23 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-21 15:32:23 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:32:23 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (3.0ms)
  Rendered homes/home.html.erb within layouts/application (3.7ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.2ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 7ms (Views: 6.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 15:32:23 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 4ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 15:32:23 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.7ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.1ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 5.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "chats_users" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 980190962]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "users" WHERE "users"."id" = ?  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users?new=false
Completed 302 Found in 48ms (ActiveRecord: 1.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("name", "email", "sex", "password_digest", "phonenumber", "role", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$KGrYKsjvSzeKMzM1501td.xR/fe6HAb0fVML0I.IewFBmo4Kv8LMq"], ["phonenumber", ""], ["role", 1], ["status", "user"], ["created_at", "2018-12-21 07:32:24.020500"], ["updated_at", "2018-12-21 07:32:24.020500"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 11ms (ActiveRecord: 1.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"980190962"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user1@test.com') AND "users"."id" != 980190962) LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "users" SET "name" = ?, "email" = ?, "sex" = ?, "password_digest" = ?, "phonenumber" = ?, "updated_at" = ? WHERE "users"."id" = ?  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$mcCwG5pr3IXWAx2WWiG/H.Yhwjbya4Nu.dRTrf6EKm2sdogSTTTe."], ["phonenumber", "123456677777"], ["updated_at", "2018-12-21 07:32:24.040984"], ["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 12ms (ActiveRecord: 0.9ms)
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$iEcR9ZiTKbxH2lmhLy0pZuqKrZHzgVIs5yYnjomkLEPf1NKaqMbQ2"], ["created_at", "2018-12-21 07:32:24.056471"], ["updated_at", "2018-12-21 07:32:24.056471"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$6K8Q27ytM8Cwv0xVUFij4ufNKIS5rkk4ajXa.9X3n9/CuYVhdTbIy"], ["created_at", "2018-12-21 07:32:24.069537"], ["updated_at", "2018-12-21 07:32:24.069537"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 15:32:24 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 2ms (ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (2.0ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (4.9ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:07:34', '2018-12-21 08:07:34', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:07:34', '2018-12-21 08:07:34', 298486374)[0m
  [1m[35mFixture Delete (8.4ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:07:34', '2018-12-21 08:07:34', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:07:34', '2018-12-21 08:07:34', 298486374)
  [1m[36mFixture Delete (3.3ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:07:34', '2018-12-21 08:07:34', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:07:34', '2018-12-21 08:07:34', 298486374)[0m
  [1m[35mFixture Delete (4.2ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:07:34', '2018-12-21 08:07:34', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:07:34', '2018-12-21 08:07:34', 298486374)
  [1m[36m (23.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------
MessagesControllerTest: test_should_create_message
--------------------------------------------------
  [1m[36mMessage Load (0.4ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "messages"
Processing by MessagesController#create as HTML
  Parameters: {"message"=>{"body"=>"hello", "id"=>"1", "chat_room"=>"1"}}
Completed 500 Internal Server Error in 26ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (5.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (4.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (1.3ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (1.4ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$T2DidE6DIOe23rGprIkJU.u5ayK6D1Go4mFMn9aPnsE32AnYZrgaO"], ["created_at", "2018-12-21 08:07:36.689183"], ["updated_at", "2018-12-21 08:07:36.689183"]]
  [1m[36m (1.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36m (1.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (1.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$K.BZo7lW/eNr4aZtwB71nO8VW57ijJ6UlR3qdkTteo/wtZ/la/bMe"], ["created_at", "2018-12-21 08:07:36.742402"], ["updated_at", "2018-12-21 08:07:36.742402"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (2.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 16:07:36 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 20ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UserApplyStateTest: test_user_add_apply_refuse
----------------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 16:07:36 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/1" for 127.0.0.1 at 2018-12-21 16:07:36 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"1"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:07:36 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (21.0ms)
  Rendered homes/home.html.erb within layouts/application (45.4ms)
  Rendered layouts/_login_panel.html.erb (8.4ms)
  Rendered layouts/_header.html.erb (14.5ms)
  Rendered layouts/_content.html.erb (1.3ms)
Completed 200 OK in 125ms (Views: 124.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------
UserApplyStateTest: test_user_add_apply
---------------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 16:07:37 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:07:37 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.7ms)
  Rendered homes/home.html.erb within layouts/application (3.3ms)
  Rendered layouts/_login_panel.html.erb (1.6ms)
  Rendered layouts/_header.html.erb (2.0ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 9ms (Views: 8.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UserApplyStateTest: test_user_add_apply_recall
----------------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 16:07:37 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 16:07:37 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:07:37 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.7ms)
  Rendered homes/home.html.erb within layouts/application (2.1ms)
  Rendered layouts/_login_panel.html.erb (2.3ms)
  Rendered layouts/_header.html.erb (3.0ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 8ms (Views: 7.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserApplyStateTest: test_user_apply_agree
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 16:07:37 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started POST "/friendships/2" for 127.0.0.1 at 2018-12-21 16:07:37 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:07:37 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.4ms)
  Rendered homes/home.html.erb within layouts/application (1.7ms)
  Rendered layouts/_login_panel.html.erb (2.3ms)
  Rendered layouts/_header.html.erb (3.1ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 7ms (Views: 6.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 16:07:37 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 5ms (ActiveRecord: 0.2ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-21 16:07:37 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:07:37 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.3ms)
  Rendered homes/home.html.erb within layouts/application (2.8ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 7ms (Views: 6.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 16:07:37 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:07:37 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (3.5ms)
  Rendered homes/home.html.erb within layouts/application (4.4ms)
  Rendered layouts/_login_panel.html.erb (3.4ms)
  Rendered layouts/_header.html.erb (5.7ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 15ms (Views: 13.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
ChatsControllerTest: test_should_destroy_chat
---------------------------------------------
  [1m[35mChat Load (0.4ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "chats"
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsControllerTest: test_should_create_chat
--------------------------------------------
  [1m[36mChat Load (0.3ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "chats"
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsControllerTest: test_should_update_chat
--------------------------------------------
  [1m[35mChat Load (0.2ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by ChatsController#update as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}, "id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
FriendshipStateTest: test_delete_a_friend
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 16:07:37 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/3" for 127.0.0.1 at 2018-12-21 16:07:37 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"3"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:07:37 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (3.1ms)
  Rendered homes/home.html.erb within layouts/application (3.7ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.4ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 9ms (Views: 7.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------
FriendshipStateTest: test_test_show_information_of_friend
---------------------------------------------------------
Started GET "/users/9" for 127.0.0.1 at 2018-12-21 16:07:37 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 9]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 16:07:37 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:07:37 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.6ms)
  Rendered homes/home.html.erb within layouts/application (2.4ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 6ms (Views: 5.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
--------------------------------
ChatsStateTest: test_delete_chat
--------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 16:07:37 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/chats/8" for 127.0.0.1 at 2018-12-21 16:07:37 +0800
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:07:37 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.2ms)
  Rendered homes/home.html.erb within layouts/application (3.6ms)
  Rendered layouts/_login_panel.html.erb (1.9ms)
  Rendered layouts/_header.html.erb (2.7ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 19ms (Views: 18.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 16:07:37 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-21 16:07:37 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:07:37 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (10.9ms)
  Rendered homes/home.html.erb within layouts/application (11.4ms)
  Rendered layouts/_login_panel.html.erb (1.9ms)
  Rendered layouts/_header.html.erb (2.9ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 18ms (Views: 16.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 16:07:37 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-21 16:07:37 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 5ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:07:37 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (3.0ms)
  Rendered homes/home.html.erb within layouts/application (3.8ms)
  Rendered layouts/_login_panel.html.erb (2.0ms)
  Rendered layouts/_header.html.erb (2.9ms)
  Rendered layouts/_content.html.erb (0.4ms)
Completed 200 OK in 13ms (Views: 11.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 16:07:37 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-21 16:07:37 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:07:37 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.4ms)
  Rendered homes/home.html.erb within layouts/application (4.0ms)
  Rendered layouts/_login_panel.html.erb (3.0ms)
  Rendered layouts/_header.html.erb (3.8ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 12ms (Views: 10.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 16:07:37 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:07:37 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.0ms)
  Rendered homes/home.html.erb within layouts/application (2.6ms)
  Rendered layouts/_login_panel.html.erb (1.5ms)
  Rendered layouts/_header.html.erb (2.6ms)
  Rendered layouts/_content.html.erb (0.7ms)
Completed 200 OK in 17ms (Views: 15.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-21 16:07:37 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 24ms (ActiveRecord: 0.5ms)
  [1m[36m (1.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (1.9ms)[0m  [1mbegin transaction[0m
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-21 16:07:37 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.4ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 20ms (ActiveRecord: 1.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:07:37 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (6.7ms)
  Rendered homes/home.html.erb within layouts/application (8.1ms)
  Rendered layouts/_login_panel.html.erb (3.3ms)
  Rendered layouts/_header.html.erb (4.3ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 18ms (Views: 16.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-21 16:07:38 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$Rw3rMfFq9jXab65ncHhzEOWKBii9alvcz/bJYKTnqsJZbOgCf4vL2"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-21 08:07:38.058930"], ["updated_at", "2018-12-21 08:07:38.058930"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 34ms (ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started GET "/" for 127.0.0.1 at 2018-12-21 16:07:38 +0800
Processing by HomesController#home as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  Rendered homes/home.html.erb within layouts/application (1.2ms)
  Rendered layouts/_login_panel.html.erb (5.7ms)
  Rendered layouts/_header.html.erb (20.2ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 27ms (Views: 25.5ms | ActiveRecord: 0.1ms)
  [1m[35m (3.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (11.6ms)[0m  DELETE FROM "chats_users" WHERE "chats_users"."user_id" = ?  [["user_id", 980190962]]
  [1m[36mSQL (2.1ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users?new=false
Completed 302 Found in 152ms (ActiveRecord: 14.7ms)
  [1m[36m (1.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("name", "email", "sex", "password_digest", "phonenumber", "role", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$jiHIZ.iTwVLdsfIjuvNrvO0hqMUIC8OxSivgczDPlIgB6QxdVyjHi"], ["phonenumber", ""], ["role", 1], ["status", "user"], ["created_at", "2018-12-21 08:07:38.344448"], ["updated_at", "2018-12-21 08:07:38.344448"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 8ms (ActiveRecord: 0.8ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (20.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.4ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"980190962"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user1@test.com') AND "users"."id" != 980190962) LIMIT 1
  [1m[36mSQL (6.3ms)[0m  [1mUPDATE "users" SET "name" = ?, "email" = ?, "sex" = ?, "password_digest" = ?, "phonenumber" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$d46oDLAIaiIYHf8tq9D23eoMwaF58pU4i6egggaG3JS9rcyRXMoN2"], ["phonenumber", "123456677777"], ["updated_at", "2018-12-21 08:07:38.396048"], ["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 41ms (ActiveRecord: 7.0ms)
  [1m[36m (13.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 16:07:38 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:07:38 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (5.6ms)
  Rendered homes/home.html.erb within layouts/application (6.2ms)
  Rendered layouts/_login_panel.html.erb (1.6ms)
  Rendered layouts/_header.html.erb (2.4ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 11ms (Views: 10.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 16:07:38 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 16:07:38 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:07:38 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.9ms)
  Rendered homes/home.html.erb within layouts/application (2.5ms)
  Rendered layouts/_login_panel.html.erb (3.2ms)
  Rendered layouts/_header.html.erb (4.2ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 12ms (Views: 10.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (1.0ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (1.3ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:07:58', '2018-12-21 08:07:58', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:07:58', '2018-12-21 08:07:58', 298486374)[0m
  [1m[35mFixture Delete (1.2ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:07:58', '2018-12-21 08:07:58', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:07:58', '2018-12-21 08:07:58', 298486374)
  [1m[36mFixture Delete (1.5ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (4.0ms)[0m  INSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:07:58', '2018-12-21 08:07:58', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:07:58', '2018-12-21 08:07:58', 298486374)[0m
  [1m[35mFixture Delete (4.4ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:07:58', '2018-12-21 08:07:58', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:07:58', '2018-12-21 08:07:58', 298486374)
  [1m[36m (3.4ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------
ChatsStateTest: test_delete_chat
--------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 16:07:58 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 48ms (ActiveRecord: 0.0ms)
Started DELETE "/chats/8" for 127.0.0.1 at 2018-12-21 16:07:58 +0800
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:07:58 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (42.4ms)
  Rendered homes/home.html.erb within layouts/application (71.1ms)
  Rendered layouts/_login_panel.html.erb (19.2ms)
  Rendered layouts/_header.html.erb (26.7ms)
  Rendered layouts/_content.html.erb (2.4ms)
Completed 200 OK in 205ms (Views: 203.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 16:07:58 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-21 16:07:58 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:07:58 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.5ms)
  Rendered homes/home.html.erb within layouts/application (3.4ms)
  Rendered layouts/_login_panel.html.erb (2.2ms)
  Rendered layouts/_header.html.erb (2.8ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 11ms (Views: 8.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 16:07:58 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-21 16:07:58 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:07:58 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.6ms)
  Rendered layouts/_login_panel.html.erb (7.8ms)
  Rendered layouts/_header.html.erb (8.5ms)
  Rendered layouts/_content.html.erb (6.3ms)
Completed 200 OK in 20ms (Views: 18.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 16:07:58 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-21 16:07:58 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:07:59 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.8ms)
  Rendered homes/home.html.erb within layouts/application (8.7ms)
  Rendered layouts/_login_panel.html.erb (4.8ms)
  Rendered layouts/_header.html.erb (5.7ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 26ms (Views: 24.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$tN21FR.FiRPAQCz7EAPm7u6hQ2HvmzSbJcZmBcRJf8MBBMwEB9.4q"], ["created_at", "2018-12-21 08:08:00.280259"], ["updated_at", "2018-12-21 08:08:00.280259"]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (1.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (1.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$UKBIB.Em8b8vmyMvPNCSZeE43/j3ty.nlZtf9DC1kJtbNklD5n65q"], ["created_at", "2018-12-21 08:08:00.358042"], ["updated_at", "2018-12-21 08:08:00.358042"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36m (2.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 16:08:00 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 6ms (ActiveRecord: 0.2ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-21 16:08:00 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:08:00 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.5ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 5ms (Views: 4.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "sex", "password_digest", "phonenumber", "role", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$aN.1S6gWeKh.oahnUrFrOODXnwEBPhrhmx5gOYEgo2CJQJhpzRPUy"], ["phonenumber", ""], ["role", 1], ["status", "user"], ["created_at", "2018-12-21 08:08:00.463522"], ["updated_at", "2018-12-21 08:08:00.463522"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 11ms (ActiveRecord: 1.1ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"980190962"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user1@test.com') AND "users"."id" != 980190962) LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  UPDATE "users" SET "name" = ?, "email" = ?, "sex" = ?, "password_digest" = ?, "phonenumber" = ?, "updated_at" = ? WHERE "users"."id" = ?  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$nQkWlwGwm6axnINZhYW7ze5SIfd4AC3QmRG6AnWdlAgW0iZmvJ0SW"], ["phonenumber", "123456677777"], ["updated_at", "2018-12-21 08:08:00.489672"], ["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 17ms (ActiveRecord: 1.3ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "chats_users" WHERE "chats_users"."user_id" = ?  [["user_id", 980190962]]
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users?new=false
Completed 302 Found in 64ms (ActiveRecord: 1.5ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 16:08:00 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:08:00 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (3.0ms)
  Rendered homes/home.html.erb within layouts/application (3.7ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 9ms (Views: 8.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 16:08:00 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (3.9ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$CzIV9qy917EsathHelm9KOhzM.D8pbPDvv0iZh8kqFk5hAytBBF1C"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-21 08:08:00.632432"], ["updated_at", "2018-12-21 08:08:00.632432"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 17ms (ActiveRecord: 4.7ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started GET "/" for 127.0.0.1 at 2018-12-21 16:08:00 +0800
Processing by HomesController#home as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  Rendered homes/home.html.erb within layouts/application (1.2ms)
  Rendered layouts/_login_panel.html.erb (1.4ms)
  Rendered layouts/_header.html.erb (4.2ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 9ms (Views: 8.4ms | ActiveRecord: 0.1ms)
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-21 16:08:00 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 11ms (ActiveRecord: 0.4ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-21 16:08:00 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 12ms (ActiveRecord: 0.5ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:08:00 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.3ms)
  Rendered homes/home.html.erb within layouts/application (3.2ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.6ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 8ms (Views: 7.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 16:08:00 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 2ms (ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
---------------------------------------------
ChatsControllerTest: test_should_destroy_chat
---------------------------------------------
  [1m[35mChat Load (0.3ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "chats"
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsControllerTest: test_should_create_chat
--------------------------------------------
  [1m[36mChat Load (0.2ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "chats"
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsControllerTest: test_should_update_chat
--------------------------------------------
  [1m[35mChat Load (0.2ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by ChatsController#update as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}, "id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------
FriendshipStateTest: test_delete_a_friend
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 16:08:00 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/3" for 127.0.0.1 at 2018-12-21 16:08:00 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"3"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:08:00 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.4ms)
  Rendered homes/home.html.erb within layouts/application (1.8ms)
  Rendered layouts/_login_panel.html.erb (1.8ms)
  Rendered layouts/_header.html.erb (2.4ms)
  Rendered layouts/_content.html.erb (0.4ms)
Completed 200 OK in 7ms (Views: 6.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------
FriendshipStateTest: test_test_show_information_of_friend
---------------------------------------------------------
Started GET "/users/9" for 127.0.0.1 at 2018-12-21 16:08:00 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 9]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 16:08:00 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:08:00 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.3ms)
  Rendered homes/home.html.erb within layouts/application (2.9ms)
  Rendered layouts/_login_panel.html.erb (1.2ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 8ms (Views: 6.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 16:08:00 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:08:00 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.3ms)
  Rendered homes/home.html.erb within layouts/application (2.5ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.6ms)
  Rendered layouts/_content.html.erb (4.3ms)
Completed 200 OK in 11ms (Views: 10.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 16:08:00 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 16:08:00 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:08:00 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.3ms)
  Rendered homes/home.html.erb within layouts/application (3.1ms)
  Rendered layouts/_login_panel.html.erb (1.6ms)
  Rendered layouts/_header.html.erb (2.3ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 10ms (Views: 8.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 16:08:00 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:08:00 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.6ms)
  Rendered layouts/_login_panel.html.erb (1.7ms)
  Rendered layouts/_header.html.erb (2.7ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 8ms (Views: 7.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------
UserApplyStateTest: test_user_add_apply
---------------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 16:08:01 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:08:01 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.6ms)
  Rendered layouts/_login_panel.html.erb (1.2ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 6ms (Views: 5.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
UserApplyStateTest: test_user_add_apply_refuse
----------------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 16:08:01 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/1" for 127.0.0.1 at 2018-12-21 16:08:01 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"1"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:08:01 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.5ms)
  Rendered layouts/_login_panel.html.erb (2.2ms)
  Rendered layouts/_header.html.erb (2.9ms)
  Rendered layouts/_content.html.erb (0.4ms)
Completed 200 OK in 8ms (Views: 6.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
UserApplyStateTest: test_user_add_apply_recall
----------------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 16:08:01 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 16:08:01 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:08:01 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.6ms)
  Rendered homes/home.html.erb within layouts/application (2.3ms)
  Rendered layouts/_login_panel.html.erb (1.6ms)
  Rendered layouts/_header.html.erb (2.4ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 11ms (Views: 7.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------
UserApplyStateTest: test_user_apply_agree
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 16:08:01 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started POST "/friendships/2" for 127.0.0.1 at 2018-12-21 16:08:01 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:08:01 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.3ms)
  Rendered homes/home.html.erb within layouts/application (1.7ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.4ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (1.3ms)[0m  begin transaction
  [1m[36mFixture Delete (4.6ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (2.4ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:10:36', '2018-12-21 08:10:36', 980190962)
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:10:36', '2018-12-21 08:10:36', 298486374)[0m
  [1m[35mFixture Delete (1.6ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:10:36', '2018-12-21 08:10:36', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:10:36', '2018-12-21 08:10:36', 298486374)
  [1m[36mFixture Delete (3.9ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:10:36', '2018-12-21 08:10:36', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:10:36', '2018-12-21 08:10:36', 298486374)[0m
  [1m[35mFixture Delete (1.3ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:10:36', '2018-12-21 08:10:36', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:10:36', '2018-12-21 08:10:36', 298486374)
  [1m[36m (5.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------
ChatsControllerTest: test_should_create_chat
--------------------------------------------
  [1m[36mChat Load (0.5ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "chats"
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 28ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
ChatsControllerTest: test_should_destroy_chat
---------------------------------------------
  [1m[35mChat Load (0.2ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "chats"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsControllerTest: test_should_update_chat
--------------------------------------------
  [1m[36mChat Load (0.2ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
Processing by ChatsController#update as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}, "id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 16:10:37 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 31ms (ActiveRecord: 0.5ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-21 16:10:37 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:10:37 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (183.5ms)
  Rendered homes/home.html.erb within layouts/application (231.8ms)
  Rendered layouts/_login_panel.html.erb (24.1ms)
  Rendered layouts/_header.html.erb (31.6ms)
  Rendered layouts/_content.html.erb (2.0ms)
Completed 200 OK in 364ms (Views: 362.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 16:10:37 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 2202ms (ActiveRecord: 1.5ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-21 16:10:40 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 17ms (ActiveRecord: 0.8ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:10:40 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.6ms)
  Rendered homes/home.html.erb within layouts/application (3.2ms)
  Rendered layouts/_login_panel.html.erb (2.1ms)
  Rendered layouts/_header.html.erb (3.1ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 11ms (Views: 10.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 16:10:40 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$d7ODC7DJ6hrV.N8TMn0izODvSAuRrPAIfB0fha33PFHxjb3W3QxtG"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-21 08:10:40.166157"], ["updated_at", "2018-12-21 08:10:40.166157"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 15ms (ActiveRecord: 1.3ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started GET "/" for 127.0.0.1 at 2018-12-21 16:10:40 +0800
Processing by HomesController#home as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  Rendered homes/home.html.erb within layouts/application (1.1ms)
  Rendered layouts/_login_panel.html.erb (3.6ms)
  Rendered layouts/_header.html.erb (5.6ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 11ms (Views: 9.4ms | ActiveRecord: 0.1ms)
  [1m[36m (1.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 16:10:40 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-21 16:10:40 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:10:40 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.9ms)
  Rendered homes/home.html.erb within layouts/application (2.8ms)
  Rendered layouts/_login_panel.html.erb (1.9ms)
  Rendered layouts/_header.html.erb (2.8ms)
  Rendered layouts/_content.html.erb (0.5ms)
Completed 200 OK in 11ms (Views: 10.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
--------------------------------
ChatsStateTest: test_delete_chat
--------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 16:10:40 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/chats/8" for 127.0.0.1 at 2018-12-21 16:10:40 +0800
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:10:40 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.9ms)
  Rendered homes/home.html.erb within layouts/application (2.4ms)
  Rendered layouts/_login_panel.html.erb (1.2ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 7ms (Views: 6.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.6ms)[0m  begin transaction
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 16:10:40 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-21 16:10:40 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:10:40 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.6ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.3ms)
  Rendered layouts/_content.html.erb (0.4ms)
Completed 200 OK in 20ms (Views: 18.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 16:10:40 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-21 16:10:40 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:10:40 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.4ms)
  Rendered homes/home.html.erb within layouts/application (1.8ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.3ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 5ms (Views: 4.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 16:10:40 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:10:40 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.5ms)
  Rendered layouts/_login_panel.html.erb (2.1ms)
  Rendered layouts/_header.html.erb (4.0ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 9ms (Views: 8.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.4ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("name", "email", "sex", "password_digest", "phonenumber", "role", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$CYJWKRRgVhYwBpfMiLa/BuIVUVqlcs6vItyFmodN.zGHUaarcVITm"], ["phonenumber", ""], ["role", 1], ["status", "user"], ["created_at", "2018-12-21 08:10:40.434311"], ["updated_at", "2018-12-21 08:10:40.434311"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 14ms (ActiveRecord: 1.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (26.5ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"980190962"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user1@test.com') AND "users"."id" != 980190962) LIMIT 1[0m
  [1m[35mSQL (2.1ms)[0m  UPDATE "users" SET "name" = ?, "email" = ?, "sex" = ?, "password_digest" = ?, "phonenumber" = ?, "updated_at" = ? WHERE "users"."id" = ?  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$LdpfTYQzeTfloDM9mGEJxuKBjVuh3n1zF0OCoVAlcVcHblT7gE39i"], ["phonenumber", "123456677777"], ["updated_at", "2018-12-21 08:10:40.494594"], ["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 22ms (ActiveRecord: 2.7ms)
  [1m[35m (1.2ms)[0m  rollback transaction
  [1m[36m (0.6ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.2ms)[0m  DELETE FROM "chats_users" WHERE "chats_users"."user_id" = ?  [["user_id", 980190962]]
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users?new=false
Completed 302 Found in 70ms (ActiveRecord: 4.4ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserApplyStateTest: test_user_apply_agree
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 16:10:40 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started POST "/friendships/2" for 127.0.0.1 at 2018-12-21 16:10:40 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:10:40 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.3ms)
  Rendered homes/home.html.erb within layouts/application (2.0ms)
  Rendered layouts/_login_panel.html.erb (1.7ms)
  Rendered layouts/_header.html.erb (3.2ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 11ms (Views: 10.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------
UserApplyStateTest: test_user_add_apply
---------------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 16:10:40 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:10:40 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (3.4ms)
  Rendered homes/home.html.erb within layouts/application (4.0ms)
  Rendered layouts/_login_panel.html.erb (1.4ms)
  Rendered layouts/_header.html.erb (2.2ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 10ms (Views: 8.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UserApplyStateTest: test_user_add_apply_recall
----------------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 16:10:40 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 16:10:40 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:10:40 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.5ms)
  Rendered homes/home.html.erb within layouts/application (1.9ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 6ms (Views: 5.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UserApplyStateTest: test_user_add_apply_refuse
----------------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 16:10:40 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/1" for 127.0.0.1 at 2018-12-21 16:10:40 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"1"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:10:40 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.2ms)
  Rendered homes/home.html.erb within layouts/application (3.0ms)
  Rendered layouts/_login_panel.html.erb (1.7ms)
  Rendered layouts/_header.html.erb (2.5ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 9ms (Views: 8.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
FriendshipStateTest: test_delete_a_friend
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 16:10:40 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/3" for 127.0.0.1 at 2018-12-21 16:10:40 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"3"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:10:40 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.0ms)
  Rendered homes/home.html.erb within layouts/application (2.7ms)
  Rendered layouts/_login_panel.html.erb (1.4ms)
  Rendered layouts/_header.html.erb (2.1ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 8ms (Views: 7.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------
FriendshipStateTest: test_test_show_information_of_friend
---------------------------------------------------------
Started GET "/users/9" for 127.0.0.1 at 2018-12-21 16:10:40 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 9]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 16:10:40 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:10:40 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.9ms)
  Rendered homes/home.html.erb within layouts/application (2.5ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 10ms (Views: 7.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 16:10:40 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:10:40 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (4.0ms)
  Rendered homes/home.html.erb within layouts/application (4.5ms)
  Rendered layouts/_login_panel.html.erb (2.5ms)
  Rendered layouts/_header.html.erb (6.1ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 17ms (Views: 16.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 16:10:40 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 16:10:40 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:10:40 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (4.6ms)
  Rendered homes/home.html.erb within layouts/application (5.5ms)
  Rendered layouts/_login_panel.html.erb (1.6ms)
  Rendered layouts/_header.html.erb (2.2ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 11ms (Views: 10.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 16:10:41 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 16:10:41 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:10:41 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.4ms)
  Rendered homes/home.html.erb within layouts/application (2.0ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 8ms (Views: 6.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$vgbhqGwArIlE84HJ8/BFZOa7kHSvAT1uGAxVfLCXWAAtDZyA1I9W2"], ["created_at", "2018-12-21 08:10:41.064680"], ["updated_at", "2018-12-21 08:10:41.064680"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35m (2.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.8ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$guK7JIiaAtGQfatsohuUWePaIHEJoAYrLKYWJOp2ZLXcbKMcW8XWm"], ["created_at", "2018-12-21 08:10:41.208386"], ["updated_at", "2018-12-21 08:10:41.208386"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (7.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (2.0ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.9ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:36', '2018-12-21 08:14:36', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:36', '2018-12-21 08:14:36', 298486374)[0m
  [1m[35mFixture Delete (3.0ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:36', '2018-12-21 08:14:36', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:36', '2018-12-21 08:14:36', 298486374)
  [1m[36mFixture Delete (2.9ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:36', '2018-12-21 08:14:36', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:36', '2018-12-21 08:14:36', 298486374)[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "sessions"
  [1m[36m (1.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "sessions"
  [1m[36m (2.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (1.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "sessions"
  [1m[36m (2.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "sessions"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)[0m
  [1m[35mFixture Delete (1.1ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "sessions"
  [1m[36m (2.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "sessions"
  [1m[36m (1.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (1.1ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.9ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "sessions"
  [1m[36m (1.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "sessions"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (2.0ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)[0m
  [1m[35mFixture Insert (1.6ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "sessions"
  [1m[36m (1.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)
  [1m[36mFixture Insert (1.4ms)[0m  [1mINSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)[0m
  [1m[35mFixture Delete (1.0ms)[0m  DELETE FROM "sessions"
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (1.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "sessions"
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)
  [1m[36mFixture Delete (0.9ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "sessions"
  [1m[36m (1.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
  [1m[36mFixture Delete (0.9ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "sessions"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.4ms)[0m  begin transaction
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (2.5ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "sessions"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "sessions"
  [1m[36m (2.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (1.6ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)
  [1m[36mFixture Insert (0.9ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "sessions"
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "sessions"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)[0m
  [1m[35mFixture Delete (1.9ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "sessions"
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "sessions"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)[0m
  [1m[35mFixture Delete (1.0ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (1.0ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "sessions"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)[0m
  [1m[35mFixture Insert (1.8ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "sessions"
  [1m[36m (2.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "sessions"
  [1m[36m (1.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "sessions"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "sessions"
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)
  [1m[36mFixture Delete (0.9ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "sessions"
  [1m[36m (4.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:37', '2018-12-21 08:14:37', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "sessions"
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 298486374)[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 298486374)
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "sessions"
  [1m[36m (2.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 980190962)
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 298486374)
  [1m[36mFixture Delete (5.0ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 298486374)[0m
  [1m[35mFixture Delete (0.7ms)[0m  DELETE FROM "sessions"
  [1m[36m (1.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.8ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 298486374)[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 298486374)
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 298486374)[0m
  [1m[35mFixture Delete (5.3ms)[0m  DELETE FROM "sessions"
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 298486374)[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 298486374)
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "sessions"
  [1m[36m (1.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 298486374)
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 980190962)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "sessions"
  [1m[36m (1.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 298486374)
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "sessions"
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.4ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 298486374)[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 298486374)
  [1m[36mFixture Delete (1.0ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 298486374)[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "sessions"
  [1m[36m (3.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 980190962)
  [1m[36mFixture Insert (0.8ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 980190962)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 298486374)
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 298486374)[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "sessions"
  [1m[36m (1.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 298486374)[0m
  [1m[35mFixture Delete (1.3ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 298486374)
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 298486374)[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "sessions"
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 298486374)[0m
  [1m[35mFixture Delete (2.7ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 298486374)
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 298486374)[0m
  [1m[35mFixture Delete (1.2ms)[0m  DELETE FROM "sessions"
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 298486374)
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:14:38', '2018-12-21 08:14:38', 298486374)[0m
  [1m[35mFixture Delete (2.5ms)[0m  DELETE FROM "sessions"
  [1m[36m (1.9ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.8ms)[0m  [1mDELETE FROM "chats"[0m
  [1m[35mFixture Insert (0.7ms)[0m  INSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:15:31', '2018-12-21 08:15:31', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "chats" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:15:31', '2018-12-21 08:15:31', 298486374)[0m
  [1m[35mFixture Delete (2.3ms)[0m  DELETE FROM "friendships"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:15:31', '2018-12-21 08:15:31', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "friendships" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:15:31', '2018-12-21 08:15:31', 298486374)
  [1m[36mFixture Delete (1.9ms)[0m  [1mDELETE FROM "messages"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:15:31', '2018-12-21 08:15:31', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "messages" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:15:31', '2018-12-21 08:15:31', 298486374)[0m
  [1m[35mFixture Delete (1.5ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (4.6ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:15:31', '2018-12-21 08:15:31', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2018-12-21 08:15:31', '2018-12-21 08:15:31', 298486374)
  [1m[36m (3.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 16:15:31 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 65ms (ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 16:15:31 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 1339ms (ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-21 16:15:33 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$tNIpJC.JwaXEziEzYJf0O.JgoIhuyNXef35Z7bNx/zINCuOdma.9m"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-21 08:15:33.249114"], ["updated_at", "2018-12-21 08:15:33.249114"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 10ms (ActiveRecord: 0.9ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Started GET "/" for 127.0.0.1 at 2018-12-21 16:15:33 +0800
Processing by HomesController#home as HTML
  [1m[36mUser Load (2.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  Rendered homes/home.html.erb within layouts/application (8.7ms)
  Rendered layouts/_login_panel.html.erb (23.5ms)
  Rendered layouts/_header.html.erb (28.6ms)
  Rendered layouts/_content.html.erb (1.0ms)
Completed 200 OK in 98ms (Views: 95.0ms | ActiveRecord: 2.0ms)
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-21 16:15:33 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 8ms (ActiveRecord: 0.4ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:15:33 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (6.0ms)
  Rendered homes/home.html.erb within layouts/application (21.0ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (3.6ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 31ms (Views: 30.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 16:15:33 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:15:33 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.6ms)
  Rendered homes/home.html.erb within layouts/application (2.5ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 10ms (Views: 9.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------
ChatsStateTest: test_delete_chat
--------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 16:15:33 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/chats/8" for 127.0.0.1 at 2018-12-21 16:15:33 +0800
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:15:33 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (3.2ms)
  Rendered homes/home.html.erb within layouts/application (3.8ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.3ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 7ms (Views: 6.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 16:15:33 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-21 16:15:33 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:15:33 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.7ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.4ms)
  Rendered layouts/_content.html.erb (4.3ms)
Completed 200 OK in 16ms (Views: 15.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 16:15:33 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-21 16:15:33 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:15:33 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.0ms)
  Rendered homes/home.html.erb within layouts/application (1.4ms)
  Rendered layouts/_login_panel.html.erb (3.5ms)
  Rendered layouts/_header.html.erb (4.5ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 8ms (Views: 7.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 16:15:33 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-21 16:15:33 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:15:33 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.6ms)
  Rendered homes/home.html.erb within layouts/application (2.1ms)
  Rendered layouts/_login_panel.html.erb (1.7ms)
  Rendered layouts/_header.html.erb (2.3ms)
  Rendered layouts/_content.html.erb (0.4ms)
Completed 200 OK in 8ms (Views: 7.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
FriendshipStateTest: test_delete_a_friend
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 16:15:33 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/3" for 127.0.0.1 at 2018-12-21 16:15:33 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"3"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:15:33 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.4ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.3ms)
  Rendered layouts/_content.html.erb (5.6ms)
Completed 200 OK in 10ms (Views: 9.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------
FriendshipStateTest: test_test_show_information_of_friend
---------------------------------------------------------
Started GET "/users/9" for 127.0.0.1 at 2018-12-21 16:15:33 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 9]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 16:15:33 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:15:33 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.5ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (1.3ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 5ms (Views: 4.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------
ChatsControllerTest: test_should_create_chat
--------------------------------------------
  [1m[36mChat Load (0.4ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "chats"
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsControllerTest: test_should_update_chat
--------------------------------------------
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 980190962]]
Processing by ChatsController#update as HTML
  Parameters: {"chat"=>{"name"=>"chat1", "description"=>"user1&user2"}, "id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
ChatsControllerTest: test_should_destroy_chat
---------------------------------------------
  [1m[36mChat Load (0.2ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "chats"
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
Redirected to http://test.host/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "chats"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 16:15:33 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:15:33 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (3.4ms)
  Rendered homes/home.html.erb within layouts/application (4.7ms)
  Rendered layouts/_login_panel.html.erb (1.8ms)
  Rendered layouts/_header.html.erb (2.6ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 16ms (Views: 14.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 16:15:33 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 4ms (ActiveRecord: 0.2ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-21 16:15:33 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:15:33 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.5ms)
  Rendered homes/home.html.erb within layouts/application (1.8ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 7ms (Views: 5.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 16:15:33 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:15:33 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.2ms)
  Rendered homes/home.html.erb within layouts/application (1.6ms)
  Rendered layouts/_login_panel.html.erb (1.4ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (7.9ms)
Completed 200 OK in 16ms (Views: 15.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 16:15:33 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 16:15:33 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:15:33 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (4.1ms)
  Rendered homes/home.html.erb within layouts/application (4.7ms)
  Rendered layouts/_login_panel.html.erb (1.3ms)
  Rendered layouts/_header.html.erb (2.0ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 10ms (Views: 9.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (1.3ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$arifvi6BheWAOeZV8CIrNuPKrLcQfczL/UuEozBpXdEld3/ijf4W6"], ["created_at", "2018-12-21 08:15:33.918357"], ["updated_at", "2018-12-21 08:15:33.918357"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[35mUser Exists (1.6ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$5FimhW8Rr7HfFAm7eub0P.5XpwCqJlEoH8uShaPZ/xuED2w4ZfGaq"], ["created_at", "2018-12-21 08:15:33.958285"], ["updated_at", "2018-12-21 08:15:33.958285"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m  INSERT INTO "users" ("name", "email", "sex", "password_digest", "phonenumber", "role", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$axp7QigCPeR0INgN2ETN8.9v2qc7o5zT4sYeqL5tLm.WePucloA3a"], ["phonenumber", ""], ["role", 1], ["status", "user"], ["created_at", "2018-12-21 08:15:34.009957"], ["updated_at", "2018-12-21 08:15:34.009957"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 15ms (ActiveRecord: 2.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"980190962"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user1@test.com') AND "users"."id" != 980190962) LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "users" SET "name" = ?, "email" = ?, "sex" = ?, "password_digest" = ?, "phonenumber" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["name", "user1"], ["email", "user1@test.com"], ["sex", "male"], ["password_digest", "$2a$04$BLnwlGKqvPBH4rs1fIqQiu8I45HD1a.N1YSt2Cc5cSA2Vvy5AvI1K"], ["phonenumber", "123456677777"], ["updated_at", "2018-12-21 08:15:34.037103"], ["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 18ms (ActiveRecord: 1.1ms)
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.4ms)[0m  begin transaction
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "chats_users" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 980190962]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "users" WHERE "users"."id" = ?  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users?new=false
Completed 302 Found in 49ms (ActiveRecord: 1.6ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------
UserApplyStateTest: test_user_add_apply
---------------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 16:15:34 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:15:34 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.0ms)
  Rendered homes/home.html.erb within layouts/application (1.3ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (1.3ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 5ms (Views: 4.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
UserApplyStateTest: test_user_add_apply_recall
----------------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 16:15:34 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 16:15:34 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:15:34 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.3ms)
  Rendered homes/home.html.erb within layouts/application (1.7ms)
  Rendered layouts/_login_panel.html.erb (1.2ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 7ms (Views: 5.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
UserApplyStateTest: test_user_add_apply_refuse
----------------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 16:15:34 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/1" for 127.0.0.1 at 2018-12-21 16:15:34 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"1"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:15:34 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.8ms)
  Rendered homes/home.html.erb within layouts/application (4.3ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.4ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 9ms (Views: 8.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserApplyStateTest: test_user_apply_agree
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 16:15:34 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started POST "/friendships/2" for 127.0.0.1 at 2018-12-21 16:15:34 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:15:34 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.1ms)
  Rendered homes/home.html.erb within layouts/application (1.4ms)
  Rendered layouts/_login_panel.html.erb (180.6ms)
  Rendered layouts/_header.html.erb (181.1ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 185ms (Views: 184.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.5ms)[0m  begin transaction
---------------------------------------------------
UsersLoginTest: test_login_with_invalid_information
---------------------------------------------------
Started POST "/sessions/login" for 127.0.0.1 at 2018-12-21 16:18:46 +0800
Processing by SessionsController#create as HTML
  Parameters: {"session"=>{"email"=>"v@user.email", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (2.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "v@user.email"]]
Redirected to http://www.example.com/
Completed 302 Found in 119ms (ActiveRecord: 2.9ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
FriendshipStateTest: test_delete_a_friend
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 16:18:46 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 7ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/3" for 127.0.0.1 at 2018-12-21 16:18:46 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"3"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 4ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:18:46 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (25.3ms)
  Rendered homes/home.html.erb within layouts/application (56.6ms)
  Rendered layouts/_login_panel.html.erb (17.5ms)
  Rendered layouts/_header.html.erb (23.0ms)
  Rendered layouts/_content.html.erb (3.5ms)
Completed 200 OK in 169ms (Views: 168.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------
FriendshipStateTest: test_test_show_information_of_friend
---------------------------------------------------------
Started GET "/users/9" for 127.0.0.1 at 2018-12-21 16:18:47 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[35mUser Load (0.9ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 9]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 7ms (ActiveRecord: 0.9ms)
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 16:18:47 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:18:47 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.3ms)
  Rendered homes/home.html.erb within layouts/application (1.7ms)
  Rendered layouts/_login_panel.html.erb (1.5ms)
  Rendered layouts/_header.html.erb (2.2ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 15ms (Views: 10.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
ChatsStateTest: test_down_state_test_of_chat
--------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 16:18:47 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=down&user_id=1" for 127.0.0.1 at 2018-12-21 16:18:47 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"down", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:18:47 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.3ms)
  Rendered homes/home.html.erb within layouts/application (4.6ms)
  Rendered layouts/_login_panel.html.erb (3.5ms)
  Rendered layouts/_header.html.erb (4.3ms)
  Rendered layouts/_content.html.erb (3.2ms)
Completed 200 OK in 26ms (Views: 24.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------
ChatsStateTest: test_delete_chat
--------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 16:18:47 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/chats/8" for 127.0.0.1 at 2018-12-21 16:18:47 +0800
Processing by ChatsController#destroy as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:18:47 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.4ms)
  Rendered homes/home.html.erb within layouts/application (1.9ms)
  Rendered layouts/_login_panel.html.erb (2.4ms)
  Rendered layouts/_header.html.erb (3.1ms)
  Rendered layouts/_content.html.erb (0.5ms)
Completed 200 OK in 8ms (Views: 7.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.5ms)[0m  [1mbegin transaction[0m
---------------------------------------------
ChatsStateTest: test_reset_state_test_of_chat
---------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 16:18:47 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=reset&user_id=1" for 127.0.0.1 at 2018-12-21 16:18:47 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"reset", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:18:47 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.3ms)
  Rendered homes/home.html.erb within layouts/application (2.0ms)
  Rendered layouts/_login_panel.html.erb (4.7ms)
  Rendered layouts/_header.html.erb (5.3ms)
  Rendered layouts/_content.html.erb (2.0ms)
Completed 200 OK in 14ms (Views: 13.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
ChatsStateTest: test_up_state_test_of_chat
------------------------------------------
Started GET "/chats/8" for 127.0.0.1 at 2018-12-21 16:18:47 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started PATCH "/chats/8/set_priority?priority=up&user_id=1" for 127.0.0.1 at 2018-12-21 16:18:47 +0800
Processing by ChatsController#set_priority as HTML
  Parameters: {"priority"=>"up", "user_id"=>"1", "id"=>"8"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:18:47 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (4.9ms)
  Rendered homes/home.html.erb within layouts/application (5.3ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (1.6ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 10ms (Views: 9.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UserApplyStateTest: test_user_add_apply_refuse
----------------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 16:18:47 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/1" for 127.0.0.1 at 2018-12-21 16:18:47 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"1"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:18:47 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (4.6ms)
  Rendered homes/home.html.erb within layouts/application (5.1ms)
  Rendered layouts/_login_panel.html.erb (1.7ms)
  Rendered layouts/_header.html.erb (2.9ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 12ms (Views: 11.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------
UserApplyStateTest: test_user_add_apply
---------------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 16:18:47 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:18:48 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (3.4ms)
  Rendered homes/home.html.erb within layouts/application (4.0ms)
  Rendered layouts/_login_panel.html.erb (3.2ms)
  Rendered layouts/_header.html.erb (4.0ms)
  Rendered layouts/_content.html.erb (3.8ms)
Completed 200 OK in 19ms (Views: 17.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UserApplyStateTest: test_user_add_apply_recall
----------------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 16:18:48 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 16:18:48 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:18:48 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.7ms)
  Rendered homes/home.html.erb within layouts/application (3.3ms)
  Rendered layouts/_login_panel.html.erb (1.2ms)
  Rendered layouts/_header.html.erb (1.6ms)
  Rendered layouts/_content.html.erb (56.6ms)
Completed 200 OK in 65ms (Views: 64.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserApplyStateTest: test_user_apply_agree
-----------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 16:18:48 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started POST "/friendships/2" for 127.0.0.1 at 2018-12-21 16:18:48 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:18:48 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (3.1ms)
  Rendered homes/home.html.erb within layouts/application (3.8ms)
  Rendered layouts/_login_panel.html.erb (17.3ms)
  Rendered layouts/_header.html.erb (18.9ms)
  Rendered layouts/_content.html.erb (0.4ms)
Completed 200 OK in 33ms (Views: 32.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
MessagesSendTest: test_message_with_invalid_information
-------------------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 16:18:48 +0800
Processing by ChatsController#create as HTML
  Parameters: {"message"=>{"body"=>"hello"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:18:48 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (1.3ms)
  Rendered homes/home.html.erb within layouts/application (1.9ms)
  Rendered layouts/_login_panel.html.erb (1.3ms)
  Rendered layouts/_header.html.erb (2.0ms)
  Rendered layouts/_content.html.erb (0.5ms)
Completed 200 OK in 257ms (Views: 253.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_password_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_email_addresses_should_be_unique
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36mSQL (2.2ms)[0m  [1mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "User1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$.Fj.3Iwdv9hlL5WoPNhc1uEc5s5OFi5VFfTO5Cj8t34OReL1Df6DW"], ["created_at", "2018-12-21 08:18:50.281088"], ["updated_at", "2018-12-21 08:18:50.281088"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('USER1@TEST.COM') LIMIT 1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('useruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruseruser@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------
UserTest: test_should_be_valid
------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(' ') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
UserTest: test_email_validation_should_reject_invalid_addresses
---------------------------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@test,com') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user_at_foo.org') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user.name@test.') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar_baz.com') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('foo@bar+baz.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserTest: test_email_addresses_should_be_saved_as_lower-case
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('Foo@ExAMPle.CoM') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["name", "User1"], ["email", "foo@example.com"], ["password_digest", "$2a$04$NCNVxp7SRFVRXT5XdkbC9ew.NmeSzGTBFMSaIZjAwX6prJ4pRbI5m"], ["created_at", "2018-12-21 08:18:50.373663"], ["updated_at", "2018-12-21 08:18:50.373663"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UserEditTest: test_test_user_edit_information
---------------------------------------------
Started GET "/users/1" for 127.0.0.1 at 2018-12-21 16:18:50 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)
Started PATCH "/users/1" for 127.0.0.1 at 2018-12-21 16:18:50 +0800
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]", "phonenumber"=>"123456677777", "sex"=>"male"}, "id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/
Filter chain halted as :set_user rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.1ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:18:50 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.8ms)
  Rendered homes/home.html.erb within layouts/application (3.4ms)
  Rendered layouts/_login_panel.html.erb (1.7ms)
  Rendered layouts/_header.html.erb (2.7ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 15ms (Views: 13.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
ChatAddTest: test_chat_with_invalid_information
-----------------------------------------------
Started POST "/chats" for 127.0.0.1 at 2018-12-21 16:18:50 +0800
Processing by ChatsController#create as HTML
  Parameters: {"chat"=>{"name"=>"", "description"=>"user@invalid"}}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:18:50 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.7ms)
  Rendered homes/home.html.erb within layouts/application (3.2ms)
  Rendered layouts/_login_panel.html.erb (1.6ms)
  Rendered layouts/_header.html.erb (2.5ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 9ms (Views: 8.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------
UserEddTest: test_add_new_friend
--------------------------------
Started POST "/friendships?friend_id=5" for 127.0.0.1 at 2018-12-21 16:18:50 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"friend_id"=>"5"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:18:50 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.2ms)
  Rendered homes/home.html.erb within layouts/application (2.7ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 7ms (Views: 6.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------------
UserEddTest: test_add_new_friend_esc
------------------------------------
Started GET "/chats" for 127.0.0.1 at 2018-12-21 16:18:50 +0800
Processing by ChatsController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started DELETE "/friendships/2" for 127.0.0.1 at 2018-12-21 16:18:50 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"id"=>"2"}
Redirected to http://www.example.com/
Filter chain halted as :logged_in rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:18:50 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.2ms)
  Rendered homes/home.html.erb within layouts/application (2.6ms)
  Rendered layouts/_login_panel.html.erb (2.4ms)
  Rendered layouts/_header.html.erb (3.1ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 10ms (Views: 9.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------
UsersSignupTest: test_signup
----------------------------
Started POST "/users" for 127.0.0.1 at 2018-12-21 16:18:50 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 18ms (ActiveRecord: 0.5ms)
Started GET "/" for 127.0.0.1 at 2018-12-21 16:18:50 +0800
Processing by HomesController#home as HTML
  Rendered layouts/_register_panel.html.erb (2.0ms)
  Rendered homes/home.html.erb within layouts/application (2.4ms)
  Rendered layouts/_login_panel.html.erb (1.6ms)
  Rendered layouts/_header.html.erb (2.2ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 8ms (Views: 7.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
----------------------------------------------
UsersSignupTest: test_valid_signup_information
----------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-12-21 16:18:50 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"user1", "email"=>"user1@test.com", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "phonenumber", "role", "sex", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$04$D48mLE16FBMkL26WkTE7l.6mpOOkmaM84PywlNxdk9xbqEpPNeB5S"], ["phonenumber", ""], ["role", 1], ["sex", "male"], ["status", "user"], ["created_at", "2018-12-21 08:18:50.825962"], ["updated_at", "2018-12-21 08:18:50.825962"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 20ms (ActiveRecord: 1.5ms)
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "users"
Started GET "/" for 127.0.0.1 at 2018-12-21 16:18:50 +0800
Processing by HomesController#home as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  Rendered homes/home.html.erb within layouts/application (0.9ms)
  Rendered layouts/_login_panel.html.erb (2.2ms)
  Rendered layouts/_header.html.erb (4.5ms)
  Rendered layouts/_content.html.erb (1.7ms)
Completed 200 OK in 12ms (Views: 11.2ms | ActiveRecord: 0.1ms)
  [1m[35m (1.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------
UsersSignupTest: test_invalid_signup_information
------------------------------------------------
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2018-12-21 16:18:50 +0800
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"", "email"=>"user@invalid", "password"=>"[FILTERED]"}}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@invalid') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 13ms (ActiveRecord: 0.6ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
